{"version":3,"sources":["frontpage.js"],"names":["define","$","ModalFactory","Templates","Str","ModalEvents","SECTIONMANAGER","Fragment","Ajax","Notification","RemUIEvents","CONTEXTID","MAINMODAL","CONFIGMODAL","VISIBILITY","assign","Object","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","fetch_categories","instanceid","offset","limit","callback","fail","methodname","args","done","apply_slick_to_courses","options","defaults","dots","arrows","infinite","speed","prevArrow","nextArrow","rtl","attr","slidesToShow","slidesToScroll","responsive","breakpoint","settings","section","getSectionElement","find","addClass","slick","on","event","css","$slides","$slideTrack","height","removeClass","generate_courses","categoryid","showSectionLoader","response","JSON","parse","shadowless","sectionproperties","shadowcolor","empty","data","totalcourse","render","html","js","appendNodeContents","exception","ex","applyStyleToEditor","element","number","replace","prefix","style","val","match","next","is","after","getInstanceId","getBody","id","params","formdata","body","loadFragment","setTimeout","styles","each","index","initializeModal","context","triggerButtons","create","large","then","modal","setTitle","M","util","get_string","hasClass","width","bind","this","initModal","sections","title","imageurl","image_url","initializeEvents","window","scroll","sectiontop","position","top","scrollTop","getLoadedSection","reloadSection","success","appearanimation","appearanimationstyle","prev","transparentheader","form","color","color2","margin","parents","toggleClass","border","background","applyStyleToSeparator","closest","stringify","getRoot","serialize","frag","setBody","document","sectionname","type","types","SAVE_CANCEL","charAt","toUpperCase","slice","root","save","e","preventDefault","updateSectionData","updateSection","hide","remui_section_form_validate","hidden","destroy","remove","show","setSaveButtonText","deleteInstance","location","reload","dataatr","setSectionName","addSection","reorderSection","visible","updateVisibility","parent","playSliderVideo","append","submit","showAllSectionsLoader","previewon","SETTINGS","animate","hasslider","hideAllSectionsLoader","SECTION_ADDED","SECTION_UPDATED","configdata","categorylist","firstcat","siblings","currentSlide","$nextArrow","totalcourses","current","start","rendered","courses","forEach","course","$slider","categories","categoriesloaded","category","list","innerHeight","scrollHeight","init","contextid","userisediting","ready","LoadAllSections"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n// Section manager class\n//\n// @module     local_remuihomepage/frontpage\n// @copyright  (c) 2018 WisdmLabs (https://wisdmlabs.com/)\n// @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.\n\ndefine([\n    'jquery',\n    'core/modal_factory',\n    'core/templates',\n    'core/str','core/modal_events',\n    'local_remuihomepage/sectionmanager',\n    'core/fragment',\n    'core/ajax',\n    'core/notification',\n    'theme_remui/events',\n], function(\n    $,\n    ModalFactory,\n    Templates,\n    Str,\n    ModalEvents,\n    SECTIONMANAGER,\n    Fragment,\n    Ajax,\n    Notification,\n    RemUIEvents,\n){\n    var CONTEXTID = -1;\n    var MAINMODAL = null;\n    var CONFIGMODAL = null;\n    var modalSelector = \"\";\n    var SECTIONSELECT   = \".sections-container div[class*='section-']\";\n    var ADDSECTIONTRIGGER = \".add-section\";\n    var EDITSECTIONTRIGGER   = \".home-sections button.edit-section\";\n    var DELETESECTIONTRIGGER = \".home-sections button.delete-section\";\n    var DELETESECTIONCANCEL = \".home-sections button.cancel-delete-section\";\n    var DELETESECTIONCONFIRM = \".home-sections button.confirm-delete-section\";\n    var MOVESECTIONUP = \".moveup-section\";\n    var MOVESECTIONDOWN = \".movedown-section\";\n    var EDITINGACTION = \".editing-action\";\n    var SLIDERSECTIONS = \".home-sections section .carousel\";\n    var PUBLISH = \".publish\";\n    var PREVIEW = \".preview-section\";\n    var SETTINGS = \".settings\";\n    var VISIBILITY = \".home-sections button.section-visibility\";\n    var EDITINGALERT = \".editing-alert\";\n    var COURSESECTIONCATEGORY = \".home-sections .section-courses .category-list .category-item\";\n    var COURSESECTIONASIDE = \".home-sections .section-courses .category-list .site-skintools-toggle\";\n    var COURSEPERPAGE = 25;\n    var options = {\n        'logging': false,\n        'useCORS': true\n    };\n    var imageserverurl = 'https://share.edwiser.org/api/base64.php';\n\n    /**\n     * Polyfill method for Object.assign\n     * @param  {Object}    target    Target Object\n     * @param  {...Object} arguments Object to be merged\n     * @return {Object}              Merged object\n     */\n    var assign = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i];\n            for (var key in source) {\n                if (Object.prototype.hasOwnProperty.call(source, key)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n        return target;\n    };\n\n    /**\n     * Fetch categories using ajax service\n     * @param  {Number}   instanceid Instance id of section\n     * @param  {Number}   offset     Starting offset of category\n     * @param  {Number}   limit      Number categories to be fetched\n     * @param  {Function} callback   Callback function for successful ajax\n     * @param  {Function} fail       Callbakc function for failed ajax\n     */\n    function fetch_categories(instanceid, offset, limit, callback, fail) {\n        Ajax.call([{\n            methodname: 'local_remuihomepage_get_frontpage_categories',\n            args: {\n                instanceid,\n                offset,\n                limit\n            }\n        }])[0].done(callback).fail(fail);\n    }\n\n    /**\n     * Apply slick to courses list\n     * @param  {Number} instanceid Section instance id\n     * @param  {Object} options    Options of slick slider\n     */\n    function apply_slick_to_courses(instanceid, options) {\n        var defaults = {\n            dots: false,\n            arrows: true,\n            infinite: false,\n            speed: 500,\n            prevArrow: $(\"section[data-instance='\" + instanceid + \"'] .button-container .btn-prev\"),\n            nextArrow: $(\"section[data-instance='\" + instanceid + \"'] .button-container .btn-next\"),\n            rtl: ($(\"html\").attr(\"dir\") == \"rtl\") ? true : false,\n            slidesToShow: 4,\n            slidesToScroll: 4,\n            responsive: [{\n                breakpoint: 1024,\n                settings: {\n                    slidesToShow: 3,\n                    slidesToScroll: 3\n                }\n            }, {\n                breakpoint: 800,\n                settings: {\n                    slidesToShow: 2,\n                    slidesToScroll: 2\n                }\n            }, {\n                breakpoint: 480,\n                settings: {\n                    slidesToShow: 1,\n                    slidesToScroll: 1\n                }\n            }]\n        };\n        if (options != null && typeof options == 'object') {\n            assign(defaults, options);\n        }\n        var section = SECTIONMANAGER.getSectionElement(instanceid);\n        section.find('.available-courses').addClass('d-none');\n        if (section.find('.courses-slider .empty-courses-container').length != 0) {\n            return;\n        }\n        section.find('.courses-slider').slick(defaults)\n        .on('setPosition', function (event, slick) {\n            $(section).find('.slick-slide > div').css('height', '100%');\n            slick.$slides.css('height', slick.$slideTrack.height() + 'px');\n        });\n        section.find('.available-courses').removeClass('d-none');\n    }\n\n    /**\n     * Generate courses slick slider\n     * @param  {Number}   instanceid Instance id of section\n     * @param  {Number}   categoryid Category id\n     * @param  {Function} callback   Callback function\n     */\n    function generate_courses(instanceid, categoryid, callback) {\n        SECTIONMANAGER.showSectionLoader(instanceid, true);\n        var section = SECTIONMANAGER.getSectionElement(instanceid);\n        section.find('.courses-slider').removeClass('show');\n        Ajax.call([{\n            methodname: 'local_remuihomepage_get_frontpage_section_courses_in_category',\n            args: {\n                instanceid: instanceid,\n                categoryid: categoryid\n            },\n            done: function(response) {\n                response = JSON.parse(response);\n                response.shadowless = response.sectionproperties.shadowless;\n                response.shadowcolor = response.sectionproperties.shadowcolor;\n                section.find('.courses-slider.slick-initialized.slick-slider').slick('unslick');\n                section.find('.courses-slider').empty();\n                section.data('totalcourses', response.totalcourse);\n                section.data('current', 0);\n                Templates.render('local_remuihomepage/courses_cards', response)\n                .done(function(html, js) {\n                    Templates.appendNodeContents(section.find('.courses-slider'), html, js);\n                    apply_slick_to_courses(instanceid, {\n                        slidesToShow: 3,\n                        slidesToScroll: 3\n                    });\n                    if (typeof callback == 'function') {\n                        callback();\n                    }\n                })\n                .fail(Notification.exception);\n\n                SECTIONMANAGER.showSectionLoader(instanceid, false);\n            },\n            fail: function(ex) {\n                SECTIONMANAGER.showSectionLoader(instanceid, false);\n                Notification.exception(ex);\n            }\n        }]);\n    }\n\n    /**\n     * Apply style to editor from style element\n     * @param  {Object} element Jquery element object\n     */\n    var applyStyleToEditor = function(element) {\n        var number = $(element).attr('id').replace('id_block_', '').replace('_style', '');\n        var prefix = '#id_block_' + number + '_htmleditable ';\n        var style = $(element).val().replace(/(([\\.\\#]?[\\w\\d\\_\\-]+\\s*)+\\{)/, function(match) {\n            return prefix + match;\n        });\n        if (!$(element).next().is('#block-' + number + '-style')) {\n            $(element).after('<style id=\"block-' + number + '-style\" type=\"text/css\"></style>');\n        }\n        $(element).next().html(style);\n    };\n\n    /**\n     * Apply style to separator\n     * @param  {Object} form Form element\n     */\n    var applyStyleToSeparator = function(form) {\n        var style = $(form).find('#id_style').val();\n        var color = $(form).find('[name=\"color\"]').val();\n        var color2 = $(form).find('[name=\"color2\"]').val();\n        var height = $(form).find('#id_height').val();\n        var width = $(form).find('#id_width').val();\n        var css = {\n            margin: '0px auto',\n            width: width + '%'\n        };\n        $(form).find('[name=\"color2\"]').parents('.separator-style').toggleClass('d-none', style != 'gradient');\n        switch (style) {\n            case 'blur':\n                // Reset.\n                css.height = '0px';\n                css['background-image'] = 'none';\n                // Set.\n                css.border = '1px solid ' + color;\n                css['box-shadow'] = '0 0 ' + height + 'px ' + (height / 2) + 'px ' + color;\n                break;\n            case 'blurend':\n                // Reset.\n                css.background = 'none';\n                css['box-shadow'] = 'none';\n                css.border = 'none';\n                // Set.\n                css.height = height + 'px';\n                css['background-image'] = 'linear-gradient(to right, #ffffff, ' + color + ', #ffffff)';\n                break;\n            case 'gradient':\n                // Reset.\n                css['box-shadow'] = 'none';\n                css['background-image'] = 'none';\n                css.border = 'none';\n                // Set.\n                css.height = height + 'px';\n                css.background = 'linear-gradient(to right, ' + color + ' 0%, ' + color2 + ' 50%, ' + color + ' 100%)';\n                break;\n            default:\n                // Reset.\n                css['box-shadow'] = 'none';\n                css['background-image'] = 'none';\n                css.height = '0px';\n                // Set.\n                css['border-top'] = height + 'px ' + style + ' ' + color;\n                break;\n        }\n        $(form).find('#remui_separator_output').css(css);\n    };\n\n    // Return Instance of Selected element, i.e. data-instance attribute.\n    function getInstanceId(element){\n        return $(element).attr(\"data-instance\");\n    }\n    /**\n     * Return Instance of Selected element, i.e. data-instance attribute.\n     * @param  {String} element Element id/class\n     * @return {DOM}            DOM Element\n     */\n    function getSectionName(element){\n        return $(element).attr(\"data-sectionname\");\n    }\n\n    /**\n     * Apply some events when form is loaded in modal\n     */\n    function editFormIsLoaded() {\n        setTimeout(function() {\n            var styles = $('body').find('form .block-style textarea');\n            if (styles.length != 0) {\n                    styles.each(function(index, element) {\n                        applyStyleToEditor($(element));\n                    });\n            }\n        }, 2000);\n    }\n\n    /**\n     * Get body content for modal\n     * @param  {String} id   Section id\n     * @param  {Object} args Ajax argument\n     * @return {String}      HTML\n     */\n    var getBody = function(id, args) {\n        var params = {instanceid: id};\n        if (args != null) {\n            params.formdata = args;\n        }\n        var body = Fragment.loadFragment('local_remuihomepage', 'frontpage_section_form', CONTEXTID, params);\n        body.done(function(html, js) {\n            editFormIsLoaded();\n        });\n        return body;\n    }\n\n    /**\n     * Add Sections Modal Creation Function. Context is the list of sections to be added.\n     * @param {String} context Context id\n     */\n    var initModal = function(context) {\n        var triggerButtons = $(ADDSECTIONTRIGGER);\n\n        ModalFactory.create({\n            large: true,\n            body: Templates.render('local_remuihomepage/sections_list', context)\n        }, triggerButtons)\n        .then(function(modal) {\n            MAINMODAL = modal;\n            modal.setTitle(M.util.get_string('addsection', 'local_remuihomepage'));\n            modal.modal.addClass(\"modal-sidebar d-inline-flex\");\n            if (modal.modal.hasClass(\"modal-dialog-scrollable\")) {\n                modal.modal.removeClass(\"modal-dialog-scrollable\");\n            }\n            modal.modal.width('500px');\n            return;\n        }.bind(this))\n        .fail(Notification.exception);\n    };\n\n    /**\n     * Initialize section loader\n     */\n    var initSectionsLoader = function () {\n        SECTIONMANAGER.LoadAllSections();\n    };\n\n    /**\n     * Initialize the Modal.\n     */\n    var initializeModal = function() {\n        initModal({\n            sections: [\n            {\n                section:\"slider\",\n                title: M.util.get_string('slidersection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/slider', 'local_remuihomepage')\n            },\n            {\n                section:\"aboutus\",\n                title: M.util.get_string('aboutussection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/aboutus', 'local_remuihomepage')\n            },\n            {\n                section:\"contact\",\n                title: M.util.get_string('contactsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/contact', 'local_remuihomepage')\n            },\n            {\n                section:\"feature\",\n                title: M.util.get_string('featuresection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/feature', 'local_remuihomepage')\n            },\n            {\n                section:\"courses\",\n                title: M.util.get_string('coursessection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/courses', 'local_remuihomepage')\n            },\n            {\n                section:\"team\",\n                title: M.util.get_string('teamsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/team', 'local_remuihomepage')\n            },\n            {\n                section:\"testimonial\",\n                title: M.util.get_string('testimonialsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/testimonial', 'local_remuihomepage')\n            },\n            {\n                section:\"html\",\n                title: M.util.get_string('htmlsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/html', 'local_remuihomepage')\n            },\n            {\n                section:\"separator\",\n                title: M.util.get_string('separatorsection', 'local_remuihomepage'),\n                imageurl: M.util.image_url('screenshots/separator', 'local_remuihomepage')\n            }\n            ]\n        });\n    };\n\n\n    /**\n     * Initialize js events\n     * @return {[type]} [description]\n     */\n    var initializeEvents = function() {\n        // Every time the window is scrolled.\n        $(window).scroll( function() {\n            // Check the location of each lazy section.\n            $('.pagelayout-frontpage section.lazy-section').each(function(i){\n                var sectiontop = $(this).position().top;\n                var bottom_of_window = $(window).scrollTop() + $(window).height();\n                // Load upto three sections.\n                var thricewindow = bottom_of_window + $(window).height() * 2;\n                if (thricewindow > sectiontop) {\n                    if ($(this).is('.lazy-section')) {\n                        $(this).removeClass(\"lazy-section\");\n                        var instanceid = $(this).data('instance');\n                        var section = SECTIONMANAGER.getLoadedSection(instanceid);\n                        SECTIONMANAGER.reloadSection({\n                            success: true,\n                            context: section\n                        }, function() {\n                            var section  = $('.home-sections section[data-instance=\"' + instanceid + '\"]');\n                        });\n                        return;\n                    }\n                }\n            });\n            // Check the location of each invisible section.\n            $('.pagelayout-frontpage section.invisible').each(function(i){\n                var sectiontop = $(this).position().top + 100;\n                var bottom_of_window = $(window).scrollTop() + $(window).height();\n                if( bottom_of_window > sectiontop ){\n                    setTimeout((function() {\n                        $(this).removeClass('invisible');\n                        // Show animation if appear animation is enabled.\n                        if (appearanimation == true) {\n                            if (appearanimationstyle == 'animation-slide-left-right') {\n                                if ($(this).prev().is('.animation-slide-left')) {\n                                    $(this).addClass('animation-slide-right');\n                                } else {\n                                    $(this).addClass('animation-slide-left');\n                                }\n                            } else {\n                                $(this).addClass(appearanimationstyle);\n                            }\n                        }\n                    }).bind(this), 100);\n                }\n            });\n            if (transparentheader) {\n                if ($('section[data-instance]:first-child').is('.section-slider')) {\n                    var windowtop = $(window).scrollTop();\n                    if(windowtop < 45) {\n                        $(\"body.has-slider\").addClass(\"animate-header\");\n                        return;\n                    }\n                }\n                $(\"body.has-slider\").removeClass(\"animate-header\");\n            }\n        });\n\n        // Apply style to separator on change.\n        $('body').on('input', '.separator-style select, .separator-style input', function() {\n            applyStyleToSeparator($(this).closest('form'));\n        });\n\n        $('body').on('change', '.updateform select', function() {\n            var instanceid = $(this).parents('form').find('[name=\"instanceid\"]').val();\n            var formdata = JSON.stringify(CONFIGMODAL.getRoot().find('form').serialize());\n            var frag = getBody(instanceid, formdata);\n            CONFIGMODAL.setBody(frag);\n        });\n\n        // Section Edit Event Trigger.\n        $( document ).on( \"click\", EDITSECTIONTRIGGER, function(){\n            var id = getInstanceId(this);\n            var sectionname = getSectionName(this);\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: 'Edit ' + sectionname.charAt(0).toUpperCase() + sectionname.slice(1) + ' Section',\n                body: getBody(id, null),\n            })\n            .then(function(modal) {\n                CONFIGMODAL = modal;\n                modal.modal.addClass(\"modal-sidebar d-inline-flex editmodal\");\n                if (modal.modal.hasClass(\"modal-dialog-scrollable\")) {\n                    modal.modal.removeClass(\"modal-dialog-scrollable\");\n                }\n                var root = modal.getRoot();\n\n                // Save the details to the database when save button is clicked.\n                root.on(ModalEvents.save, function(e) {\n                    e.preventDefault();\n\n                    var form = root.find('form');\n\n                    function updateSectionData() {\n                        // Convert all the form elements values to a serialised string.\n                        var formdata = JSON.stringify(form.serialize());\n                        SECTIONMANAGER.updateSection(id, formdata);\n                        CONFIGMODAL.hide();\n                    }\n\n                    if (typeof remui_section_form_validate != 'undefined') {\n                        response = remui_section_form_validate(form);\n                        if (typeof response === 'object') {\n                            response.then(function(response) {\n                                if (!response) {\n                                    return;\n                                }\n                                updateSectionData();\n                            });\n                            return;\n                        }\n                        if(!response) {\n                            return;\n                        }\n                    }\n                    updateSectionData();\n                });\n\n                // Destroy the modal when the modal is closed.\n                root.on(ModalEvents.hidden, function() {\n                    CONFIGMODAL.destroy();\n                    $(document).find('.mform.atto_form.atto_media').parents('.moodle-dialogue-base').remove();\n                });\n                modal.show();\n            });\n        });\n\n        // Section Delete Event Trigger.\n        $( document ).on( \"click\", DELETESECTIONTRIGGER, function(){\n\n            var id = getInstanceId(this);\n\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: 'Delete item',\n                body: 'Do you really want to delete?',\n            })\n            .then(function(modal) {\n                modal.setSaveButtonText('Delete');\n                var root = modal.getRoot();\n                root.on(ModalEvents.save, function() {\n                    SECTIONMANAGER.deleteInstance(id, true);\n                });\n\n                root.on(ModalEvents.hidden, function() {\n                    modal.destroy();\n                });\n                modal.show();\n            });\n        });\n\n        // Cancel section deletion.\n        $(document).on(\"click\", DELETESECTIONCANCEL, function() {\n            var id = getInstanceId(this);\n            SECTIONMANAGER.deleteInstance(id, false);\n        });\n\n        // Skip timer and confirm section deletion.\n        $(document).on(\"click\", DELETESECTIONCONFIRM, function() {\n            var id = getInstanceId(this);\n            SECTIONMANAGER.deleteInstance(id, 2);\n        });\n\n        // Apply style to editor on change.\n        $('body').on('input', '.block-style textarea', function() {\n            applyStyleToEditor($(this));\n        });\n\n        // Open modal to show frontpage settings.\n        $(document).on('click', SETTINGS, function() {\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: M.util.get_string('homepagesettings', 'local_remuihomepage'),\n                body: Fragment.loadFragment('local_remuihomepage', 'frontpage_settings_form', CONTEXTID)\n            }, $('#create'))\n            .done(function(modal) {\n                modal.modal.addClass(\"modal-sidebar d-inline-flex editmodal\");\n                if (modal.modal.hasClass(\"modal-dialog-scrollable\")) {\n                    modal.modal.removeClass(\"modal-dialog-scrollable\");\n                }\n                modal.show();\n                modal.getRoot().on(ModalEvents.save, function(e) {\n                    e.preventDefault();\n\n                    var form = modal.getRoot().find('form');\n\n                    // Convert all the form elements values to a serialised string.\n                    var formdata = JSON.stringify(form.serialize());\n                    Ajax.call([{\n                        methodname: 'local_remuihomepage_save_frontpage_settings',\n                        args: {\n                            settings: formdata\n                        }\n                    }])[0]\n                    .done(function(response) {\n                        window.location.reload();\n                    })\n                    .fail(Notification.exception);\n                    modal.hide();\n                });\n\n                // Destroy the modal when the modal is closed.\n                modal.getRoot().on(ModalEvents.hidden, function() {\n                    modal.destroy();\n                });\n            });\n        });\n\n        $( document ).on( \"click\", SECTIONSELECT, function(){\n            // Get the data attribute.\n            var dataatr = $(this).data('section');\n\n            // Hide the existing section modal.\n            MAINMODAL.hide();\n\n            // Set Name of section.\n            SECTIONMANAGER.setSectionName(dataatr);\n\n            // Call method to add the section.\n            SECTIONMANAGER.addSection();\n        });\n\n        // Move section up and downside.\n        $('body').on('click', MOVESECTIONUP, function() {\n            SECTIONMANAGER.reorderSection($(this).data('instance'), -1, true);\n        }).on('click', MOVESECTIONDOWN, function() {\n            SECTIONMANAGER.reorderSection($(this).data('instance'), 1, true);\n        });\n\n        // Change the visibility of section.\n        $('body').on('click', VISIBILITY, function() {\n            var instanceid = $(this).data('instance');\n            var visible = $(this).data('visible');\n            SECTIONMANAGER.updateVisibility(instanceid, !visible);\n        });\n\n        // Play video from slider when slide is changed.\n        $(document).on('slid.bs.carousel', SLIDERSECTIONS, function() {\n            var instanceid = $(this).parent().data('instance');\n            SECTIONMANAGER.playSliderVideo(instanceid);\n        });\n\n        $(document).on('click', EDITINGACTION, function() {\n            var form = $('<form method=\"post\"></form>');\n            form.append(\"<input type='hidden' name='frontpageediting' value='1'/>\");\n            form.append(\"<input type='hidden' name='editpage' value='\" + $(this).data('edit') + \"'/>\");\n            $('body').append(form);\n            form.submit();\n        });\n\n        $(document).on('click', PUBLISH, function() {\n            var form = $('<form method=\"post\"></form>');\n            form.append(\"<input type='hidden' name='frontpageediting' value='1'/>\");\n            form.append(\"<input type='hidden' name='publish' value='1'/>\");\n            $('body').append(form);\n            form.submit();\n        });\n\n        // Toggle frontpage preview.\n        $(document).on('click', PREVIEW, function() {\n            SECTIONMANAGER.showAllSectionsLoader();\n            $(this).find('i').toggleClass('fa-eye fa-eye-slash');\n            var previewon = $(this).find('i').is('.fa-eye-slash');\n            $('body').toggleClass('preview', previewon);\n            $(SETTINGS + ',' + PUBLISH + ',' + ADDSECTIONTRIGGER + ',' + EDITINGACTION + ',' + EDITINGALERT).toggleClass('d-flex', !previewon).toggleClass('d-none', previewon);\n            $('html, body').animate({scrollTop:0}, $(window).scrollTop() / 6);\n            $(VISIBILITY + ' .fa-eye-slash').parents('section[data-instance]').toggleClass('section-invisible', previewon);\n            if (transparentheader) {\n                if (previewon) {\n                    var sections = $('body').find('section[data-instance]:not(.section-invisible)');\n                    var hasslider = false;\n                    if (sections) {\n                        hasslider = $(sections[0]).is('.section-slider');\n                    }\n                    $('body').toggleClass('has-slider animate-header', hasslider);\n                } else {\n                    $('body').toggleClass('has-slider animate-header', $('body').find('section[data-instance]:first-child').is('.section-slider'));\n                }\n            }\n            setTimeout(function(){ SECTIONMANAGER.hideAllSectionsLoader(); }, 2000);\n\n        });\n\n        // Trigger testimonial auto slider, coursesandcategories first category.\n        $(document).on(RemUIEvents.SECTION_ADDED + ' ' + RemUIEvents.SECTION_UPDATED, function(event) {\n            switch(event.configdata.sectionname) {\n                case 'courses':\n                    var section = SECTIONMANAGER.getSectionElement(event.configdata.id);\n                    if (section.is('.categoryandcourses-view') && event.configdata.categorylist.length != 0) {\n                        var firstcat = event.configdata.categorylist[0].categoryid;\n                        generate_courses(event.configdata.id, firstcat);\n                    } else {\n                        apply_slick_to_courses(section.data('instance'), {});\n                    }\n                    break;\n            }\n        });\n\n        // Load courses on course category selection.\n        $('body').on('click', COURSESECTIONCATEGORY, function() {\n            var instanceid = $(this).parents('section[data-instance]').data('instance');\n            $(this).parents('section[data-instance]').find('.courses-slider').removeClass('show');\n            var categoryid = $(this).data('id');\n            generate_courses(instanceid, categoryid, (function() {\n                $(this).siblings().removeClass('active');\n                $(this).addClass('active');\n                $(this).parents('.category-list').removeClass('show');\n            }).bind(this));\n        });\n\n        $('body').on('click', COURSESECTIONASIDE, function() {\n            $(this).parents('.category-list').toggleClass('show');\n        }).on('afterChange', '[data-sectionname=\"courses\"].section-courses:not(.categories-view) .courses-slider', function (event, slick, currentSlide) {\n            if ($(slick.$nextArrow).is('.slick-disabled')) {\n                var section = $(this).closest('section[data-sectionname=\"courses\"]');\n                var categoryid = $(section).is('.categoryandcourses-view') ? $(section).find('.category-list .category-item.active').data('id') : 0;\n                var instanceid = section.data('instance');\n                var totalcourses = section.data('totalcourses');\n                var current = section.data('current');\n                if(current + COURSEPERPAGE < totalcourses) {\n                    Ajax.call([{\n                        methodname: 'local_remuihomepage_get_frontpage_section_courses_in_category',\n                        args: {\n                            instanceid: instanceid,\n                            categoryid: categoryid,\n                            start: current + COURSEPERPAGE\n                        },\n                    }])[0]\n                    .done(function(response) {\n                        var rendered = 0;\n                        SECTIONMANAGER.showSectionLoader(instanceid, true);\n                        response = JSON.parse(response);\n                        section.data('current', current + COURSEPERPAGE);\n                        response.courses.forEach(function(course) {\n                            course.sectionproperties = response.sectionproperties;\n                            course.shadowless = response.sectionproperties.shadowless;\n                            Templates.render('theme_remui/course_card_grid', course)\n                            .done(function(html, js) {\n                                html = \"<div><div>\" + html + \"</div></div>\";\n                                $(slick.$slider).slick('slickAdd', html);\n                                ++rendered;\n                                if (rendered == response.courses.length) {\n                                    SECTIONMANAGER.showSectionLoader(instanceid, false);\n                                }\n                            })\n                            .fail(Notification.exception);\n                        });\n                    })\n                    .fail(Notification.exception);\n                }\n            }\n        }).on('afterChange', '[data-sectionname=\"courses\"].section-courses.categories-view .courses-slider', function(event, slick, currentSlide) {\n            if ($(slick.$nextArrow).is('.slick-disabled')) {\n                var section = $(this).closest('section[data-sectionname=\"courses\"]');\n                var instanceid = section.data('instance');\n                var categories = section.find('.category-wrapper').data('categories');\n                var categoriesloaded = section.find('.category-wrapper').data('categories-loaded');\n                if (categoriesloaded < categories) {\n                    SECTIONMANAGER.showSectionLoader(instanceid, true);\n                    fetch_categories(instanceid, categoriesloaded + 1, 20, function(response) {\n                        var rendered = 0;\n                        response = JSON.parse(response);\n                        section.find('.category-wrapper').data('categories-loaded', categoriesloaded + response.categorylist.length);\n                        response.categorylist.forEach(function(category) {\n                            category.sectionproperties = response.sectionproperties;\n                            category.shadowless = response.sectionproperties.shadowless;\n                            Templates.render('local_remuihomepage/category_container', category)\n                            .done(function(html, js) {\n                                html = \"<div><div>\" + html + \"</div></div>\";\n                                $(slick.$slider).slick('slickAdd', html);\n                                ++rendered;\n                                if (rendered == response.categorylist.length) {\n                                    SECTIONMANAGER.showSectionLoader(instanceid, false);\n                                }\n                            })\n                            .fail(function(ex) {\n                                Notification.exception(ex);\n                                SECTIONMANAGER.showSectionLoader(instanceid, false);\n                            });\n                        });\n                    }, function(ex) {\n                        Notification.exception(ex);\n                        SECTIONMANAGER.showSectionLoader(instanceid, false);\n                    });\n                }\n            }\n        }).on('card-list-scroll', function(event, instanceid) {\n            var section = $('[data-instance=\"' + instanceid + '\"][data-sectionname=\"courses\"].categoryandcourses-view');\n            var list = section.find('.card-list');\n            if ($(list).scrollTop() + $(list).innerHeight() >= $(list)[0].scrollHeight) {\n                var instanceid = section.data('instance');\n                var categories = section.find('.course-category-wrapper').data('categories');\n                var categoriesloaded = section.find('.course-category-wrapper').data('categories-loaded');\n                if (categoriesloaded < categories) {\n                    SECTIONMANAGER.showSectionLoader(instanceid, true);\n                    fetch_categories(instanceid, categoriesloaded + 1, 50, function(response) {\n                        response = JSON.parse(response);\n                        response.shadowless = response.sectionproperties.shadowless;\n                        section.find('.course-category-wrapper').data('categories-loaded', categoriesloaded + response.categorylist.length);\n                        Templates.render('local_remuihomepage/course_categories', response)\n                        .done(function(html, js) {\n                            Templates.appendNodeContents($(list), html, js);\n                            SECTIONMANAGER.showSectionLoader(instanceid, false);\n                        })\n                        .fail(function(ex) {\n                            Notification.exception(ex);\n                            SECTIONMANAGER.showSectionLoader(instanceid, false);\n                        });\n                    }, function(ex) {\n                        Notification.exception(ex);\n                        SECTIONMANAGER.showSectionLoader(instanceid, false);\n                    });\n                }\n            }\n        });\n    };\n\n    return {\n        // Intialize the JS, with context id.\n        init: function(contextid, userisediting) {\n            CONTEXTID = contextid;\n            if (userisediting) {\n                initializeModal();\n            }\n            $(document).ready(function() {\n                initializeEvents();\n                // Load on page ready.\n                initSectionsLoader();\n            });\n        }\n    };\n});\n"],"file":"frontpage.min.js"}