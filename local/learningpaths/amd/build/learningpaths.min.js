define(["jquery","core/str","jqueryui","local_learningpaths/bootbox"],function(s,e,t,l){return{lpactions:function(){e.get_strings([{key:"confirm_delete",component:"local_learningpaths"},{key:"users_delete_success",component:"local_learningpaths"},{key:"cohorts_delete_success",component:"local_learningpaths"},{key:"selectusers",component:"local_learningpaths"},{key:"delete_success",component:"local_learningpaths"},{key:"selectcohort",component:"local_learningpaths"}]);var a=1;prerequisites_drag_and_drop(),save_courses_positions(),add_required_switch(),learningpaths_pagination(),searchers(),removeCourseAction(),check_all("course-all","course-learninpath"),check_all("id_all_cohorts","learningpath-cohort"),check_all("selec_allcohorts","cohort-learninpath"),check_all("id_all_users","learningpath-user"),get_url_param("coursename")||courses_drag_and_drop(),s(".learningpath-user").click(function(){var e=new Array;s(".learningpath-user").each(function(){s(this)[0].checked&&e.push(s(this)[0].dataset.userid)}),0<e.length?s("#learningpath-remove-users").attr("style","background-color:#77b300;cursor:pointer;visibility:visible;display:initial;"):(s("#learningpath-remove-users").attr("style","background-color:#FFFFFF"),s("#page-local-learningpaths-view div.select-add div.button-delete a.delete-btn").attr("style","display:none;visibility:hidden;"))}),s("#learningpath-remove-users").click(function(e){e.preventDefault(),s("#lpstatus > div.alert").removeAttr("style").html("");var a=[];s("#lpstatus").hide(),s(".learningpath-user:checked").each(function(){a.push(s(this).data("userid"))});var t=M.util.get_string("selectusers","local_learningpaths");if(a.length<=0)return s("#lpstatus").show().removeClass("hidden").children().addClass("alert-warning").html(t).fadeOut(5e3),!1;l.confirm(M.util.get_string("confirm_delete","local_learningpaths"),function(e){if(e){var t=new Object;t.users=a,t.action="remove-users",learningpath_ajax_request(t,function(e){s.each(a,function(e,t){s("#table_users tr#user-"+t).remove();var a=M.util.get_string("users_delete_success","local_learningpaths");s("#lpstatus").show().removeClass("hidden").children().addClass("alert-danger").html(a).fadeOut(5e3)}),setTimeout(function(){window.location.reload(!0)},3e3)},function(e){console.log(e)})}})}),s("#learningpath-remove-cohorts").click(function(e){s("#cohortst").hide().children().removeAttr("style").html("");var a=[];s(".learningpath-cohort:checked").each(function(){a.push(s(this).data("cohortid"))});var t=M.util.get_string("selectcohort","local_learningpaths");if(a.length<=0)return s("#cohortst").show().removeClass("hidden").children().addClass("alert-warning").html(t).fadeOut(5e3),!1;l.confirm(M.util.get_string("confirm_delete","local_learningpaths"),function(e){if(e){var t=new Object;t.cohorts=a,t.action="remove-cohorts",learningpath_ajax_request(t,function(e){s.each(a,function(e,t){s("#table_cohorts tr#cohort-"+t).remove();var a=M.util.get_string("cohorts_delete_success","local_learningpaths");s("#cohortst").show().removeClass("hidden").children().addClass("alert-danger").html(a).fadeOut(5e3)}),setTimeout(function(){window.location.reload(!0)},3e3)},function(e){console.log(e)})}})}),s("#page-local-learningpaths-view div.check form div.fitem_fcheckbox").removeClass("col-sm-6"),s("#page-local-learningpaths-view div.check form div.fitem_fcheckbox").addClass("col-sm-2"),s("#page-local-learningpaths-view div.check form div.fitem_feditor").removeClass("col-sm-6"),s("#page-local-learningpaths-view div.check form div.fitem_feditor").addClass("col-sm-12"),s("#page-local-learningpaths-view div.check form div.fitem_ftext").removeClass("col-sm-6"),s("#page-local-learningpaths-view div.check form div.fitem_ftext").addClass("col-sm-12"),s("#page-local-learningpaths-view table.mceLayout").addClass("card-box"),s("a.notifications_enroll").click(function(){changes_icon("#"+s(this)[0].id);var e=s(this)[0].id;s(this).hasClass("collapsed")?s(this).closest('div[class*="collapse_"]').addClass("active"):s(this).closest('div[class*="collapse_"]').removeClass("active"),s("a.notifications_enroll").each(function(){e!=s(this)[0].id&&(s(this).hasClass("collapsed")||(s(this).addClass("collapsed"),s(this).parent().parent().children(".collapse-color.collapse").removeClass("in").addClass("out"),s(this).children("i").removeClass("wid wid-icon-up").addClass("wid wid-icon-down"),s(this).closest('div[class*="collapse_"]').removeClass("active")))})}),s(".lpd-lp-detail-body canvas").each(function(){var e=this;switch(s(this).data("element")){case"first":(t=e.getContext("2d")).beginPath(),t.moveTo(15,0),t.lineTo(15,30),t.lineWidth=2,t.strokeStyle=s(this).parent().children("i").data("color"),t.stroke();break;case"middle":case"last":var t;(t=e.getContext("2d")).beginPath(),t.moveTo(15,0),t.lineTo(15,150),t.lineWidth=2,t.strokeStyle=s(this).parent().children("i").data("color"),t.stroke()}}),s("#courses-tab-button").click(function(e){s(".tbs-content ul li a").removeClass("active").attr("aria-expanded","false"),s("#courses-button a").addClass("active").attr("aria-expanded","true"),s(".tab-pane").removeClass("active in");var t=this.href.split("#");s("#"+t[1]).addClass("active in")}),s("#courses-button").click(function(e){if(a){var t=new Object;t.action="refresh_courses",t.learningpathid=get_url_param("id"),learningpath_ajax_request(t,function(e){reload_courses_list(e)},function(e){console.log(e)}),a=0}}),s("a.close").click(function(){s("div.contentenrollusers input.users-lpall, input.users_lpall").prop("checked",!1)}),s("a#add-users-lp").click(function(){s("div.contentenrollusers input.users-lpall, input.users_lpall").prop("checked",!1)})}}});