"use strict";define(["jquery","core/ajax","core/templates"],function(o,a,t){return{load:function(){o(document).ready(function(){var t="#epb_custom_modal.modal",e=t+" .modal-body .addblock-modal-body.layout-list",d=t+" .modal-body .addblock-modal-body.blocks-list",l=d+" .card .delete-content",n=e+" .card .delete-content",c=e+" .islayout";function s(t,e){o(t).attr("disabled",!0),o(t).find(".fa").removeClass("fa-download").addClass("fa-refresh rotate"),a.call([{methodname:"edwiserpagebuilder_update_block_content",args:{blockname:o(t).attr("data-blockname"),islayout:e},done:function(a){o(t).find(".fa").removeClass("rotate"),0==a.status?m(t):o(t).attr("disabled",!1)},fail:function(){o(t).find(".fa").removeClass("rotate"),o(t).attr("disabled",!1)}}])}function i(t,l){a.call([{methodname:"local_edwiserpagebuilder_delete_block",args:{id:t,islayout:l},done:function(a){if(l)var n=e;else n=d;o(n).find('.data[data-blockid="'+t+'"]').remove()},fail:function(o){console.log("We are failure"),console.log(o)}}])}function m(a){o(a).removeClass("btn-primary").addClass("btn-success"),o(a).find(".fa").removeClass("fa-refresh").addClass("fa-check"),jQuery(a).find("span").html("Updated")}o("#epbaddblockbutton").on("click",function(){o(t).removeClass("d-none")}),o(document).on("click","#epb_custom_modal.modal .modal-content .show-layouts",function(){o("#epb_custom_modal .modal-content").removeClass("blocklist").addClass("layoutlist")}),o(document).on("click","#epb_custom_modal.modal .modal-content .show-blocks",function(){o("#epb_custom_modal .modal-content").removeClass("layoutlist").addClass("blocklist")}),o(document).on("click",c+" a",function(o){o.preventDefault()}),o(document).on("click","#epbaddblockbutton",function(){o(t).removeClass("d-none")}),o("#epb_custom_modal.modal .modal-content .close,#epb_custom_modal.modal .modal-content .cancel").on("click",function(){o(t).addClass("d-none")}),o(document).on("click","#epb_custom_modal.modal .modal-content .blocks-list .card-header .update-content",function(){s(this,!1)}),o(document).on("click","#epb_custom_modal.modal .modal-content .layout-list .card-header .update-content",function(){s(this,!0)}),o(document).on("click","#epb_custom_modal.modal .modal-content .action-buttons-modal .updateblocklist",function(){var t=this,e=document.body.className.match(/(^|\s)context-(\d+)(\s|$)/);if(e)var l=e[2];o(t).attr("disabled",!0),o(t).find(".fa").removeClass("fa-download").addClass("fa-refresh rotate");var n=o(t).next().val();a.call([{methodname:"edwiserpagebuilder_fetch_blocks_list",args:{edwpageurl:"0"!=n?n:"?",contextid:l},done:function(a){o(t).find(".fa").removeClass("rotate"),1==a.status?(o(d+' .isblock[data-parentblock="edwiseradvancedblock"]').remove(),o(d+" .block-cards").prepend(a.html),m(t)):o(t).attr("disabled",!1)},fail:function(){o(t).find(".fa").removeClass("rotate"),o(t).attr("disabled",!1)}}])}),o(document).on("click","#epb_custom_modal.modal .modal-content .action-buttons-modal .updatelayoutlist",function(){var t=this;o(t).attr("disabled",!0),o(t).find(".fa").removeClass("fa-download").addClass("fa-refresh rotate"),a.call([{methodname:"edwiserpagebuilder_fetch_layout_list",args:{},done:function(a){o(t).find(".fa").removeClass("rotate"),1==a.status?(o(e+" .block-cards").empty().prepend(a.html),m(t)):o(t).attr("disabled",!1)},fail:function(){o(t).find(".fa").removeClass("rotate"),o(t).attr("disabled",!1)}}])}),o(document).on("click",l,function(){i(o(this).data("blockid"),!1)}),o(document).on("click",n,function(){i(o(this).data("blockid"),!0)})})}}});
//# sourceMappingURL=blockmanager.min.js.map
