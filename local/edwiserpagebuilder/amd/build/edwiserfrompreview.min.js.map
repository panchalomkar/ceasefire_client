{"version":3,"sources":["edwiserfrompreview.js"],"names":["define","$","ajax","formStyles","render_form","ele","formdata","formid","call","methodname","args","form_id","countries","window","get_from_data","dataset","rootcont","find","form","formOptions","container","get","sitekey","M","cfg","sesskey","localStorage","done","responce","status","prepend","concat","title","Formeo","definition","render","apply","style","render_all_form","editorbody","contents","each","index","this","init","document","ready","Vvveb","Builder","iframe","onload"],"mappings":"AAAA,aAEAA,OAAO,8CAA+C,CAAC,SAAU,YAAa,gCAAiC,4BAA6B,gCAAiC,SAAUC,EAAGC,EAAMC,GAwC9L,OA7BAC,YAAc,SAAqBC,GACjC,IACIC,EAZN,SAAuBC,GACrB,OAAOL,EAAKM,KAAK,CAAC,CAChBC,WAAY,kCACZC,KAAM,CACJC,QAASJ,EACTK,eAAyC,IAAvBC,OAAkB,YAAoB,MAO7CC,CADFb,EAAEI,GAAK,GAAGU,QAAQR,QAE3BS,EAAWf,EAAEI,GAAKY,KAAK,+BAA+BA,KAAK,+BAC3DC,EAAOjB,EAAEI,GAAKY,KAAK,+BAA+BA,KAAK,+BAA+BA,KAAK,0BAC3FE,EAAc,CAChBC,UAAWF,EAAKG,IAAI,GACpBC,QAASC,EAAEC,IAAIC,QACfb,UAAW,KACXc,cAAc,GAEhBpB,EAAS,GAAGqB,KAAK,SAAUC,GACF,GAAnBA,EAASC,SACXV,EAAYP,UAAYgB,EAAShB,UACjCX,EAAEe,GAAUc,QAAQ,2BAA2BC,OAAOH,EAASI,MAAO,UACzD,IAAIC,OAAOd,EAAaS,EAASM,YACvCC,OAAOjB,EAAKG,IAAI,IACvBlB,EAAWiC,MAAMnC,EAAEiB,GAAMD,KAAK,kBAAmB,MAAOW,EAASS,WAKvEC,gBAAkB,WAChB,IAAIC,EAAatC,EAAE,YAAYuC,WAAWvB,KAAK,QAC/ChB,EAAEwC,KAAKxC,EAAEsC,GAAYtB,KAAK,yBAA0B,SAAUyB,EAAOrC,GACnED,YAAYuC,SAIT,CACLL,gBAAiBK,KAAKL,gBACtBlC,YAAauC,KAAKvC,YAClBwC,KAAM,WACJ3C,EAAE4C,UAAUC,MAAM,WAChBC,MAAMC,QAAQC,OAAOC,OAAS,WAC5BZ","sourcesContent":["\ndefine('local_edwiserpagebuilder/edwiserfrompreview', ['jquery', 'core/ajax', 'local_edwiserform/form_styles', 'local_edwiserform/iefixes', 'local_edwiserform/formviewer'], function ($, ajax, formStyles) {\n    function get_from_data(formid) {\n        return ajax.call([{\n            methodname: 'edwiserform_get_form_definition',\n            args: {\n                form_id: formid,\n                countries: typeof window['countries'] == 'undefined' || true\n            }\n        }]);\n    }\n\n    render_form = (ele) => {\n        var formid = $(ele)[0].dataset.formid;\n        var formdata = get_from_data(formid);\n        var rootcont = $(ele).find('.edwiserform-root-container').find('.edwiserform-wrap-container');\n        var form = $(ele).find('.edwiserform-root-container').find('.edwiserform-wrap-container').find('.edwiserform-container');\n\n        var formOptions = {\n            container: form.get(0),\n            sitekey: M.cfg.sesskey,\n            countries: null,\n            localStorage: false,\n        };\n        formdata[0].done(function (responce) {\n            if (responce.status != false) {\n                formOptions.countries = responce.countries;\n                $(rootcont).prepend(`<h2 class='form-header'>${responce.title}</h2>`);\n                var formeo = new Formeo(formOptions, responce.definition);\n                formeo.render(form.get(0));\n                formStyles.apply($(form).find('.formeo-render'), 'add', responce.style);\n            }\n        });\n    }\n    render_all_form = () => {\n        var editorbody = $(\"#iframe1\").contents().find(\"body\");\n        $.each($(editorbody).find('.edwiser-pb-form-wrap'), function (index, ele) {\n            render_form(this);\n        });\n    };\n\n    return {\n        render_all_form: this.render_all_form,\n        render_form: this.render_form,\n        init: function () {\n            $(document).ready(function () {\n                Vvveb.Builder.iframe.onload = function () { render_all_form() };\n            });\n        }\n    }\n});\n"],"file":"edwiserfrompreview.min.js"}