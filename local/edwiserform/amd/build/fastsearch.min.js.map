{"version":3,"sources":["fastsearch.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","factory","define","amd","module","exports","require","jQuery","$","$document","window","document","instanceNum","eventStringRE","keyMap","13","27","40","38","Fastsearch","inputElement","options","this","init","apply","arguments","extend","defaults","$input","$el","wrapSelector","closest","pickTo","data","url","attr","ens","itemSelector","selectorFromClass","itemClass","focusedItemSelector","focusedItemClass","events","namespaceEvents","eventNamespace","replace","match","self","on","e","keyCode","handleTyping","preventSubmit","preventDefault","hasResults","resultsOpened","navigateItem","onEnter","handleItemSelect","mouseEvents","removeClass","$resultItems","addClass","inputValue","trim","val","length","minQueryLength","hideResults","query","showResults","clearTimeout","keyupTimeout","setTimeout","loadingClass","getResults","storeResponse","generateResults","typeTimeout","callback","formValues","find","serializeArray","apiInputName","push","name","value","get","parseResponse","call","responseData","$allResults","template","html","noResultsClass","noResultsText","responseType","responseFormat","groupItems","children","generateSimpleResults","$cont","itemModels","each","i","item","append","generateItem","generateGroupedResults","format","groupData","$group","groupClass","appendTo","groupCaption","groupTitleClass","items","onGroupCreate","label","$tag","onItemCreate","$content","resultsOpenedClass","flipOnBottom","checkDropdownPosition","$resultsCont","resultsContClass","onResultsCreate","documentCancelEvents","trigger","focusFirstItem","offset","isFlipped","top","height","toggleClass","resultsFlippedClass","setup","onCancel","closeEventsSetuped","off","target","is","contains","documentElement","direction","$currentItem","filter","maxPosition","currentPosition","index","nextPosition","eq","navigateDown","navigateUp","$item","selectOption","onItemSelect","model","fillInput","location","href","fillInputId","id","$inputId","inputIdName","clear","destroy","remove","fastsearch","dest","src","keys","key","classes","navigator","maxTouchPoints","msMaxTouchPoints","fn"],"mappings":"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","sourcesContent":["/*\n * Edwiser_Forms - https://edwiser.org/\n * Version: 0.1.0\n * Author: Yogesh Shirsath\n */\n\n(function(factory) {\n\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = factory(require('jquery'));\n    } else {\n        factory(jQuery);\n    }\n\n}(function($) {\n\n    var $document = $(window.document),\n        instanceNum = 0,\n        eventStringRE = /\\w\\b/g,\n        keyMap = {\n            13: 'enter',\n            27: 'escape',\n            40: 'downArrow',\n            38: 'upArrow'\n    };\n\n    function Fastsearch(inputElement, options) {\n\n        this.init.apply(this, arguments);\n\n    }\n\n    $.extend(Fastsearch.prototype, {\n\n        init: function(inputElement, options) {\n\n            options = this.options = $.extend(true, {}, Fastsearch.defaults, options);\n\n            this.$input = $(inputElement);\n            this.$el = options.wrapSelector instanceof $ ? options.wrapSelector : this.$input.closest(options.wrapSelector);\n\n            Fastsearch.pickTo(options, this.$el.data(), [\n                'url', 'onItemSelect', 'noResultsText', 'inputIdName', 'apiInputName'\n            ]);\n\n            options.url = options.url || this.$el.attr('action');\n\n            this.ens = '.fastsearch' + (++instanceNum);\n            this.itemSelector = Fastsearch.selectorFromClass(options.itemClass);\n            this.focusedItemSelector = Fastsearch.selectorFromClass(options.focusedItemClass);\n\n            this.events();\n\n        },\n\n        namespaceEvents: function(events) {\n\n            var eventNamespace = this.ens;\n\n            return events.replace(eventStringRE, function(match) {\n                return match + eventNamespace;\n            });\n\n        },\n\n        events: function() {\n\n            var self = this,\n                options = this.options;\n\n            this.$input.on(this.namespaceEvents('keyup focus click'), function(e) {\n\n                keyMap[e.keyCode] !== 'enter' && self.handleTyping();\n\n            }).on(this.namespaceEvents('keydown'), function(e) {\n\n                keyMap[e.keyCode] === 'enter' && options.preventSubmit && e.preventDefault();\n\n                if (self.hasResults && self.resultsOpened) {\n\n                    switch (keyMap[e.keyCode]) {\n                        case 'downArrow': e.preventDefault(); self.navigateItem('down'); break;\n                        case 'upArrow': e.preventDefault(); self.navigateItem('up'); break;\n                        case 'enter': self.onEnter(e); break;\n                    }\n\n                }\n\n            });\n\n            this.$el.on(this.namespaceEvents('click'), this.itemSelector, function(e) {\n\n                e.preventDefault();\n                self.handleItemSelect($(this));\n\n            });\n\n            options.mouseEvents && this.$el.on(this.namespaceEvents('mouseleave'), this.itemSelector, function(e) {\n\n                $(this).removeClass(options.focusedItemClass);\n\n            }).on(this.namespaceEvents('mouseenter'), this.itemSelector, function(e) {\n\n                self.$resultItems.removeClass(options.focusedItemClass);\n                $(this).addClass(options.focusedItemClass);\n\n            });\n\n        },\n\n        handleTyping: function() {\n\n            var inputValue = $.trim(this.$input.val()),\n                self = this;\n\n            if (inputValue.length < this.options.minQueryLength) {\n\n                this.hideResults();\n\n            } else if (inputValue === this.query) {\n\n                this.showResults();\n\n            } else {\n\n                clearTimeout(this.keyupTimeout);\n\n                this.keyupTimeout = setTimeout(function() {\n\n                    self.$el.addClass(self.options.loadingClass);\n\n                    self.query = inputValue;\n\n                    self.getResults(function(data) {\n\n                        self.showResults(self.storeResponse(data).generateResults(data));\n\n                    });\n\n                }, this.options.typeTimeout);\n\n            }\n\n        },\n\n        getResults: function(callback) {\n\n            var self = this,\n                options = this.options,\n                formValues = this.$el.find('input, textarea, select').serializeArray();\n\n            if (options.apiInputName) {\n                formValues.push({'name': options.apiInputName, 'value': this.$input.val()});\n            }\n\n            $.get(options.url, formValues, function(data) {\n\n                callback(options.parseResponse ? options.parseResponse.call(self, data, self) : data);\n\n            });\n\n        },\n\n        storeResponse: function(data) {\n\n            this.responseData = data;\n            this.hasResults = data.length !== 0;\n\n            return this;\n\n        },\n\n        generateResults: function(data) {\n\n            var $allResults = $('<div>'),\n                options = this.options;\n\n            if (options.template) {\n                return $(options.template(data, this));\n            }\n\n            if (data.length === 0) {\n\n                $allResults.html(\n                    '<p class=\"' + options.noResultsClass + '\">' +\n                        (typeof options.noResultsText === 'function' ? options.noResultsText.call(this) : options.noResultsText) +\n                    '</p>'\n                );\n\n            } else {\n\n                if (this.options.responseType === 'html') {\n\n                    $allResults.html(data);\n\n                } else {\n\n                    this['generate' + (data[0][options.responseFormat.groupItems] ? 'GroupedResults' : 'SimpleResults')](data, $allResults);\n\n                }\n\n            }\n\n            return $allResults.children();\n\n        },\n\n        generateSimpleResults: function(data, $cont) {\n\n            var self = this;\n\n            this.itemModels = data;\n\n            $.each(data, function(i, item) {\n                $cont.append(self.generateItem(item));\n            });\n\n        },\n\n        generateGroupedResults: function(data, $cont) {\n\n            var self = this,\n                options = this.options,\n                format = options.responseFormat;\n\n            this.itemModels = [];\n\n            $.each(data, function(i, groupData) {\n\n                var $group = $('<div class=\"' + options.groupClass + '\">').appendTo($cont);\n\n                groupData[format.groupCaption] && $group.append(\n                    '<h3 class=\"' + options.groupTitleClass + '\">' + groupData[format.groupCaption] + '</h3>'\n                );\n\n                $.each(groupData.items, function(i, item) {\n\n                    self.itemModels.push(item);\n                    $group.append(self.generateItem(item));\n\n                });\n\n                options.onGroupCreate && options.onGroupCreate.call(self, $group, groupData, self);\n\n            });\n\n        },\n\n        generateItem: function(item) {\n\n            var options = this.options,\n                format = options.responseFormat,\n                url = item[format.url],\n                html = item[format.html] || item[format.label],\n                $tag = $('<' + (url ? 'a' : 'span') + '>').html(html).addClass(options.itemClass);\n\n            url && $tag.attr('href', url);\n\n            options.onItemCreate && options.onItemCreate.call(this, $tag, item, this);\n\n            return $tag;\n\n        },\n\n        showResults: function($content) {\n\n            if (!$content && this.resultsOpened) {\n                return;\n            }\n\n            this.$el.removeClass(this.options.loadingClass).addClass(this.options.resultsOpenedClass);\n\n            if (this.options.flipOnBottom) {\n                this.checkDropdownPosition();\n            }\n\n            this.$resultsCont = this.$resultsCont || $('<div>').addClass(this.options.resultsContClass).appendTo(this.$el);\n\n            if ($content) {\n\n                this.$resultsCont.html($content);\n                this.$resultItems = this.$resultsCont.find(this.itemSelector);\n                this.options.onResultsCreate && this.options.onResultsCreate.call(this, this.$resultsCont, this.responseData, this);\n\n            }\n\n            if (!this.resultsOpened) {\n\n                this.documentCancelEvents('on');\n                this.$input.trigger('openingResults');\n\n            }\n\n            if (this.options.focusFirstItem && this.$resultItems && this.$resultItems.length) {\n                this.navigateItem('down');\n            }\n\n            this.resultsOpened = true;\n\n        },\n\n        checkDropdownPosition: function() {\n\n            var flipOnBottom = this.options.flipOnBottom;\n            var offset = typeof flipOnBottom === 'boolean' && flipOnBottom ? 400 : flipOnBottom;\n            var isFlipped = this.$input.offset().top + offset > $document.height();\n\n            this.$el.toggleClass(this.options.resultsFlippedClass, isFlipped);\n\n        },\n\n        documentCancelEvents: function(setup, onCancel) {\n\n            var self = this;\n\n            if (setup === 'off' && this.closeEventsSetuped) {\n\n                $document.off(this.ens);\n                this.closeEventsSetuped = false;\n                return;\n\n            } else if (setup === 'on' && !this.closeEventsSetuped) {\n\n                $document.on(this.namespaceEvents('click keyup'), function(e) {\n\n                    if (keyMap[e.keyCode] === 'escape' || (!$(e.target).is(self.$el) && !$.contains(self.$el.get(0), e.target) && $.contains(document.documentElement, e.target))) {\n\n                        onCancel ? onCancel.call(self) : self.hideResults();\n\n                    }\n\n                });\n\n                this.closeEventsSetuped = true;\n\n            }\n\n        },\n\n        navigateItem: function(direction) {\n\n            var $currentItem = this.$resultItems.filter(this.focusedItemSelector),\n                maxPosition = this.$resultItems.length - 1;\n\n            if ($currentItem.length === 0) {\n\n                this.$resultItems.eq(direction === 'up' ? maxPosition : 0).addClass(this.options.focusedItemClass);\n                return;\n\n            }\n\n            var currentPosition = this.$resultItems.index($currentItem),\n                nextPosition = direction === 'up' ? currentPosition - 1 : currentPosition + 1;\n\n            nextPosition > maxPosition && (nextPosition = 0);\n            nextPosition < 0 && (nextPosition = maxPosition);\n\n            $currentItem.removeClass(this.options.focusedItemClass);\n\n            this.$resultItems.eq(nextPosition).addClass(this.options.focusedItemClass);\n\n        },\n\n        navigateDown: function() {\n\n            this.navigateItem('down');\n\n        },\n\n        navigateUp: function() {\n\n            this.navigateItem('up');\n\n        },\n\n        onEnter: function(e) {\n\n            var $currentItem = this.$resultItems.filter(this.focusedItemSelector);\n\n            if ($currentItem.length) {\n                e.preventDefault();\n                this.handleItemSelect($currentItem);\n            }\n\n        },\n\n        handleItemSelect: function($item) {\n\n            var selectOption = this.options.onItemSelect,\n                model = this.itemModels.length ? this.itemModels[this.$resultItems.index($item)] : {};\n\n            this.$input.trigger('itemSelected');\n\n            if (selectOption === 'fillInput') {\n\n                this.fillInput(model);\n\n            } else if (selectOption === 'follow') {\n\n                window.location.href = $item.attr('href');\n\n            } else if (typeof selectOption === 'function') {\n\n                selectOption.call(this, $item, model, this);\n\n            }\n\n        },\n\n        fillInput: function(model) {\n\n            var options = this.options,\n                format = options.responseFormat;\n\n            this.query = model[format.label];\n            this.$input.val(model[format.label]).trigger('change');\n\n            if (options.fillInputId && model.id) {\n\n                if (!this.$inputId) {\n\n                    var inputIdName = options.inputIdName || this.$input.attr('name') + '_id';\n\n                    this.$inputId = this.$el.find('input[name=\"' + inputIdName + '\"]');\n\n                    if (!this.$inputId.length) {\n                        this.$inputId = $('<input type=\"hidden\" name=\"' + inputIdName + '\" />').appendTo(this.$el);\n                    }\n\n                }\n\n                this.$inputId.val(model.id).trigger('change');\n\n            }\n\n            this.hideResults();\n\n        },\n\n        hideResults: function() {\n\n            if (this.resultsOpened) {\n\n                this.resultsOpened = false;\n                this.$el.removeClass(this.options.resultsOpenedClass);\n                this.$input.trigger('closingResults');\n                this.documentCancelEvents('off');\n\n            }\n\n            return this;\n\n        },\n\n        clear: function() {\n\n            this.hideResults();\n            this.$input.val('').trigger('change');\n\n            return this;\n\n        },\n\n        destroy: function() {\n\n            $document.off(this.ens);\n\n            this.$input.off(this.ens);\n\n            this.$el.off(this.ens)\n                .removeClass(this.options.resultsOpenedClass)\n                .removeClass(this.options.loadingClass);\n\n            if (this.$resultsCont) {\n\n                this.$resultsCont.remove();\n                delete this.$resultsCont;\n\n            }\n\n            delete this.$el.data().fastsearch;\n\n        }\n\n    });\n\n    $.extend(Fastsearch, {\n\n        pickTo: function(dest, src, keys) {\n\n            $.each(keys, function(i, key) {\n                dest[key] = (src && src[key]) || dest[key];\n            });\n\n            return dest;\n\n        },\n\n        selectorFromClass: function(classes) {\n\n            return '.' + classes.replace(/\\s/g, '.');\n\n        }\n\n    });\n\n    Fastsearch.defaults = {\n        wrapSelector: 'form', // Fastsearch container defaults to closest form. Provide selector for something other.\n        url: null, // Plugin will get data from data-url propery, url option or container action attribute.\n        responseType: 'JSON', // Default expected server response type - can be set to html if that is what server returns.\n        preventSubmit: false, // Prevent submit of form with enter keypress.\n\n        resultsContClass: 'fs_results', // Html classes.\n        resultsOpenedClass: 'fsr_opened',\n        resultsFlippedClass: 'fsr_flipped',\n        groupClass: 'fs_group',\n        itemClass: 'fs_result_item',\n        groupTitleClass: 'fs_group_title',\n        loadingClass: 'loading',\n        noResultsClass: 'fs_no_results',\n        focusedItemClass: 'focused',\n\n        typeTimeout: 140, // Try not to hammer server with request for each keystroke if possible.\n        minQueryLength: 2, // Minimal number of characters needed for plugin to send request to server.\n\n        template: null, // Provide your template function if you need one - function(data, fastsearchApi).\n        mouseEvents: !('ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0), // Detect if client is touch enabled so plugin can decide if mouse specific events should be set..\n        focusFirstItem: false,\n        flipOnBottom: false,\n\n        responseFormat: { // Adjust where plugin looks for data in your JSON server response.\n            url: 'url',\n            html: 'html',\n            label: 'label',\n            groupCaption: 'caption',\n            groupItems: 'items'\n        },\n\n        fillInputId: true, // On item select plugin will try to write selected id from item data model to input.\n        inputIdName: null, // On item select plugin will try to write selected id from item data model to input with this name.\n\n        apiInputName: null, // By default plugin will post input name as query parameter - you can provide custom one here.\n\n        noResultsText: 'No results found',\n        onItemSelect: 'follow', // By default plugin follows selected link - other options available are \"fillInput\" and custom callback - function($item, model, fastsearchApi).\n\n        parseResponse: null, // Parse server response with your handler and return processed data - function(response, fastsearchApi).\n        onResultsCreate: null, // Adjust results element - function($allResults, data, fastsearchApi).\n        onGroupCreate: null, // Adjust group element when created - function($group, groupModel, fastsearchApi).\n        onItemCreate: null // Adjust item element when created - function($item, model, fastsearchApi).\n    };\n\n    $.fastsearch = Fastsearch;\n\n    $.fn.fastsearch = function(options) {\n        let obj = null;\n        this.each(function() {\n            if (!$.data(this, 'fastsearch')) {\n                obj = new Fastsearch(this, options);\n                $.data(this, 'fastsearch', obj);\n            } else {\n                obj = $.data(this, 'fastsearch');\n            }\n        });\n        return obj;\n    };\n\n    return $;\n\n}));\n"],"file":"fastsearch.min.js"}