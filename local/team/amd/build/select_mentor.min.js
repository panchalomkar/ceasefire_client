define(["jquery","core/ajax","core/templates"],function(e,n,t){return{processResults:function(n,t){var a=[];return e.each(t,function(e,n){a.push({value:n.id,label:n._label})}),a},transport:function(a,r,i,u){var o=e(a).data("capability");void 0===o&&(o=""),n.call([{methodname:"local_team_search_users",args:{query:r,capability:o}}])[0].then(function(n){var a=[],r=0;return e.each(n.users,function(n,r){var i=r,u=[];e.each(["idnumber","email","phone1","phone2","department","institution"],function(e,n){void 0!==r[n]&&""!==r[n]&&(i.hasidentity=!0,u.push(r[n]))}),i.identity=u.join(", "),a.push(t.render("local_team/form-user-selector-suggestion",i))}),e.when.apply(e.when,a).then(function(){var t=arguments;e.each(n.users,function(e,n){n._label=t[r],r++}),i(n.users)})},u)}}});