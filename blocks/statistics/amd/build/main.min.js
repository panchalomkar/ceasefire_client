define(["jquery","block_statistics/chart"],function(e,r){return r.pluginService.register({beforeDraw:function(t,e){if(t.config.options.elements.center){var o=t.chart.ctx,i=(h=t.config.options.elements.center).fontStyle||"Roboto",n=h.text,r=h.color||"#67747b",a=(h.sidePadding||20)/100*(2*t.innerRadius);o.font="30px "+i;var l=o.measureText(n).width,d=(2*t.innerRadius-a)/l,s=Math.floor(30*d),c=2*t.innerRadius;Math.min(s,c);o.textAlign="center",o.textBaseline="middle";var f=(t.chartArea.left+t.chartArea.right)/2,x=(t.chartArea.top+t.chartArea.bottom)/2;o.font="30px "+i,o.fillStyle="#67747b",o.fillText(n,f,x)}if(t.config.options.elements.secondaryTxt){o=t.chart.ctx,i=(h=t.config.options.elements.secondaryTxt).fontStyle||"Roboto";var p=(g=(n=h.text).split(" "))[1]+" "+g[2];r=h.color||"#768c94",a=(h.sidePadding||20)/100*(2*t.innerRadius);o.font="11px "+i;l=o.measureText(n).width,d=(2*t.innerRadius-a)/l,s=Math.floor(30*d),c=2*t.innerRadius,Math.min(s,c);o.textAlign="center",o.textBaseline="middle";f=(t.chartArea.left+t.chartArea.right)/1.6,x=(t.chartArea.top+t.chartArea.bottom)/1.45;o.font="12px"+i,o.fillStyle=r,""==n?o.fillText(n,f,x):o.fillText(p,f,x)}if(t.config.options.elements.threeTxt){var h,g;o=t.chart.ctx,i=(h=t.config.options.elements.threeTxt).fontStyle||"Roboto",p=(g=(n=h.text).split(" "))[0],r=h.color||"#575757",a=(h.sidePadding||20)/100*(2*t.innerRadius);o.font="bold 12px "+i;l=o.measureText(n).width,d=(2*t.innerRadius-a)/l,s=Math.floor(30*d),c=2*t.innerRadius,Math.min(s,c);o.textAlign="center",o.textBaseline="middle";f=(t.chartArea.left+t.chartArea.right)/3,x=(t.chartArea.top+t.chartArea.bottom)/1.45;o.font="12px"+i,o.fillStyle=r,o.fillText(p,f,x)}},afterDraw:function(t,e){t.canvas.parentNode.style.height="126px",t.canvas.parentNode.style.width="126px",t.options.title.fontSize=13,t.update()}}),{init:function(t){e.each(t,function(t,e){var o=document.getElementById(t).getContext("2d"),i=o.createLinearGradient(500,0,100,0);i.addColorStop(0,e.fromcolor),i.addColorStop(1,e.tocolor);var n=0;e.inverse&&(n=e.inverse);new r(o,{type:"doughnut",data:{labels:[e.title],datasets:[{label:e.title,data:[e.value,n],backgroundColor:[i,"#c1c1c1"],borderColor:[i,"#c1c1c1"],borderWidth:1}]},axis:{display:!1},options:{tooltips:{enabled:!1},layout:{padding:{left:1,right:1,top:1,bottom:1}},hover:{mode:null},title:{text:[e.title,e.type],display:!1,position:"bottom",fontSize:13,fontWeight:"bold"},elements:{center:{text:e.showednumber,color:e.txtColor,fontStyle:"Roboto",sidePadding:e.padding,fontSize:12},secondaryTxt:{text:e.description,color:e.txtColor,fontStyle:"Roboto",sidePadding:20,fontSize:12},threeTxt:{text:e.description,color:e.txtColor,fontStyle:"Roboto",sidePadding:20,fontSize:12}},cutoutPercentage:95,scales:{yAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!1}}],xAxes:[{gridLines:{drawBorder:!1,display:!1},ticks:{display:!1}}]},legend:{display:!1}}})})}}});