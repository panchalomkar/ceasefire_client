define(["jquery","core/ajax","core/chartjs"],function(e,t){var a=null,o={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,percentageInnerCutout:50,animationSteps:100,animateRotate:!0,animateScale:!1,responsive:!0,maintainAspectRatio:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>',tooltipTemplate:"<%=value %> <%=label%> users",legend:{display:!1}};function l(){var l=e("#coursecategorylistblock option:selected").data("id");t.call([{methodname:"block_remuiblck_get_enrolled_users_by_category",args:{categoryid:l}}])[0].done(function(t){if(null===t)e("canvas#pieChartblock").hide(),e(".enroll-stats-nouserserror").hide(),e(".chart-legend").hide(),e(".enroll-stats-error").show();else{e(".enroll-stats-error").hide(),e(".enroll-stats-nouserserror").hide(),e(".chart-legend").show(),e("canvas#pieChartblock").show(),e("#enrolled_users_stats_block .chart-legend").empty();var l=["#2196f3","#00bcd4","#009688","#4caf50","#8bc34a","#ffeb3b","#ff9800","#f44336","#9c27b0","#673ab7","#3f51b5"];e.each(t.labels,function(a,o){e("#enrolled_users_stats_block .chart-legend").append('<li class="list-group-item p-0 pt-1">'+o+': <span class="badge badge-round" style="background-color:'+l[a]+';">'+t.data[a]+"</span></li>")}),function(t){null!==a&&a.destroy();var l=e("#pieChartblock").get(0).getContext("2d"),s={labels:t.labels,datasets:[{data:t.data,backgroundColor:t.background_color,hoverBackgroundColor:t.hoverBackground_color}]};a=new Chart(l,{type:"doughnut",data:s,options:o})}(t)}}).fail(function(t){e("canvas#pieChartblock").hide(),e(".enroll-stats-error").show()})}e("#enrolled_users_stats_block select").length&&(e("#enrolled_users_stats_block select#coursecategorylistblock").on("change",function(){l()}),l())});
//# sourceMappingURL=userstats.min.js.map
