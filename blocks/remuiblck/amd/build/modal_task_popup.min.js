define(["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","block_remuiblck/events"],function(t,e,i,n,o,a){var s=!1,r='[data-action="save"]',d='[data-action="delete"]',l='[data-action="cancel"]',c='[name="subject"]',g='[name="summary"]',u='[name="due[day]"]',v='[name="due[month]"]',f='[name="due[year]"]',m='[name="visible"]',h='[name="notify"]',b='[name="userlist[]"]',p=function(t){n.call(this,t),this.getFooter().find(r).length||e.exception({message:M.util.get_string("nosavebutton","block_remuiblck")})};return p.TYPE="block_remuiblck-task",(p.prototype=Object.create(n.prototype)).constructor=p,p.prototype.registerEventListeners=function(){n.prototype.registerEventListeners.call(this);let t=this;this.getModal().on(i.events.activate,r,function(e,i){t.getModal().trigger(a.TASK_SAVE)}.bind(this)),this.getModal().on(i.events.activate,d,function(e,i){t.getModal().trigger(a.TASK_DELETE)}.bind(this)),this.getModal().on(i.events.activate,l,function(e,i){t.getModal().trigger(a.TASK_CANCEL)}.bind(this))},p.prototype.valid_settings=function(){let t=!0;return t=""!=this.getModal().find(c).val(),this.getModal().find(c)[0].dispatchEvent(new CustomEvent("blur")),t},p.prototype.get_task_settings=function(){return{subject:this.getModal().find(c).val(),summary:this.getModal().find(g).val(),timedue:function(t){let e=t.find(f).val();return e+="-"+t.find(v).val(),e+="-"+t.find(u).val(),e+=" 23:59:59",new Date(e).getTime()/1e3}(this.getModal()),visible:this.getModal().find(m).is(":checked"),notify:this.getModal().find(h).is(":checked"),users:this.getModal().find(b).val()}},p.prototype.saving=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];let e=this.getModal().find(r);if(1==t)return e.text(M.util.get_string("saving","core_repository")).attr("disabled","disabled"),void e.attr("disabled",!0);e.attr("disabled",!1),e.text(M.util.get_string("save","core_repository")).removeAttr("disabled")},s||(o.register(p.TYPE,p,"block_remuiblck/modal_task_popup"),s=!0),p});
//# sourceMappingURL=modal_task_popup.min.js.map
