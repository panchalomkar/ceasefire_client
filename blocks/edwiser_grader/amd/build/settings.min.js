"use strict";define(["jquery","core/ajax","core/templates"],function(e,s,t){return{init:function(){var n=[],i=[];e("#edg-ausers-select option").each(function(){var s=e(this).val(),t=e(this).text();n.push({id:s,email:t})}),e("#edg-lusers-select option").each(function(){var s=e(this).val(),t=e(this).text();i.push({id:s,email:t})}),e("#edg-ausers-select").on("change",function(){e(".edg-add-user-btn").removeAttr("disabled")}),e("#edg-lusers-select").on("change",function(){e(".edg-remove-user-btn").removeAttr("disabled")}),e(".edg-ausers-input").on("input",function(){var s=e(this).val(),t=n.filter(function(e){return e.email.toLowerCase().includes(s.toLowerCase(),0)});e("#edg-ausers-select").html(""),t.forEach(function(s,t){e("#edg-ausers-select").append('<option value="'.concat(s.id,'">').concat(s.email,"</option>"))})}),e(".edg-lusers-input").on("input",function(){var s=e(this).val(),t=i.filter(function(e){return e.email.toLowerCase().includes(s.toLowerCase(),0)});e("#edg-lusers-select").html(""),t.forEach(function(s,t){e("#edg-lusers-select").append('<option value="'.concat(s.id,'">').concat(s.email,"</option>"))})});var r=M.cfg.wwwroot.replace(/(^\w+:|^)\/\//,"");e("#edg-lsites-box").val(r),e("#edg-lsites-box").change(function(){e(".edg-lusers-skel").show(),e(".edg-lusers-name").hide();var n=e("option:selected",this).val();n!==r?(e(".edg-ausers").hide(),e(".edg-user-actions").attr("style","display:none !important"),e(".edg-site-alert").show()):(e(".edg-site-alert").hide(),e(".edg-ausers").show(),e(".edg-user-actions").attr("style","display:flex !important")),s.call([{methodname:"block_edwiser_grader_get_licensed_users",args:{selectedsite:n}}])[0].done(function(s){t.render("block_edwiser_grader/licensedusers",s).then(function(s,n){t.replaceNode(e("#edg-lusers-select"),s,n),e(".edg-lusers-name").show(),e(".edg-lusers-skel").hide()})})})}}});