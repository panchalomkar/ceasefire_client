{"version":3,"sources":["html2canvas.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","window","document","exports","global","define","undefined","r","a","b","n","l","A","s","t","p","q","g","TypeError","m","u","L","c","then","d","v","error","e","f","call","J","K","M","x","length","C","D","this","k","h","y","i","o","O","N","E","Array","isArray","Object","toString","B","w","MutationObserver","WebKitMutationObserver","Uint8ClampedArray","importScripts","MessageChannel","process","nextTick","createTextNode","observe","characterData","data","port1","onmessage","port2","postMessage","H","setTimeout","Error","j","resolve","all","race","reject","arguments","catch","z","Promise","polyfill","self","amd","module","ES6Promise","create","createElement","getContext","root","freeExports","nodeType","freeModule","freeGlobal","punycode","key","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","overflow","not-basic","invalid-input","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","type","RangeError","map","array","fn","result","mapDomain","string","parts","split","join","ucs2decode","value","extra","output","counter","charCodeAt","push","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","decode","input","out","basic","index","oldi","baseMinusT","codePoint","inputLength","bias","lastIndexOf","splice","encode","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","version","ucs2","toASCII","test","toUnicode","slice","toLowerCase","hasOwnProperty","html2canvasNodeAttribute","html2canvasCanvasCloneAttribute","html2canvasCanvasCloneIndex","html2canvasCloneIndex","html2canvas","nodeList","options","url","link","logging","start","Date","now","async","allowTaint","removeContainer","javascriptEnabled","imageTimeout","renderer","CanvasRenderer","strict","proxy","width","innerWidth","height","innerHeight","loadUrlDocument","href","container","renderWindow","contentWindow","documentElement","node","setAttribute","windowWidth","windowHeight","html2canvasIndex","createWindowClone","defaultView","pageXOffset","pageYOffset","log","attributeName","selector","querySelector","removeAttribute","clonedWindow","oncloneHandler","onclone","renderDocument","ownerDocument","canvas","onrendered","Color","darken","amount","round","isTransparent","isBlack","fromArray","min","_hex3","hex3","match","parseInt","_hex6","hex6","substring","_rgb","rgb","Number","_rgba","rgba","namedColor","color","colors","isColor","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","FontMetrics","getMetrics","family","size","Font","FrameContainer","proxyLoad","bounds","src","GradientContainer","TYPES","LINEAR","RADIAL","ImageLoader","findImages","nodes","images","reduce","imageNodes","nodeName","concat","args","method","forEach","addImage","loadImage","findBackgroundImage","parseBackgroundImages","filter","hasImageBackground","callback","newImage","image","imageExists","imageData","isSVG","support","svg","ImageContainer","replace","isSameOrigin","cors","useCORS","ProxyImageContainer","DummyImageContainer","SVGContainer","LinearGradientContainer","WebkitGradientContainer","SVGNodeContainer","isInline","some","getOrigin","origin","protocol","hostname","port","getPromise","timeout","promise","get","found","img","fetch","bind","ready","timer","res","clearTimeout","stepRegExp","NodeContainer","cloneTo","stack","visible","borders","clip","backgroundClip","computedStyles","styles","backgroundImages","opacity","getOpacity","cssFloat","assignStack","children","isElementVisible","Node","TEXT_NODE","parent","css","hasAttribute","getAttribute","attribute","isPseudoElement","computedStyle","before","prefixedCss","prefix","substr","toUpperCase","getComputedStyle","cssInt","isNaN","parseFloat","fontWeight","weight","parseClip","matches","CLIP","top","right","bottom","left","parseBackgrounds","cssList","property","trim","parseBackgroundSize","isPercentage","targetRatio","currentRatio","parseBackgroundPosition","backgroundSize","position","parseBackgroundRepeat","parseTextShadows","textShadow","results","shadows","TEXT_SHADOW_PROPERTY","TEXT_SHADOW_VALUES","offsetX","offsetY","blur","parseTransform","transformData","hasTransform","offset","parseBounds","removePx","asFloat","matrix","parseTransformMatrix","transformMatrix","transform","parseMatrix","MATRIX_PROPERTY","offsetBounds","getBounds","getValue","option","tagName","selectedIndex","text","placeholder","NodeParser","calculateOverflowClips","isElement","appendToDOM","parseBorders","cssClip","indexOf","hasParentClip","cleanDOM","isTextNode","asyncRenderer","queue","asyncTimer","paint","renderIndex","createPseudoHideStyles","createStyles","PseudoElementContainer","PSEUDO_HIDE_ELEMENT_CLASS_BEFORE","PSEUDO_HIDE_ELEMENT_CLASS_AFTER","disableAnimations","hidePseudoElements","innerHTML","body","appendChild","getPseudoElements","ELEMENT_NODE","getPseudoElement","after","flatten","style","content","display","first","stripQuotes","isImage","pseudoNode","pseudoContainer","item","className","TextContainer","getChildren","parentContainer","childNodes","renderableNode","nonIgnoredElement","newStackingContext","hasOwnStacking","StackingContext","getParentStack","contexts","createStackingContexts","isRootElement","hasOpacity","isPositionedForStacking","isBodyWithTransparentRoot","isPositioned","zIndex0","isInlineBlock","isFloating","sortStackingContexts","sort","parseTextBounds","textList","rangeBounds","getRangeBounds","replacementNode","splitText","getWrapperBounds","wrapper","parentNode","backupText","cloneNode","replaceChild","range","createRange","setStart","setEnd","getBoundingClientRect","parse","negativeZindex","negativeZIndex","descendantElements","descendantNonFloats","not","nonInlineNonPositionedDescendants","inlineLevel","nonPositionedFloats","inFlow","stackLevel0","hasText","positiveZindex","positiveZIndex","renderQueue","isStackingContext","ClearTransform","ctx","restore","paintText","paintNode","setOpacity","save","setTransform","paintCheckbox","paintRadio","paintElement","renderBackground","getWidth","renderBorders","imgContainer","renderImage","imageContainer","paintFormValue","radius","borderPoints","calculateCurvePoints","rectangle","calculateBorders","checked","font","circleStroke","circle","ceil","message","textContent","firstChild","removeChild","applyTextTransform","characters","letterRendering","noLetterSpacing","character","word","words","onWordBoundary","characterCode","getWords","fontShadow","clearShadow","renderTextDecoration","fontMetrics","metrics","baseline","lineWidth","middle","borderColorTransforms","inset","nodeBounds","side","arr","asInt","getBorderRadiusData","colorTransform","parseBackgroundClip","borderArgs","parseCorner","topLeftInner","topRightInner","bottomRightInner","bottomLeftInner","topLeftOuter","topRightOuter","bottomRightOuter","bottomLeftOuter","proxyCount","supportsCORS","XMLHttpRequest","supportsCORSImage","Image","insertBefore","getHideClass","Renderer","borderData","paddingLeft","paddingTop","paddingRight","paddingBottom","drawImage","renderBackgroundColor","renderBackgroundImage","renderBorder","drawShape","reverse","backgroundImage","renderBackgroundRepeating","gradientImage","renderBackgroundGradient","backgroundRepeatShape","renderBackgroundRepeat","context","parentStack","ownStacking","Support","testRangeBounds","testElement","selectNode","testCORS","crossOrigin","testSVG","toDataURL","hasFabric","fabric","inlineFormatting","decode64","removeContentType","createCanvas","objects","StaticCanvas","lowerCanvasEl","setWidth","setHeight","add","util","groupSVGElements","renderAll","str","atob","capitalize","setFillStyle","fillStyle","fillRect","beginPath","arc","PI","closePath","fill","stroke","strokeColor","strokeStyle","shape","taints","tainted","taintCtx","getImageData","sx","sy","sw","sh","dx","dy","dw","dh","shapes","hasEntries","point","rect","apply","variant","setVariable","globalAlpha","translate","variables","fillText","backgroundPosition","borderLeft","borderTop","createPattern","resizeImage","gradient","createLinearGradient","x0","y0","x1","y1","colorStops","colorStop","addColorStop","stop","doc","imageLoader","max","scrollWidth","offsetWidth","clientWidth","scrollHeight","offsetHeight","clientHeight","documentHeight","crop","cleanupContainer","croppedCanvas","x2","y2","containerDocument","querySelectorAll","labelCanvasElements","documentMode","cloneNodeIE9","clone","nodeValue","child","nextSibling","visibility","border","scrolling","documentClone","cloneNodeValues","onload","interval","setInterval","clonedCanvas","putImageData","cloneCanvasContents","clearInterval","scrollTo","open","write","restoreOwnerScroll","adoptNode","removeScriptNodes","isElementNode","close","originalNodes","getElementsByTagName","clonedNodes","count","Proxy","documentFromHTML","html","parser","DOMParser","parseFromString","implementation","createHTMLDocument","ee","host","head","onerror","complete","span","fontFamily","fontSize","margin","padding","verticalAlign","offsetTop","lineHeight","sameOrigin","URL","location","hasDirection","colorStopMatch","find","console","Function","definition","prefix_i","block","quote","mode","numParen","appendResult","clientRect","offsetParent","offsetLeft","element","background","canvasBackground","visibile","borderSide","bx","by","bw","bh","drawSide","c1","c2","c3","c4","getCurvePoints","r1","r2","kappa","sqrt","ox","oy","xm","ym","topLeft","bezierCurve","topRight","bottomRight","bottomLeft","borderRadius","tlh","tlv","trh","trv","brh","brv","blh","blv","topWidth","rightHeight","bottomWidth","leftHeight","subdivide","startControl","endControl","end","lerp","ab","bc","cd","abbc","bccd","dest","curveTo","curveToReversed","radius1","radius2","outer1","inner1","outer2","inner2","corner1","corner2","nodeContainer","arrays","proxyUrl","createCallback","createProxyUrl","XHR","jsonp","response","ProxyURL","cleanup","random","encodeURIComponent","loadSVGFromString","base64","encoded2","encoded3","encoded4","byte1","byte2","byte3","chars","len","_native","XMLSerializer","serializeToString","parseSVGDocument","p1","p2","xhr","status","responseText","statusText","send","textBaseline"],"mappings":"AAAA,aAEA,SAASA,QAAQC,GAAmV,OAAtOD,QAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAAiBF,GAAO,cAAcA,GAA2B,SAAiBA,GAAO,OAAOA,GAAyB,mBAAXC,QAAyBD,EAAIG,cAAgBF,QAAUD,IAAQC,OAAOG,UAAY,gBAAkBJ,IAAyBA,IAQnX,SAAWK,EAAQC,EAAUC,EAASC,EAAQC,EAAQC,GAmVpD,GA3UA,WACE,SAASC,EAAEC,EAAGC,GACZC,EAAEC,GAAKH,EACPE,EAAEC,EAAI,GAAKF,EAEX,KADAE,GAAK,IACMC,IAGb,SAASC,EAAEL,GACT,MAAO,mBAAsBA,EAmC/B,SAASM,IACP,IAAK,IAAIN,EAAI,EAAGA,EAAIG,EAAGH,GAAK,GAC1B,EAAIE,EAAEF,IAAIE,EAAEF,EAAI,IAAKE,EAAEF,QAAK,EAAQE,EAAEF,EAAI,QAAK,EAGjDG,EAAI,EAGN,SAASI,KA8BT,SAASC,EAAER,EAAGC,GACZ,GAAID,IAAMC,EAAGQ,EAAET,EAAG,IAAIU,UAAU,kDAAkD,GAAI,mBAAsBT,GAAK,WAAad,QAAQc,IAAM,OAASA,EACnJ,GAAIA,EAAEV,cAAgBS,EAAET,aAV5B,SAAWS,EAAGC,GACZ,IAAMA,EAAED,EAAIW,EAAEX,EAAGC,EAAEA,GAAK,IAAMD,EAAEA,EAAIS,EAAET,EAAGC,EAAEA,GAAKW,EAAEX,OAAG,EAAQ,SAAUA,GACrEO,EAAER,EAAGC,IACJ,SAAUA,GACXQ,EAAET,EAAGC,KAMgCY,CAAEb,EAAGC,OAAQ,CAChD,IAAIa,EAEJ,IACEA,EAAIb,EAAEc,KACN,MAAOC,GACPC,EAAEC,MAAQF,EAAGF,EAAIG,EAGnBH,IAAMG,EAAIR,EAAET,EAAGiB,EAAEC,YAAS,IAAWJ,EAAIH,EAAEX,EAAGC,GAAKI,EAAES,GA/B3D,SAAWd,EAAGC,EAAGa,GACff,EAAE,SAAUC,GACV,IAAImB,GAAI,EACJC,EAXR,SAAWpB,EAAGC,EAAGa,EAAGE,GAClB,IACEhB,EAAEqB,KAAKpB,EAAGa,EAAGE,GACb,MAAOG,GACP,OAAOA,GAOCG,CAAER,EAAGb,EAAG,SAAUa,GACxBK,IAAMA,GAAI,EAAIlB,IAAMa,EAAIN,EAAER,EAAGc,GAAKH,EAAEX,EAAGc,KACtC,SAAUb,GACXkB,IAAMA,GAAI,EAAIV,EAAET,EAAGC,OAEpBkB,GAAKC,IAAMD,GAAI,EAAIV,EAAET,EAAGoB,KACxBpB,GAsB2DuB,CAAEvB,EAAGC,EAAGa,GAAKH,EAAEX,EAAGC,QAEzEU,EAAEX,EAAGC,GAGd,SAASuB,EAAExB,GACTA,EAAEoB,GAAKpB,EAAEoB,EAAEpB,EAAEC,GACbwB,EAAEzB,GAGJ,SAASW,EAAEX,EAAGC,QACZ,IAAWD,EAAEA,IAAMA,EAAEC,EAAIA,EAAGD,EAAEA,EAAI,EAAG,IAAMA,EAAEmB,EAAEO,QAAU3B,EAAE0B,EAAGzB,IAGhE,SAASS,EAAET,EAAGC,QACZ,IAAWD,EAAEA,IAAMA,EAAEA,EAAI,EAAGA,EAAEC,EAAIA,EAAGF,EAAEyB,EAAGxB,IAG5C,SAASY,EAAEZ,EAAGC,EAAGa,EAAGE,GAClB,IAAIG,EAAInB,EAAEmB,EACNC,EAAID,EAAEO,OACV1B,EAAEoB,EAAI,KACND,EAAEC,GAAKnB,EACPkB,EAAEC,EAAI,GAAKN,EACXK,EAAEC,EAAI,GAAKJ,EACX,IAAMI,GAAKpB,EAAEA,GAAKD,EAAE0B,EAAGzB,GAGzB,SAASyB,EAAEzB,GACT,IAAIC,EAAID,EAAEmB,EACNL,EAAId,EAAEA,EAEV,GAAI,IAAMC,EAAEyB,OAAQ,CAClB,IAAK,IAAIV,EAAGG,EAAGC,EAAIpB,EAAEC,EAAGQ,EAAI,EAAGA,EAAIR,EAAEyB,OAAQjB,GAAK,EAChDO,EAAIf,EAAEQ,GAAIU,EAAIlB,EAAEQ,EAAIK,GAAIE,EAAIW,EAAEb,EAAGE,EAAGG,EAAGC,GAAKD,EAAEC,GAGhDpB,EAAEmB,EAAEO,OAAS,GAIjB,SAASE,IACPC,KAAKX,MAAQ,KAGf,SAASS,EAAE3B,EAAGC,EAAGa,EAAGE,GAClB,IACII,EACAU,EACAC,EACA5B,EAJAgB,EAAId,EAAES,GAMV,GAAIK,EAAG,CACL,IACEC,EAAIN,EAAEE,GACN,MAAOd,GACP8B,EAAEd,MAAQhB,EAAGkB,EAAIY,EAKnB,GAFAZ,IAAMY,GAAK7B,GAAI,EAAI2B,EAAIV,EAAEF,MAAOE,EAAI,MAAQW,GAAI,EAE5C9B,IAAMmB,EAER,YADAX,EAAER,EAAG,IAAIS,UAAU,8DAGhBU,EAAIJ,EAAGe,GAAI,OAElB,IAAW9B,EAAED,IAAMmB,GAAKY,EAAIvB,EAAEP,EAAGmB,GAAKjB,EAAIM,EAAER,EAAG6B,GAAK,IAAM9B,EAAIW,EAAEV,EAAGmB,GAAK,IAAMpB,GAAKS,EAAER,EAAGmB,IAe1F,SAASU,EAAE9B,EAAGC,EAAGa,EAAGE,GAClBa,KAAK3B,EAAIF,EACT6B,KAAKf,EAAI,IAAId,EAAEO,EAAGS,GAClBa,KAAKI,EAAInB,EACTe,KAAKK,EAAEjC,IAAM4B,KAAKlB,EAAIV,EAAG4B,KAAKb,EAAIa,KAAKH,OAASzB,EAAEyB,OAAQG,KAAK1B,IAAK,IAAM0B,KAAKH,OAASf,EAAEkB,KAAKf,EAAGe,KAAK5B,IAAM4B,KAAKH,OAASG,KAAKH,QAAU,EAAGG,KAAKC,IAAK,IAAMD,KAAKb,GAAKL,EAAEkB,KAAKf,EAAGe,KAAK5B,KAAOQ,EAAEoB,KAAKf,EAAGe,KAAKtB,KAG9M,SAASwB,EAAE/B,GAKT,GAJAmC,EACAN,KAAK5B,EAAI4B,KAAK7B,OAAI,EAClB6B,KAAKV,EAAI,GAELZ,IAAMP,EAAG,CACX,IAAKK,EAAEL,GAAI,MAAM,IAAIU,UAAU,sFAC/B,KAAMmB,gBAAgBE,GAAI,MAAM,IAAIrB,UAAU,0HA1BlD,SAAWV,EAAGC,GACZ,IACEA,EAAE,SAAUA,GACVO,EAAER,EAAGC,IACJ,SAAUA,GACXQ,EAAET,EAAGC,KAEP,MAAOa,GACPL,EAAET,EAAGc,IAmBLsB,CAAEP,KAAM7B,IAIZ,IAQII,EAvLEJ,EACAC,EACAa,EA6KFuB,EAAIC,MAAMC,QAAUD,MAAMC,QAAU,SAAUvC,GAChD,MAAO,mBAAqBwC,OAAOhD,UAAUiD,SAASpB,KAAKrB,IAEzDG,EAAI,EAEJuC,GADAC,OAAI,IAAuBlD,EAASA,EAAS,IACvCmD,kBAAoBD,EAAEE,uBAC5BF,EAAI,oBAAuBG,mBAAqB,oBAAuBC,eAAiB,oBAAuBC,eAC/G9C,EAAIoC,MAAM,KAEdlC,EAAI,oBAAuB6C,SAAW,qBAAuB,GAAGR,SAASpB,KAAK4B,SA9LrE,WACLA,QAAQC,SAAS5C,IA6L0EoC,GAxLzF1C,EAAI,EACJC,EAAI,IAAIyC,EAAEpC,GACVQ,EAAIpB,EAASyD,eAAe,IAChClD,EAAEmD,QAAQtC,EAAG,CACXuC,eAAe,IAEV,WACLvC,EAAEwC,KAAOtD,IAAMA,EAAI,IAiLkF2C,EA7KzG,WACE,IAAI3C,EAAI,IAAIgD,eAEZ,OADAhD,EAAEuD,MAAMC,UAAYlD,EACb,WACLN,EAAEyD,MAAMC,YAAY,IAyKqFC,GApKpG,WACLC,WAAWtD,EAAG,IAoKlB,IAAIW,EAAI,IAAIW,EACRI,EAAI,IAAIJ,EAEZE,EAAEtC,UAAU0C,EAAI,SAAUlC,GACxB,OAAOqC,EAAErC,IAGX8B,EAAEtC,UAAUe,EAAI,WACd,OAAOsD,MAAM,4CAGf/B,EAAEtC,UAAUW,EAAI,WACd0B,KAAK5B,EAAIqC,MAAMT,KAAKH,SAGtBI,EAAEtC,UAAUsC,EAAI,WACd,IAAK,IAAI9B,EAAI6B,KAAKH,OAAQzB,EAAI4B,KAAKf,EAAGA,EAAIe,KAAKlB,EAAGK,EAAI,OAAG,IAAWf,EAAED,GAAKgB,EAAIhB,EAAGgB,IAChFa,KAAKiC,EAAEhD,EAAEE,GAAIA,IAIjBc,EAAEtC,UAAUsE,EAAI,SAAU9D,EAAGC,GAC3B,IAAIa,EAAIe,KAAK3B,EACb,WAAaf,QAAQa,IAAM,OAASA,EAAIA,EAAET,cAAgBuB,QAAK,IAAWd,EAAEA,GAAKA,EAAEoB,EAAI,KAAMS,KAAKpB,EAAET,EAAEA,EAAGC,EAAGD,EAAEC,IAAM4B,KAAKrB,EAAEM,EAAEiD,QAAQ/D,GAAIC,IAAM4B,KAAKb,IAAKa,KAAK5B,EAAEA,GAAK4B,KAAKE,EAAE/B,KAG9K8B,EAAEtC,UAAUiB,EAAI,SAAUT,EAAGC,EAAGa,GAC9B,IAAIE,EAAIa,KAAKf,OACb,IAAWE,EAAEhB,IAAM6B,KAAKb,IAAKa,KAAKI,GAAK,IAAMjC,EAAIS,EAAEO,EAAGF,GAAKe,KAAK5B,EAAEA,GAAK4B,KAAKE,EAAEjB,IAC9E,IAAMe,KAAKb,GAAKL,EAAEK,EAAGa,KAAK5B,IAG5B6B,EAAEtC,UAAUuC,EAAI,SAAU/B,GACxB,OAAOA,GAGT8B,EAAEtC,UAAUgB,EAAI,SAAUR,EAAGC,GAC3B,IAAIa,EAAIe,KACRjB,EAAEZ,OAAG,EAAQ,SAAUA,GACrBc,EAAEL,EAAE,EAAGR,EAAGD,IACT,SAAUA,GACXc,EAAEL,EAAE,EAAGR,EAAGD,MAMd+B,EAAEiC,IAAM,SAAUhE,EAAGC,GACnB,OAAO,IAAI6B,EAAED,KAAM7B,GAAG,EAAIC,GAAGa,GAG/BiB,EAAEkC,KAAO,SAAUjE,EAAGC,GACpB,SAASa,EAAEd,GACTQ,EAAEW,EAAGnB,GAGP,SAASgB,EAAEhB,GACTS,EAAEU,EAAGnB,GAGP,IAAImB,EAAI,IAAIU,KAAKtB,EAAGN,GACpB,IAAKoC,EAAErC,GAAI,OAAOS,EAAEU,EAAG,IAAIT,UAAU,oCAAqCS,EAE1E,IAAK,IAAIC,EAAIpB,EAAE0B,OAAQK,EAAI,OAAG,IAAWZ,EAAEnB,GAAK+B,EAAIX,EAAGW,IACrDnB,EAAEiB,KAAKkC,QAAQ/D,EAAE+B,SAAK,EAAQjB,EAAGE,GAGnC,OAAOG,GAGTY,EAAEgC,QAAU,SAAU/D,EAAGC,GACvB,GAAID,GAAK,WAAab,QAAQa,IAAMA,EAAET,cAAgBsC,KAAM,OAAO7B,EACnE,IAAIc,EAAI,IAAIe,KAAKtB,EAAGN,GAEpB,OADAO,EAAEM,EAAGd,GACEc,GAGTiB,EAAEmC,OAAS,SAAUlE,EAAGC,GACtB,IAAIa,EAAI,IAAIe,KAAKtB,EAAGN,GAEpB,OADAQ,EAAEK,EAAGd,GACEc,GAGTiB,EAAEvC,UAAY,CACZD,YAAawC,EACbhB,KAAM,SAAcf,EAAGC,GACrB,IAAIa,EAAIe,KAAK7B,EACb,GAAI,IAAMc,IAAMd,GAAK,IAAMc,IAAMb,EAAG,OAAO4B,KAC3C,IAAIb,EAAI,IAAIa,KAAKtC,YAAYgB,GACzBY,EAAIU,KAAK5B,EAEb,GAAIa,EAAG,CACL,IAAIM,EAAI+C,UAAUrD,EAAI,GACtBf,EAAE,WACA4B,EAAEb,EAAGE,EAAGI,EAAGD,UAERP,EAAEiB,KAAMb,EAAGhB,EAAGC,GAErB,OAAOe,GAEToD,MAAS,SAAgBpE,GACvB,OAAO6B,KAAKd,KAAK,KAAMf,KAG3B,IAAIqE,EAAI,CACNC,QAASvC,EACTwC,SAAU,WACR,IAAIvE,EAGEC,EADN,YADAD,OAAI,IAAuBJ,EAASA,OAAS,IAAuBH,GAAUA,EAAOC,SAAWD,EAAS+E,OACvF,YAAaxE,EAAEsE,SAAW,WAAYtE,EAAEsE,SAAW,QAAStE,EAAEsE,SAAW,SAAUtE,EAAEsE,UAErG,IAAItE,EAAEsE,QAAQ,SAAUtE,GACtBC,EAAID,IAECK,EAAEJ,MACHD,EAAEsE,QAAUvC,KAGxB,mBAAsBlC,GAAUA,EAAO4E,IAAM5E,EAAO,WAClD,OAAOwE,IACJ,oBAAuBK,QAAUA,OAAO/E,QAAU+E,OAAO/E,QAAU0E,OAAI,IAAuBxC,OAASA,KAAK8C,WAAaN,IAC7HhD,KAAK5B,GAEJA,GACFA,EAAOkF,WAAWJ,gBAGI,IAAb7E,GAAqD,mBAAlB8C,OAAOoC,QAAgF,mBAAhDlF,EAASmF,cAAc,UAAUC,WAAtH,EAYA,SAAWC,GAET,IAAIC,EAAkC,UAApB7F,QAAQQ,IAAwBA,IAAYA,EAAQsF,UAAYtF,EAC9EuF,EAAgF,WAAhD,oBAAXR,OAAyB,YAAcvF,QAAQuF,UAAwBA,SAAWA,OAAOO,UAAYP,OAC1HS,EAAgC,UAAnBhG,QAAQS,IAAuBA,EAE5CuF,EAAWvF,SAAWuF,GAAcA,EAAW1F,SAAW0F,GAAcA,EAAWX,OAASW,IAC9FJ,EAAOI,GAST,IAAIC,EAsCJC,EAnCAC,EAAS,WAITC,EAAO,GACHC,EAAO,EACPC,EAAO,GACPC,EAAO,GACPC,EAAO,IACPC,EAAc,GACdC,EAAW,IAEfC,EAAY,IAIZC,EAAgB,QACZC,EAAgB,eAEpBC,EAAkB,4BAIlBC,EAAS,CACPC,SAAY,kDACZC,YAAa,iDACbC,gBAAiB,iBAInBC,EAAgBf,EAAOC,EACnBe,EAAQC,KAAKD,MACbE,EAAqBC,OAAOC,aAahC,SAASzF,EAAM0F,GACb,MAAMC,WAAWX,EAAOU,IAY1B,SAASE,EAAIC,EAAOC,GAIlB,IAHA,IAAItF,EAASqF,EAAMrF,OACfuF,EAAS,GAENvF,KACLuF,EAAOvF,GAAUsF,EAAGD,EAAMrF,IAG5B,OAAOuF,EAcT,SAASC,EAAUC,EAAQH,GACzB,IAAII,EAAQD,EAAOE,MAAM,KACrBJ,EAAS,GAWb,OATIG,EAAM1F,OAAS,IAGjBuF,EAASG,EAAM,GAAK,IACpBD,EAASC,EAAM,IAKVH,EADOH,EADDK,EAAOE,MAAMpB,GACAe,GAAIM,KAAK,KAkBrC,SAASC,EAAWJ,GAOlB,IANA,IAGIK,EACAC,EAJAC,EAAS,GACTC,EAAU,EACVjG,EAASyF,EAAOzF,OAIbiG,EAAUjG,IACf8F,EAAQL,EAAOS,WAAWD,OAEb,OAAUH,GAAS,OAAUG,EAAUjG,EAI1B,QAAX,OAFb+F,EAAQN,EAAOS,WAAWD,OAIxBD,EAAOG,OAAe,KAARL,IAAkB,KAAe,KAARC,GAAiB,QAIxDC,EAAOG,KAAKL,GACZG,KAGFD,EAAOG,KAAKL,GAIhB,OAAOE,EAYT,SAASI,EAAWf,GAClB,OAAOD,EAAIC,EAAO,SAAUS,GAC1B,IAAIE,EAAS,GASb,OAPIF,EAAQ,QAEVE,GAAUjB,GADVe,GAAS,SAC8B,GAAK,KAAQ,OACpDA,EAAQ,MAAiB,KAARA,GAGnBE,GAAUjB,EAAmBe,KAE5BF,KAAK,IAyCV,SAASS,EAAaC,EAAOC,GAG3B,OAAOD,EAAQ,GAAK,IAAMA,EAAQ,MAAgB,GAARC,IAAc,GAS1D,SAASC,EAAMC,EAAOC,EAAWC,GAC/B,IAAIvG,EAAI,EAIR,IAHAqG,EAAQE,EAAY9B,EAAM4B,EAAQxC,GAAQwC,GAAS,EACnDA,GAAS5B,EAAM4B,EAAQC,GAIvBD,EAAQ7B,EAAgBb,GAAQ,EAAG3D,GAAKyD,EACtC4C,EAAQ5B,EAAM4B,EAAQ7B,GAGxB,OAAOC,EAAMzE,GAAKwE,EAAgB,GAAK6B,GAASA,EAAQzC,IAW1D,SAAS4C,EAAOC,GAEd,IAEIC,EAIAC,EACA3E,EACA4E,EACAC,EACAhG,EACAb,EACAkG,EACA1H,EAGJsI,EAhFoBC,EAgEhBnB,EAAS,GACToB,EAAcP,EAAM7G,OAEpBO,EAAI,EACJ/B,EAAI2F,EACJkD,EAAOnD,EAqBX,KANA6C,EAAQF,EAAMS,YAAYlD,IAEd,IACV2C,EAAQ,GAGL3E,EAAI,EAAGA,EAAI2E,IAAS3E,EAEnByE,EAAMX,WAAW9D,IAAM,KACzB5C,EAAM,aAGRwG,EAAOG,KAAKU,EAAMX,WAAW9D,IAK/B,IAAK4E,EAAQD,EAAQ,EAAIA,EAAQ,EAAI,EAAGC,EAAQI,GAEhD,CAME,IAAKH,EAAO1G,EAAGU,EAAI,EAAGb,EAAIyD,EAGpBmD,GAASI,GACX5H,EAAM,mBAGR8G,GApHgBa,EAoHKN,EAAMX,WAAWc,MAnH1B,GAAK,GACZG,EAAY,GAGjBA,EAAY,GAAK,GACZA,EAAY,GAGjBA,EAAY,GAAK,GACZA,EAAY,GAGdtD,IAyGUA,GAAQyC,EAAQzB,GAAOjB,EAASrD,GAAKU,KAChDzB,EAAM,YAGRe,GAAK+F,EAAQrF,IAGTqF,GAFJ1H,EAAIwB,GAAKiH,EAAOvD,EAAO1D,GAAKiH,EAAOtD,EAAOA,EAAO3D,EAAIiH,IAZvDjH,GAAKyD,EAoBC5C,EAAI4D,EAAMjB,GAFdsD,EAAarD,EAAOjF,KAGlBY,EAAM,YAGRyB,GAAKiG,EAIPG,EAAOb,EAAMjG,EAAI0G,EADjBH,EAAMd,EAAOhG,OAAS,EACc,GAARiH,GAGxBpC,EAAMtE,EAAIuG,GAAOlD,EAASpF,GAC5BgB,EAAM,YAGRhB,GAAKqG,EAAMtE,EAAIuG,GACfvG,GAAKuG,EAELd,EAAOuB,OAAOhH,IAAK,EAAG/B,GAGxB,OAAO4H,EAAWJ,GAWpB,SAASwB,EAAOX,GACd,IAAIrI,EACAiI,EACAgB,EACAC,EACAL,EACAjF,EACAnD,EACAH,EACAsB,EACAxB,EACA+I,EAIJP,EAGAQ,EACIV,EACAW,EARA7B,EAAS,GAkBb,IANAoB,GAFAP,EAAQhB,EAAWgB,IAEC7G,OAEpBxB,EAAI2F,EACJsC,EAAQ,EACRY,EAAOnD,EAEF9B,EAAI,EAAGA,EAAIgF,IAAehF,GAC7BuF,EAAed,EAAMzE,IAEF,KACjB4D,EAAOG,KAAKpB,EAAmB4C,IAanC,IATAF,EAAiBC,EAAc1B,EAAOhG,OAIlC0H,GACF1B,EAAOG,KAAK/B,GAIPqD,EAAiBL,GAAa,CAGnC,IAAKnI,EAAI2E,EAAQxB,EAAI,EAAGA,EAAIgF,IAAehF,GACzCuF,EAAed,EAAMzE,KAED5D,GAAKmJ,EAAe1I,IACtCA,EAAI0I,GAeR,IAPI1I,EAAIT,EAAIqG,GAAOjB,EAAS6C,IAF5BmB,EAAwBH,EAAiB,KAGvCjI,EAAM,YAGRiH,IAAUxH,EAAIT,GAAKoJ,EACnBpJ,EAAIS,EAECmD,EAAI,EAAGA,EAAIgF,IAAehF,EAO7B,IANAuF,EAAed,EAAMzE,IAEF5D,KAAOiI,EAAQ7C,GAChCpE,EAAM,YAGJmI,GAAgBnJ,EAAG,CAErB,IAAKM,EAAI2H,EAAOrG,EAAIyD,IAKd/E,GAFJF,EAAIwB,GAAKiH,EAAOvD,EAAO1D,GAAKiH,EAAOtD,EAAOA,EAAO3D,EAAIiH,IADvDjH,GAAKyD,EAOHgE,EAAU/I,EAAIF,EACdsI,EAAarD,EAAOjF,EACpBoH,EAAOG,KAAKpB,EAAmBsB,EAAazH,EAAIiJ,EAAUX,EAAY,KACtEpI,EAAI+F,EAAMgD,EAAUX,GAGtBlB,EAAOG,KAAKpB,EAAmBsB,EAAavH,EAAG,KAC/CuI,EAAOb,EAAMC,EAAOmB,EAAuBH,GAAkBC,GAC7DjB,EAAQ,IACNgB,IAIJhB,IACAjI,EAGJ,OAAOwH,EAAOJ,KAAK,IAuErB,GA5BAlC,EAAW,CAMToE,QAAW,QASXC,KAAQ,CACNnB,OAAUf,EACV2B,OAAUpB,GAEZQ,OAAUA,EACVY,OAAUA,EACVQ,QA/BF,SAAiBnB,GACf,OAAOrB,EAAUqB,EAAO,SAAUpB,GAChC,OAAOnB,EAAc2D,KAAKxC,GAAU,OAAS+B,EAAO/B,GAAUA,KA8BhEyC,UAlDF,SAAmBrB,GACjB,OAAOrB,EAAUqB,EAAO,SAAUpB,GAChC,OAAOpB,EAAc4D,KAAKxC,GAAUmB,EAAOnB,EAAO0C,MAAM,GAAGC,eAAiB3C,MAsD3D,mBAAVtH,GAA+C,UAAvBV,QAAQU,EAAO4E,MAAoB5E,EAAO4E,IAC3E5E,EAAO,WAAY,WACjB,OAAOuF,SAEJ,GAAIJ,GAAeE,EACxB,GAAIR,OAAO/E,SAAWqF,EAEpBE,EAAWvF,QAAUyF,OAGrB,IAAKC,KAAOD,EACVA,EAAS2E,eAAe1E,KAASL,EAAYK,GAAOD,EAASC,SAKjEN,EAAKK,SAAWA,EApiBpB,CAsiBGvD,MAEH,IAAImI,EAA2B,wBAC3BC,EAAkC,gCAClCC,EAA8B,EAC9BC,EAAwB,EAE5B1K,EAAO2K,YAAc,SAAUC,EAAUC,GACvC,IAoSmBC,EACfC,EArSA9B,EAAQyB,IAgBZ,IAfAG,EAAUA,GAAW,IAETG,UACVhL,EAAO2K,YAAYK,SAAU,EAC7BhL,EAAO2K,YAAYM,MAAQC,KAAKC,OAGlCN,EAAQO,WAAiC,IAAlBP,EAAQO,OAA+BP,EAAQO,MACtEP,EAAQQ,gBAA2C,IAAvBR,EAAQQ,YAAqCR,EAAQQ,WACjFR,EAAQS,qBAAqD,IAA5BT,EAAQS,iBAAyCT,EAAQS,gBAC1FT,EAAQU,uBAAyD,IAA9BV,EAAQU,mBAA4CV,EAAQU,kBAC/FV,EAAQW,kBAA+C,IAAzBX,EAAQW,aAA+B,IAAQX,EAAQW,aACrFX,EAAQY,SAAuC,mBAArBZ,EAAQY,SAA0BZ,EAAQY,SAAWC,GAC/Eb,EAAQc,SAAWd,EAAQc,OAEH,iBAAbf,EAAuB,CAChC,GAA6B,iBAAlBC,EAAQe,MACjB,OAAO/G,QAAQJ,OAAO,yCAGxB,IAAIoH,EAAyB,MAAjBhB,EAAQgB,MAAgBhB,EAAQgB,MAAQ7L,EAAO8L,WACvDC,EAA2B,MAAlBlB,EAAQkB,OAAiBlB,EAAQkB,OAAS/L,EAAOgM,YAC9D,OAAOC,GA6QUnB,EA7QkBF,EA8QjCG,EAAO9K,EAASmF,cAAc,KAClC2F,EAAKmB,KAAOpB,EACZC,EAAKmB,KAAOnB,EAAKmB,KACVnB,GAjRyCF,EAAQe,MAAO3L,EAAU4L,EAAOE,EAAQlB,GAASvJ,KAAK,SAAU6K,GAC5G,OAAOC,EAAaD,EAAUE,cAAcpM,SAASqM,gBAAiBH,EAAWtB,EAASgB,EAAOE,KAIrG,IAAIQ,GAAQ3B,IAAavK,EAAY,CAACJ,EAASqM,iBAAmB1B,EAAS3I,OAAS2I,EAAW,CAACA,IAAW,GAE3G,OADA2B,EAAKC,aAAajC,EAA2BtB,EAAOA,GActD,SAAwBhJ,EAAU4K,EAAS4B,EAAaC,EAAcC,GACpE,OAAOC,EAAkB3M,EAAUA,EAAUwM,EAAaC,EAAc7B,EAAS5K,EAAS4M,YAAYC,YAAa7M,EAAS4M,YAAYE,aAAazL,KAAK,SAAU6K,GAClKa,EAAI,mBACJ,IAAIC,EAAgB1C,EAA2BoC,EAC3CO,EAAW,IAAMD,EAAgB,KAAON,EAAmB,KAC/D1M,EAASkN,cAAcD,GAAUE,gBAAgBH,GACjD,IAAII,EAAelB,EAAUE,cACzBE,EAAOc,EAAapN,SAASkN,cAAcD,GAC3CI,EAA4C,mBAApBzC,EAAQ0C,QAAyB1I,QAAQP,QAAQuG,EAAQ0C,QAAQF,EAAapN,WAAa4E,QAAQP,SAAQ,GACvI,OAAOgJ,EAAehM,KAAK,WACzB,OAAO8K,EAAaG,EAAMJ,EAAWtB,EAAS4B,EAAaC,OAvBxDc,CAAejB,EAAKkB,cAAe5C,EAAS0B,EAAKkB,cAAcZ,YAAYf,WAAYS,EAAKkB,cAAcZ,YAAYb,YAAa/C,GAAO3H,KAAK,SAAUoM,GAM9J,MALkC,mBAAvB7C,EAAQ8C,aACjBX,EAAI,yFACJnC,EAAQ8C,WAAWD,IAGdA,KAIX1N,EAAO2K,YAAYhF,SAAWvD,KAAKuD,SACnC3F,EAAO2K,YAAYiB,MAAQ,GA2Q3BgC,EAAM7N,UAAU8N,OAAS,SAAUC,GACjC,IAAIvN,EAAI,EAAIuN,EACZ,OAAO,IAAIF,EAAM,CAAC7G,KAAKgH,MAAM3L,KAAK9B,EAAIC,GAAIwG,KAAKgH,MAAM3L,KAAKpB,EAAIT,GAAIwG,KAAKgH,MAAM3L,KAAK5B,EAAID,GAAI6B,KAAK7B,KAGjGqN,EAAM7N,UAAUiO,cAAgB,WAC9B,OAAkB,IAAX5L,KAAK7B,GAGdqN,EAAM7N,UAAUkO,QAAU,WACxB,OAAkB,IAAX7L,KAAK9B,GAAsB,IAAX8B,KAAKpB,GAAsB,IAAXoB,KAAK5B,GAG9CoN,EAAM7N,UAAUmO,UAAY,SAAU5G,GAWpC,OAVIzE,MAAMC,QAAQwE,KAChBlF,KAAK9B,EAAIyG,KAAKoH,IAAI7G,EAAM,GAAI,KAC5BlF,KAAKpB,EAAI+F,KAAKoH,IAAI7G,EAAM,GAAI,KAC5BlF,KAAK5B,EAAIuG,KAAKoH,IAAI7G,EAAM,GAAI,KAExBA,EAAMrF,OAAS,IACjBG,KAAK7B,EAAI+G,EAAM,KAIZzE,MAAMC,QAAQwE,IAGvB,IAAI8G,EAAQ,oBAEZR,EAAM7N,UAAUsO,KAAO,SAAUtG,GAC/B,IAAIuG,EAQJ,OANqC,QAAhCA,EAAQvG,EAAMuG,MAAMF,MACvBhM,KAAK9B,EAAIiO,SAASD,EAAM,GAAG,GAAKA,EAAM,GAAG,GAAI,IAC7ClM,KAAKpB,EAAIuN,SAASD,EAAM,GAAG,GAAKA,EAAM,GAAG,GAAI,IAC7ClM,KAAK5B,EAAI+N,SAASD,EAAM,GAAG,GAAKA,EAAM,GAAG,GAAI,KAG9B,OAAVA,GAGT,IAAIE,EAAQ,oBAEZZ,EAAM7N,UAAU0O,KAAO,SAAU1G,GAC/B,IAAIuG,EAAQ,KAQZ,OANqC,QAAhCA,EAAQvG,EAAMuG,MAAME,MACvBpM,KAAK9B,EAAIiO,SAASD,EAAM,GAAGI,UAAU,EAAG,GAAI,IAC5CtM,KAAKpB,EAAIuN,SAASD,EAAM,GAAGI,UAAU,EAAG,GAAI,IAC5CtM,KAAK5B,EAAI+N,SAASD,EAAM,GAAGI,UAAU,EAAG,GAAI,KAG7B,OAAVJ,GAGT,IAAIK,EAAO,iDAEXf,EAAM7N,UAAU6O,IAAM,SAAU7G,GAC9B,IAAIuG,EAQJ,OANoC,QAA/BA,EAAQvG,EAAMuG,MAAMK,MACvBvM,KAAK9B,EAAIuO,OAAOP,EAAM,IACtBlM,KAAKpB,EAAI6N,OAAOP,EAAM,IACtBlM,KAAK5B,EAAIqO,OAAOP,EAAM,KAGP,OAAVA,GAGT,IAAIQ,EAAQ,kEAEZlB,EAAM7N,UAAUgP,KAAO,SAAUhH,GAC/B,IAAIuG,EASJ,OAPqC,QAAhCA,EAAQvG,EAAMuG,MAAMQ,MACvB1M,KAAK9B,EAAIuO,OAAOP,EAAM,IACtBlM,KAAKpB,EAAI6N,OAAOP,EAAM,IACtBlM,KAAK5B,EAAIqO,OAAOP,EAAM,IACtBlM,KAAK7B,EAAIsO,OAAOP,EAAM,KAGP,OAAVA,GAGTV,EAAM7N,UAAUiD,SAAW,WACzB,OAAkB,OAAXZ,KAAK7B,GAAyB,IAAX6B,KAAK7B,EAAU,QAAU,CAAC6B,KAAK9B,EAAG8B,KAAKpB,EAAGoB,KAAK5B,EAAG4B,KAAK7B,GAAGsH,KAAK,KAAO,IAAM,OAAS,CAACzF,KAAK9B,EAAG8B,KAAKpB,EAAGoB,KAAK5B,GAAGqH,KAAK,KAAO,KAGtJ+F,EAAM7N,UAAUiP,WAAa,SAAUjH,GACrC,IAAIkH,EAAQC,EAAOnH,EAAMsC,eAEzB,GAAI4E,EACF7M,KAAK9B,EAAI2O,EAAM,GACf7M,KAAKpB,EAAIiO,EAAM,GACf7M,KAAK5B,EAAIyO,EAAM,QACV,GAA4B,gBAAxBlH,EAAMsC,cAEf,OADAjI,KAAK9B,EAAI8B,KAAKpB,EAAIoB,KAAK5B,EAAI4B,KAAK7B,EAAI,GAC7B,EAGT,QAAS0O,GAGXrB,EAAM7N,UAAUoP,SAAU,EAE1B,IAAID,EAAS,CACXE,UAAa,CAAC,IAAK,IAAK,KACxBC,aAAgB,CAAC,IAAK,IAAK,KAC3BC,KAAQ,CAAC,EAAG,IAAK,KACjBC,WAAc,CAAC,IAAK,IAAK,KACzBC,MAAS,CAAC,IAAK,IAAK,KACpBC,MAAS,CAAC,IAAK,IAAK,KACpBC,OAAU,CAAC,IAAK,IAAK,KACrBC,MAAS,CAAC,EAAG,EAAG,GAChBC,eAAkB,CAAC,IAAK,IAAK,KAC7BC,KAAQ,CAAC,EAAG,EAAG,KACfC,WAAc,CAAC,IAAK,GAAI,KACxBC,MAAS,CAAC,IAAK,GAAI,IACnBC,UAAa,CAAC,IAAK,IAAK,KACxBC,UAAa,CAAC,GAAI,IAAK,KACvBC,WAAc,CAAC,IAAK,IAAK,GACzBC,UAAa,CAAC,IAAK,IAAK,IACxBC,MAAS,CAAC,IAAK,IAAK,IACpBC,eAAkB,CAAC,IAAK,IAAK,KAC7BC,SAAY,CAAC,IAAK,IAAK,KACvBC,QAAW,CAAC,IAAK,GAAI,IACrBC,KAAQ,CAAC,EAAG,IAAK,KACjBC,SAAY,CAAC,EAAG,EAAG,KACnBC,SAAY,CAAC,EAAG,IAAK,KACrBC,cAAiB,CAAC,IAAK,IAAK,IAC5BC,SAAY,CAAC,IAAK,IAAK,KACvBC,UAAa,CAAC,EAAG,IAAK,GACtBC,SAAY,CAAC,IAAK,IAAK,KACvBC,UAAa,CAAC,IAAK,IAAK,KACxBC,YAAe,CAAC,IAAK,EAAG,KACxBC,eAAkB,CAAC,GAAI,IAAK,IAC5BC,WAAc,CAAC,IAAK,IAAK,GACzBC,WAAc,CAAC,IAAK,GAAI,KACxBC,QAAW,CAAC,IAAK,EAAG,GACpBC,WAAc,CAAC,IAAK,IAAK,KACzBC,aAAgB,CAAC,IAAK,IAAK,KAC3BC,cAAiB,CAAC,GAAI,GAAI,KAC1BC,cAAiB,CAAC,GAAI,GAAI,IAC1BC,cAAiB,CAAC,GAAI,GAAI,IAC1BC,cAAiB,CAAC,EAAG,IAAK,KAC1BC,WAAc,CAAC,IAAK,EAAG,KACvBC,SAAY,CAAC,IAAK,GAAI,KACtBC,YAAe,CAAC,EAAG,IAAK,KACxBC,QAAW,CAAC,IAAK,IAAK,KACtBC,QAAW,CAAC,IAAK,IAAK,KACtBC,WAAc,CAAC,GAAI,IAAK,KACxBC,UAAa,CAAC,IAAK,GAAI,IACvBC,YAAe,CAAC,IAAK,IAAK,KAC1BC,YAAe,CAAC,GAAI,IAAK,IACzBC,QAAW,CAAC,IAAK,EAAG,KACpBC,UAAa,CAAC,IAAK,IAAK,KACxBC,WAAc,CAAC,IAAK,IAAK,KACzBC,KAAQ,CAAC,IAAK,IAAK,GACnBC,UAAa,CAAC,IAAK,IAAK,IACxBC,KAAQ,CAAC,IAAK,IAAK,KACnBC,MAAS,CAAC,EAAG,IAAK,GAClBC,YAAe,CAAC,IAAK,IAAK,IAC1BC,KAAQ,CAAC,IAAK,IAAK,KACnBC,SAAY,CAAC,IAAK,IAAK,KACvBC,QAAW,CAAC,IAAK,IAAK,KACtBC,UAAa,CAAC,IAAK,GAAI,IACvBC,OAAU,CAAC,GAAI,EAAG,KAClBC,MAAS,CAAC,IAAK,IAAK,KACpBC,MAAS,CAAC,IAAK,IAAK,KACpBC,SAAY,CAAC,IAAK,IAAK,KACvBC,cAAiB,CAAC,IAAK,IAAK,KAC5BC,UAAa,CAAC,IAAK,IAAK,GACxBC,aAAgB,CAAC,IAAK,IAAK,KAC3BC,UAAa,CAAC,IAAK,IAAK,KACxBC,WAAc,CAAC,IAAK,IAAK,KACzBC,UAAa,CAAC,IAAK,IAAK,KACxBC,qBAAwB,CAAC,IAAK,IAAK,KACnCC,UAAa,CAAC,IAAK,IAAK,KACxBC,WAAc,CAAC,IAAK,IAAK,KACzBC,UAAa,CAAC,IAAK,IAAK,KACxBC,UAAa,CAAC,IAAK,IAAK,KACxBC,YAAe,CAAC,IAAK,IAAK,KAC1BC,cAAiB,CAAC,GAAI,IAAK,KAC3BC,aAAgB,CAAC,IAAK,IAAK,KAC3BC,eAAkB,CAAC,IAAK,IAAK,KAC7BC,eAAkB,CAAC,IAAK,IAAK,KAC7BC,eAAkB,CAAC,IAAK,IAAK,KAC7BC,YAAe,CAAC,IAAK,IAAK,KAC1BC,KAAQ,CAAC,EAAG,IAAK,GACjBC,UAAa,CAAC,GAAI,IAAK,IACvBC,MAAS,CAAC,IAAK,IAAK,KACpBC,QAAW,CAAC,IAAK,EAAG,KACpBC,OAAU,CAAC,IAAK,EAAG,GACnBC,iBAAoB,CAAC,IAAK,IAAK,KAC/BC,WAAc,CAAC,EAAG,EAAG,KACrBC,aAAgB,CAAC,IAAK,GAAI,KAC1BC,aAAgB,CAAC,IAAK,IAAK,KAC3BC,eAAkB,CAAC,GAAI,IAAK,KAC5BC,gBAAmB,CAAC,IAAK,IAAK,KAC9BC,kBAAqB,CAAC,EAAG,IAAK,KAC9BC,gBAAmB,CAAC,GAAI,IAAK,KAC7BC,gBAAmB,CAAC,IAAK,GAAI,KAC7BC,aAAgB,CAAC,GAAI,GAAI,KACzBC,UAAa,CAAC,IAAK,IAAK,KACxBC,UAAa,CAAC,IAAK,IAAK,KACxBC,SAAY,CAAC,IAAK,IAAK,KACvBC,YAAe,CAAC,IAAK,IAAK,KAC1BC,KAAQ,CAAC,EAAG,EAAG,KACfC,QAAW,CAAC,IAAK,IAAK,KACtBC,MAAS,CAAC,IAAK,IAAK,GACpBC,UAAa,CAAC,IAAK,IAAK,IACxBC,OAAU,CAAC,IAAK,IAAK,GACrBC,UAAa,CAAC,IAAK,GAAI,GACvBC,OAAU,CAAC,IAAK,IAAK,KACrBC,cAAiB,CAAC,IAAK,IAAK,KAC5BC,UAAa,CAAC,IAAK,IAAK,KACxBC,cAAiB,CAAC,IAAK,IAAK,KAC5BC,cAAiB,CAAC,IAAK,IAAK,KAC5BC,WAAc,CAAC,IAAK,IAAK,KACzBC,UAAa,CAAC,IAAK,IAAK,KACxBC,KAAQ,CAAC,IAAK,IAAK,IACnBC,KAAQ,CAAC,IAAK,IAAK,KACnBC,KAAQ,CAAC,IAAK,IAAK,KACnBC,WAAc,CAAC,IAAK,IAAK,KACzBC,OAAU,CAAC,IAAK,EAAG,KACnBC,cAAiB,CAAC,IAAK,GAAI,KAC3BC,IAAO,CAAC,IAAK,EAAG,GAChBC,UAAa,CAAC,IAAK,IAAK,KACxBC,UAAa,CAAC,GAAI,IAAK,KACvBC,YAAe,CAAC,IAAK,GAAI,IACzBC,OAAU,CAAC,IAAK,IAAK,KACrBC,WAAc,CAAC,IAAK,IAAK,IACzBC,SAAY,CAAC,GAAI,IAAK,IACtBC,SAAY,CAAC,IAAK,IAAK,KACvBC,OAAU,CAAC,IAAK,GAAI,IACpBC,OAAU,CAAC,IAAK,IAAK,KACrBC,QAAW,CAAC,IAAK,IAAK,KACtBC,UAAa,CAAC,IAAK,GAAI,KACvBC,UAAa,CAAC,IAAK,IAAK,KACxBC,UAAa,CAAC,IAAK,IAAK,KACxBC,KAAQ,CAAC,IAAK,IAAK,KACnBC,YAAe,CAAC,EAAG,IAAK,KACxBC,UAAa,CAAC,GAAI,IAAK,KACvBC,IAAO,CAAC,IAAK,IAAK,KAClBC,KAAQ,CAAC,EAAG,IAAK,KACjBC,QAAW,CAAC,IAAK,IAAK,KACtBC,OAAU,CAAC,IAAK,GAAI,IACpBC,UAAa,CAAC,GAAI,IAAK,KACvBC,OAAU,CAAC,IAAK,IAAK,KACrBC,MAAS,CAAC,IAAK,IAAK,KACpBC,MAAS,CAAC,IAAK,IAAK,KACpBC,WAAc,CAAC,IAAK,IAAK,KACzBC,OAAU,CAAC,IAAK,IAAK,GACrBC,YAAe,CAAC,IAAK,IAAK,KAiE5BC,EAAYzY,UAAU0Y,WAAa,SAAUC,EAAQC,GAKnD,OAJIvW,KAAKyB,KAAK6U,EAAS,IAAMC,KAAUtY,IACrC+B,KAAKyB,KAAK6U,EAAS,IAAMC,GAAQ,IAAIC,EAAKF,EAAQC,IAG7CvW,KAAKyB,KAAK6U,EAAS,IAAMC,IAgClCE,EAAe9Y,UAAU+Y,UAAY,SAAUlN,EAAOmN,EAAQlO,GAC5D,IAAIsB,EAAY/J,KAAK4W,IACrB,OAAO/M,EAAgBE,EAAU6M,IAAKpN,EAAOO,EAAUsB,cAAesL,EAAOlN,MAAOkN,EAAOhN,OAAQlB,IAcrGoO,EAAkBlZ,UAAUmZ,MAAQ,CAClCC,OAAQ,EACRC,OAAQ,GA+BVC,EAAYtZ,UAAUuZ,WAAa,SAAUC,GAC3C,IAAIC,EAAS,GAmBb,OAlBAD,EAAME,OAAO,SAAUC,EAAYvN,GACjC,OAAQA,EAAUI,KAAKoN,UACrB,IAAK,MACH,OAAOD,EAAWE,OAAO,CAAC,CACxBC,KAAM,CAAC1N,EAAUI,KAAKyM,KACtBc,OAAQ,SAGZ,IAAK,MACL,IAAK,SACH,OAAOJ,EAAWE,OAAO,CAAC,CACxBC,KAAM,CAAC1N,EAAUI,MACjBuN,OAAQ3N,EAAUI,KAAKoN,YAI7B,OAAOD,GACN,IAAIK,QAAQ3X,KAAK4X,SAASR,EAAQpX,KAAK6X,WAAY7X,MAC/CoX,GAGTH,EAAYtZ,UAAUma,oBAAsB,SAAUV,EAAQrN,GAE5D,OADAA,EAAUgO,wBAAwBC,OAAOhY,KAAKiY,oBAAoBN,QAAQ3X,KAAK4X,SAASR,EAAQpX,KAAK6X,WAAY7X,MAC1GoX,GAGTH,EAAYtZ,UAAUia,SAAW,SAAUR,EAAQc,GACjD,OAAO,SAAUC,GACfA,EAASV,KAAKE,QAAQ,SAAUS,GACzBpY,KAAKqY,YAAYjB,EAAQgB,KAC5BhB,EAAOhQ,OAAO,EAAG,EAAG8Q,EAAS1Y,KAAKQ,KAAMmY,IACxCvN,EAAI,gBAAkBwM,EAAOvX,OAAyB,iBAAVuY,EAAqBA,EAAM9L,UAAU,EAAG,KAAO8L,KAE5FpY,QAIPiX,EAAYtZ,UAAUsa,mBAAqB,SAAUK,GACnD,MAA4B,SAArBA,EAAUZ,QAGnBT,EAAYtZ,UAAUka,UAAY,SAAUS,GAC1C,GAAyB,QAArBA,EAAUZ,OAAkB,CAC9B,IAAId,EAAM0B,EAAUb,KAAK,GAEzB,OAAIzX,KAAKuY,MAAM3B,IAAS5W,KAAKwY,QAAQC,KAAQzY,KAAKyI,QAAQQ,WAE/C2N,EAAI1K,MAAM,2BACZ,IAAIwM,EAAe9B,EAAI+B,QAAQ,8BAA+B,KAAK,GACjE3Y,KAAK4Y,aAAahC,KAAoC,IAA5B5W,KAAKyI,QAAQQ,YAAuBjJ,KAAKuY,MAAM3B,GAC3E,IAAI8B,EAAe9B,GAAK,GACtB5W,KAAKwY,QAAQK,OAAS7Y,KAAKyI,QAAQQ,YAAcjJ,KAAKyI,QAAQqQ,QAChE,IAAIJ,EAAe9B,GAAK,GACtB5W,KAAKyI,QAAQe,MACf,IAAIuP,GAAoBnC,EAAK5W,KAAKyI,QAAQe,OAE1C,IAAIwP,EAAoBpC,GAVxB,IAAIqC,GAAarC,GAYrB,MAAyB,oBAArB0B,EAAUZ,OACZ,IAAIwB,EAAwBZ,GACL,aAArBA,EAAUZ,OACZ,IAAIyB,GAAwBb,GACL,QAArBA,EAAUZ,OACZ,IAAI0B,GAAiBd,EAAUb,KAAK,GAAIzX,KAAKwY,QAAQC,KAC9B,WAArBH,EAAUZ,OACZ,IAAIjB,EAAe6B,EAAUb,KAAK,GAAIzX,KAAK4Y,aAAaN,EAAUb,KAAK,GAAGb,KAAM5W,KAAKyI,SAErF,IAAIuQ,EAAoBV,IAInCrB,EAAYtZ,UAAU4a,MAAQ,SAAU3B,GACtC,MAAuD,QAAhDA,EAAItK,UAAUsK,EAAI/W,OAAS,GAAGoI,eAA2BgR,GAAatb,UAAU0b,SAASzC,IAGlGK,EAAYtZ,UAAU0a,YAAc,SAAUjB,EAAQR,GACpD,OAAOQ,EAAOkC,KAAK,SAAUlB,GAC3B,OAAOA,EAAMxB,MAAQA,KAIzBK,EAAYtZ,UAAUib,aAAe,SAAUlQ,GAC7C,OAAO1I,KAAKuZ,UAAU7Q,KAAS1I,KAAKwZ,QAGtCvC,EAAYtZ,UAAU4b,UAAY,SAAU7Q,GAC1C,IAAIC,EAAO3I,KAAK2I,OAAS3I,KAAK2I,KAAO9K,EAASmF,cAAc,MAI5D,OAHA2F,EAAKmB,KAAOpB,EACZC,EAAKmB,KAAOnB,EAAKmB,KAEVnB,EAAK8Q,SAAW9Q,EAAK+Q,SAAW/Q,EAAKgR,MAG9C1C,EAAYtZ,UAAUic,WAAa,SAAU7P,GAC3C,OAAO/J,KAAK6Z,QAAQ9P,EAAW/J,KAAKyI,QAAQW,cAAqB,MAAE,WAEjE,OADY,IAAI4P,EAAoBjP,EAAU6M,KACjCkD,QAAQ5a,KAAK,SAAUkZ,GAClCrO,EAAUqO,MAAQA,OAKxBnB,EAAYtZ,UAAUoc,IAAM,SAAUnD,GACpC,IAAIoD,EAAQ,KACZ,OAAOha,KAAKoX,OAAOkC,KAAK,SAAUW,GAChC,OAAQD,EAAQC,GAAKrD,MAAQA,IAC1BoD,EAAQ,MAGf/C,EAAYtZ,UAAUuc,MAAQ,SAAU/C,GAWtC,OAVAnX,KAAKoX,OAASD,EAAME,OAAO8C,GAAKna,KAAK8X,oBAAqB9X,MAAOA,KAAKkX,WAAWC,IACjFnX,KAAKoX,OAAOO,QAAQ,SAAUS,EAAOvR,GACnCuR,EAAM0B,QAAQ5a,KAAK,WACjB0L,EAAI,8BAAgC/D,EAAQ,GAAIuR,IAC/C,SAAU9Y,GACXsL,EAAI,0BAA4B/D,EAAQ,GAAIuR,EAAO9Y,OAGvDU,KAAKoa,MAAQ3X,QAAQN,IAAInC,KAAKoX,OAAOnS,IAAIjF,KAAK4Z,WAAY5Z,OAC1D4K,EAAI,6BACG5K,MAGTiX,EAAYtZ,UAAUkc,QAAU,SAAU9P,EAAW8P,GACnD,IAAIQ,EACAP,EAAUrX,QAAQL,KAAK,CAAC2H,EAAU+P,QAAS,IAAIrX,QAAQ,SAAU6X,EAAKjY,GACxEgY,EAAQtY,WAAW,WACjB6I,EAAI,0BAA2Bb,GAC/B1H,EAAO0H,IACN8P,OACA3a,KAAK,SAAU6K,GAElB,OADAwQ,aAAaF,GACNtQ,IAKT,OAHA+P,EAAe,MAAE,WACfS,aAAaF,KAERP,GA4ETZ,EAAwBvb,UAAYgD,OAAOoC,OAAO8T,EAAkBlZ,WACpEub,EAAwBvb,UAAU6c,WAAa,oFA4B/CC,EAAc9c,UAAU+c,QAAU,SAAUC,GAC1CA,EAAMC,QAAU5a,KAAK4a,QACrBD,EAAME,QAAU7a,KAAK6a,QACrBF,EAAMhE,OAAS3W,KAAK2W,OACpBgE,EAAMG,KAAO9a,KAAK8a,KAClBH,EAAMI,eAAiB/a,KAAK+a,eAC5BJ,EAAMK,eAAiBhb,KAAKgb,eAC5BL,EAAMM,OAASjb,KAAKib,OACpBN,EAAMO,iBAAmBlb,KAAKkb,iBAC9BP,EAAMQ,QAAUnb,KAAKmb,SAGvBV,EAAc9c,UAAUyd,WAAa,WACnC,OAAwB,OAAjBpb,KAAKmb,QAAmBnb,KAAKmb,QAAUnb,KAAKqb,SAAS,WAAarb,KAAKmb,SAGhFV,EAAc9c,UAAU2d,YAAc,SAAUX,GAC9C3a,KAAK2a,MAAQA,EACbA,EAAMY,SAASvV,KAAKhG,OAGtBya,EAAc9c,UAAU6d,iBAAmB,WACzC,OAAOxb,KAAKmK,KAAK/G,WAAaqY,KAAKC,UAAY1b,KAAK2b,OAAOf,QAAkC,SAAxB5a,KAAK4b,IAAI,YAAoD,WAA3B5b,KAAK4b,IAAI,gBAA+B5b,KAAKmK,KAAK0R,aAAa,6BAAsD,UAAvB7b,KAAKmK,KAAKoN,UAA2D,WAAnCvX,KAAKmK,KAAK2R,aAAa,UAGhQrB,EAAc9c,UAAUie,IAAM,SAAUG,GAKtC,OAJK/b,KAAKgb,iBACRhb,KAAKgb,eAAiBhb,KAAKgc,gBAAkBhc,KAAK2b,OAAOM,cAAcjc,KAAKkc,OAAS,UAAY,UAAYlc,KAAKic,cAAc,OAG3Hjc,KAAKib,OAAOc,KAAe/b,KAAKib,OAAOc,GAAa/b,KAAKgb,eAAee,KAGjFtB,EAAc9c,UAAUwe,YAAc,SAAUJ,GAC9C,IACIpW,EAAQ3F,KAAK4b,IAAIG,GASrB,OAPIpW,IAAU1H,GAHC,CAAC,SAAU,MAAO,KAAM,KAI5Bqb,KAAK,SAAU8C,GAEtB,OADAzW,EAAQ3F,KAAK4b,IAAIQ,EAASL,EAAUM,OAAO,EAAG,GAAGC,cAAgBP,EAAUM,OAAO,OACjEpe,GAChB+B,MAGE2F,IAAU1H,EAAY,KAAO0H,GAGtC8U,EAAc9c,UAAUse,cAAgB,SAAUlX,GAChD,OAAO/E,KAAKmK,KAAKkB,cAAcZ,YAAY8R,iBAAiBvc,KAAKmK,KAAMpF,IAGzE0V,EAAc9c,UAAU6e,OAAS,SAAUT,GACzC,IAAIpW,EAAQwG,SAASnM,KAAK4b,IAAIG,GAAY,IAC1C,OAAOU,MAAM9W,GAAS,EAAIA,GAG5B8U,EAAc9c,UAAUkP,MAAQ,SAAUkP,GACxC,OAAO/b,KAAK8M,OAAOiP,KAAe/b,KAAK8M,OAAOiP,GAAa,IAAIvQ,EAAMxL,KAAK4b,IAAIG,MAGhFtB,EAAc9c,UAAU0d,SAAW,SAAUU,GAC3C,IAAIpW,EAAQ+W,WAAW1c,KAAK4b,IAAIG,IAChC,OAAOU,MAAM9W,GAAS,EAAIA,GAG5B8U,EAAc9c,UAAUgf,WAAa,WACnC,IAAIC,EAAS5c,KAAK4b,IAAI,cAEtB,OAAQzP,SAASyQ,EAAQ,KACvB,KAAK,IACHA,EAAS,OACT,MAEF,KAAK,IACHA,EAAS,SAIb,OAAOA,GAGTnC,EAAc9c,UAAUkf,UAAY,WAClC,IAAIC,EAAU9c,KAAK4b,IAAI,QAAQ1P,MAAMlM,KAAK+c,MAE1C,OAAID,EACK,CACLE,IAAK7Q,SAAS2Q,EAAQ,GAAI,IAC1BG,MAAO9Q,SAAS2Q,EAAQ,GAAI,IAC5BI,OAAQ/Q,SAAS2Q,EAAQ,GAAI,IAC7BK,KAAMhR,SAAS2Q,EAAQ,GAAI,KAIxB,MAGTrC,EAAc9c,UAAUoa,sBAAwB,WAC9C,OAAO/X,KAAKkb,mBAAqBlb,KAAKkb,iBAAmBkC,EAAiBpd,KAAK4b,IAAI,sBAGrFnB,EAAc9c,UAAU0f,QAAU,SAAUC,EAAUzW,GACpD,IAAIlB,GAAS3F,KAAK4b,IAAI0B,IAAa,IAAI9X,MAAM,KAQ7C,OAJqB,KAFrBG,GADAA,EAAQA,EAAMkB,GAAS,IAAMlB,EAAM,IAAM,QAC3B4X,OAAO/X,MAAM,MAEjB3F,SACR8F,EAAQ,CAACA,EAAM,GAAIA,EAAM,KAGpBA,GAGT8U,EAAc9c,UAAU6f,oBAAsB,SAAU7G,EAAQyB,EAAOvR,GACrE,IACI4C,EAAOE,EADP4M,EAAOvW,KAAKqd,QAAQ,iBAAkBxW,GAG1C,GAAI4W,EAAalH,EAAK,IACpB9M,EAAQkN,EAAOlN,MAAQiT,WAAWnG,EAAK,IAAM,QACxC,CAAA,GAAI,gBAAgBzO,KAAKyO,EAAK,IAAK,CACxC,IAAImH,EAAc/G,EAAOlN,MAAQkN,EAAOhN,OACpCgU,EAAevF,EAAM3O,MAAQ2O,EAAMzO,OACvC,OAAO+T,EAAcC,EAA2B,YAAZpH,EAAK,GAAmB,CAC1D9M,MAAOkN,EAAOhN,OAASgU,EACvBhU,OAAQgN,EAAOhN,QACb,CACFF,MAAOkN,EAAOlN,MACdE,OAAQgN,EAAOlN,MAAQkU,GAGzBlU,EAAQ0C,SAASoK,EAAK,GAAI,IAiB5B,OAbE5M,EADc,SAAZ4M,EAAK,IAA6B,SAAZA,EAAK,GACpB6B,EAAMzO,OACM,SAAZ4M,EAAK,GACL9M,EAAQ2O,EAAM3O,MAAQ2O,EAAMzO,OAC5B8T,EAAalH,EAAK,IAClBI,EAAOhN,OAAS+S,WAAWnG,EAAK,IAAM,IAEtCpK,SAASoK,EAAK,GAAI,IAGb,SAAZA,EAAK,KACP9M,EAAQE,EAASyO,EAAMzO,OAASyO,EAAM3O,OAGjC,CACLA,MAAOA,EACPE,OAAQA,IAIZ8Q,EAAc9c,UAAUigB,wBAA0B,SAAUjH,EAAQyB,EAAOvR,EAAOgX,GAChF,IACIV,EAAMH,EADNc,EAAW9d,KAAKqd,QAAQ,qBAAsBxW,GAqBlD,OAjBEsW,EADEM,EAAaK,EAAS,KAChBnH,EAAOlN,OAASoU,GAAkBzF,GAAO3O,QAAUiT,WAAWoB,EAAS,IAAM,KAE9E3R,SAAS2R,EAAS,GAAI,IAI7Bd,EADkB,SAAhBc,EAAS,GACLX,EAAO/E,EAAM3O,MAAQ2O,EAAMzO,OACxB8T,EAAaK,EAAS,KACxBnH,EAAOhN,QAAUkU,GAAkBzF,GAAOzO,QAAU+S,WAAWoB,EAAS,IAAM,IAE/E3R,SAAS2R,EAAS,GAAI,IAGV,SAAhBA,EAAS,KACXX,EAAOH,EAAM5E,EAAMzO,OAASyO,EAAM3O,OAG7B,CACL0T,KAAMA,EACNH,IAAKA,IAITvC,EAAc9c,UAAUogB,sBAAwB,SAAUlX,GACxD,OAAO7G,KAAKqd,QAAQ,mBAAoBxW,GAAO,IAGjD4T,EAAc9c,UAAUqgB,iBAAmB,WACzC,IAAIC,EAAaje,KAAK4b,IAAI,cACtBsC,EAAU,GAEd,GAAID,GAA6B,SAAfA,EAGhB,IAFA,IAAIE,EAAUF,EAAW/R,MAAMlM,KAAKoe,sBAE3Bhe,EAAI,EAAG+d,GAAW/d,EAAI+d,EAAQte,OAAQO,IAAK,CAClD,IAAI5B,EAAI2f,EAAQ/d,GAAG8L,MAAMlM,KAAKqe,oBAC9BH,EAAQlY,KAAK,CACX6G,MAAO,IAAIrB,EAAMhN,EAAE,IACnB8f,QAAS9f,EAAE,GAAKke,WAAWle,EAAE,GAAGma,QAAQ,KAAM,KAAO,EACrD4F,QAAS/f,EAAE,GAAKke,WAAWle,EAAE,GAAGma,QAAQ,KAAM,KAAO,EACrD6F,KAAMhgB,EAAE,GAAKA,EAAE,GAAGma,QAAQ,KAAM,IAAM,IAK5C,OAAOuF,GAGTzD,EAAc9c,UAAU8gB,eAAiB,WACvC,IAAKze,KAAK0e,cACR,GAAI1e,KAAK2e,eAAgB,CACvB,IAAIC,EAAS5e,KAAK6e,cACdrF,EAASxZ,KAAKmc,YAAY,mBAAmB3W,MAAM,KAAKP,IAAI6Z,GAAU7Z,IAAI8Z,GAC9EvF,EAAO,IAAMoF,EAAOzB,KACpB3D,EAAO,IAAMoF,EAAO5B,IACpBhd,KAAK0e,cAAgB,CACnBlF,OAAQA,EACRwF,OAAQhf,KAAKif,6BAGfjf,KAAK0e,cAAgB,CACnBlF,OAAQ,CAAC,EAAG,GACZwF,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAK9B,OAAOhf,KAAK0e,eAGdjE,EAAc9c,UAAUshB,qBAAuB,WAC7C,IAAKjf,KAAKkf,gBAAiB,CACzB,IAAIC,EAAYnf,KAAKmc,YAAY,aAC7B6C,EAASG,EAqCjB,SAAqBjT,GACnB,GAAIA,GAAsB,WAAbA,EAAM,GACjB,OAAOA,EAAM,GAAG1G,MAAM,KAAKP,IAAI,SAAUzG,GACvC,OAAOke,WAAWle,EAAE+e,UAxCG6B,CAAYD,EAAUjT,MAAMlM,KAAKqf,kBAAoB,KAC9Erf,KAAKkf,gBAAkBF,GAAkB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAG3D,OAAOhf,KAAKkf,iBAGdzE,EAAc9c,UAAUkhB,YAAc,WACpC,OAAO7e,KAAK2W,SAAW3W,KAAK2W,OAAS3W,KAAK2e,eAAiBW,EAAatf,KAAKmK,MAAQoV,EAAUvf,KAAKmK,QAGtGsQ,EAAc9c,UAAUghB,aAAe,WACrC,MAAiD,gBAA1C3e,KAAKif,uBAAuBxZ,KAAK,MAA0BzF,KAAK2b,QAAU3b,KAAK2b,OAAOgD,gBAG/FlE,EAAc9c,UAAU6hB,SAAW,WACjC,IAgBsBrV,EAClBsV,EAjBA9Z,EAAQ3F,KAAKmK,KAAKxE,OAAS,GAQ/B,MAN0B,WAAtB3F,KAAKmK,KAAKuV,SAcQvV,EAbGnK,KAAKmK,KAA5BxE,GAcE8Z,EAAStV,EAAK1B,QAAQ0B,EAAKwV,eAAiB,KAChCF,EAAOG,MAAa,IAdN,aAAnB5f,KAAKmK,KAAKpF,OACnBY,EAAQlF,MAAMkF,EAAM9F,OAAS,GAAG4F,KAAK,MAGf,IAAjBE,EAAM9F,OAAeG,KAAKmK,KAAK0V,aAAe,GAAKla,GAG5D8U,EAAc9c,UAAU0hB,gBAAkB,mBAC1C5E,EAAc9c,UAAUygB,qBAAuB,yCAC/C3D,EAAc9c,UAAU0gB,mBAAqB,4CAC7C5D,EAAc9c,UAAUof,KAAO,kDAwO/B+C,EAAWniB,UAAUoiB,uBAAyB,WAC5C/f,KAAKmX,MAAMQ,QAAQ,SAAU5N,GAC3B,GAAIiW,GAAUjW,GAAY,CACpBiS,GAAgBjS,IAClBA,EAAUkW,cAGZlW,EAAU8Q,QAAU7a,KAAKkgB,aAAanW,GACtC,IAAI+Q,EAAqC,WAA9B/Q,EAAU6R,IAAI,YAA2B,CAAC7R,EAAU8Q,QAAQC,MAAQ,GAC3EqF,EAAUpW,EAAU8S,YAEpBsD,IAAyE,IAA9D,CAAC,WAAY,SAASC,QAAQrW,EAAU6R,IAAI,cACzDd,EAAK9U,KAAK,CAAC,CAAC,OAAQ+D,EAAU4M,OAAOwG,KAAOgD,EAAQhD,KAAMpT,EAAU4M,OAAOqG,IAAMmD,EAAQnD,IAAKmD,EAAQlD,MAAQkD,EAAQhD,KAAMgD,EAAQjD,OAASiD,EAAQnD,OAGvJjT,EAAU+Q,KAAOuF,EAActW,GAAaA,EAAU4R,OAAOb,KAAKtD,OAAOsD,GAAQA,EACjF/Q,EAAUgR,eAA+C,WAA9BhR,EAAU6R,IAAI,YAA2B7R,EAAU+Q,KAAKtD,OAAO,CAACzN,EAAU8Q,QAAQC,OAAS/Q,EAAU+Q,KAE5HkB,GAAgBjS,IAClBA,EAAUuW,gBAEHC,GAAWxW,KACpBA,EAAU+Q,KAAOuF,EAActW,GAAaA,EAAU4R,OAAOb,KAAO,IAGjEkB,GAAgBjS,KACnBA,EAAU4M,OAAS,OAEpB3W,OAOL8f,EAAWniB,UAAU6iB,cAAgB,SAAUC,EAAOve,EAASwe,GAC7DA,EAAaA,GAAc5X,KAAKC,MAChC/I,KAAK2gB,MAAMF,EAAMzgB,KAAK4gB,gBAElBH,EAAM5gB,SAAWG,KAAK4gB,YACxB1e,IACSwe,EAAa,GAAK5X,KAAKC,MAChC/I,KAAKwgB,cAAcC,EAAOve,EAASwe,GAEnC3e,WAAWoY,GAAK,WACdna,KAAKwgB,cAAcC,EAAOve,IACzBlC,MAAO,IAId8f,EAAWniB,UAAUkjB,uBAAyB,SAAUhjB,GACtDmC,KAAK8gB,aAAajjB,EAAU,IAAMkjB,GAAuBpjB,UAAUqjB,iCAAmC,iEAAwED,GAAuBpjB,UAAUsjB,gCAAkC,iEAGnPnB,EAAWniB,UAAUujB,kBAAoB,SAAUrjB,GACjDmC,KAAK8gB,aAAajjB,EAAU,6QAG9BiiB,EAAWniB,UAAUmjB,aAAe,SAAUjjB,EAAUod,GACtD,IAAIkG,EAAqBtjB,EAASmF,cAAc,SAChDme,EAAmBC,UAAYnG,EAC/Bpd,EAASwjB,KAAKC,YAAYH,IAG5BrB,EAAWniB,UAAU4jB,kBAAoB,SAAUxX,GACjD,IAAIoN,EAAQ,CAAC,CAACpN,IAEd,GAAIA,EAAUI,KAAK/G,WAAaqY,KAAK+F,aAAc,CACjD,IAAItF,EAASlc,KAAKyhB,iBAAiB1X,EAAW,WAC1C2X,EAAQ1hB,KAAKyhB,iBAAiB1X,EAAW,UAEzCmS,GACF/E,EAAMnR,KAAKkW,GAGTwF,GACFvK,EAAMnR,KAAK0b,GAIf,OAAOC,GAAQxK,IASjB2I,EAAWniB,UAAU8jB,iBAAmB,SAAU1X,EAAWhF,GAC3D,IAAI6c,EAAQ7X,EAAUkS,cAAclX,GAEpC,IAAK6c,IAAUA,EAAMC,SAA6B,SAAlBD,EAAMC,SAAwC,qBAAlBD,EAAMC,SAAoD,SAAlBD,EAAME,QACxG,OAAO,KAQT,IALA,IAAID,EA+tBN,SAAqBA,GACnB,IAAIE,EAAQF,EAAQxF,OAAO,EAAG,GAC9B,OAAO0F,IAAUF,EAAQxF,OAAOwF,EAAQhiB,OAAS,IAAMkiB,EAAM7V,MAAM,OAAS2V,EAAQxF,OAAO,EAAGwF,EAAQhiB,OAAS,GAAKgiB,EAjuBtGG,CAAYJ,EAAMC,SAC5BI,EAAmC,QAAzBJ,EAAQxF,OAAO,EAAG,GAC5B6F,EAAarkB,EAASmF,cAAcif,EAAU,MAAQ,4BACtDE,EAAkB,IAAIpB,GAAuBmB,EAAYnY,EAAWhF,GAE/D3E,EAAIwhB,EAAM/hB,OAAS,EAAGO,GAAK,EAAGA,IAAK,CAC1C,IAAIkd,EAAuBsE,EAAMQ,KAAKhiB,GAlB7BuY,QAAQ,aAAc,SAAUzM,GACzC,OAAOA,EAAMoQ,cAAc3D,QAAQ,IAAK,MAkBxCuJ,EAAWN,MAAMtE,GAAYsE,EAAMtE,GAKrC,GAFA4E,EAAWG,UAAYtB,GAAuBpjB,UAAUqjB,iCAAmC,IAAMD,GAAuBpjB,UAAUsjB,gCAE9HgB,EAEF,OADAC,EAAWtL,IAAMwG,EAAiByE,GAAS,GAAGpK,KAAK,GAC5C,CAAC0K,GAER,IAAIvC,EAAO/hB,EAASyD,eAAeugB,GAEnC,OADAK,EAAWZ,YAAY1B,GAChB,CAACuC,EAAiB,IAAIG,GAAc1C,EAAMuC,KAIrDrC,EAAWniB,UAAU4kB,YAAc,SAAUC,GAC3C,OAAOb,GAAQ,GAAG3J,OAAOxY,KAAKgjB,EAAgBrY,KAAKsY,WAAYC,IAAgBzd,IAAI,SAAUkF,GAC3F,IAAIJ,EAAY,CAACI,EAAK/G,WAAaqY,KAAKC,UAAY,IAAI4G,GAAcnY,EAAMqY,GAAmB,IAAI/H,EAActQ,EAAMqY,IAAkBxK,OAAO2K,IAChJ,OAAOxY,EAAK/G,WAAaqY,KAAK+F,cAAgBzX,EAAUlK,QAA2B,aAAjBsK,EAAKuV,QAAyB3V,EAAU,GAAGyR,mBAAqBzR,EAAUyN,OAAOxX,KAAKuiB,YAAYxY,EAAU,KAAO,GAAKA,GACzL/J,QAGL8f,EAAWniB,UAAUilB,mBAAqB,SAAU7Y,EAAW8Y,GAC7D,IAAIlI,EAAQ,IAAImI,GAAgBD,EAAgB9Y,EAAUqR,aAAcrR,EAAUI,KAAMJ,EAAU4R,QAClG5R,EAAU2Q,QAAQC,IACAkI,EAAiBlI,EAAMoI,eAAe/iB,MAAQ2a,EAAMgB,OAAOhB,OACjEqI,SAAShd,KAAK2U,GAC1B5Q,EAAU4Q,MAAQA,GAGpBmF,EAAWniB,UAAUslB,uBAAyB,WAC5CjjB,KAAKmX,MAAMQ,QAAQ,SAAU5N,GACvBiW,GAAUjW,KAAe/J,KAAKkjB,cAAcnZ,IA8pBpD,SAAoBA,GAClB,OAAOA,EAAUqR,aAAe,EA/pBgC+H,CAAWpZ,IAmnB7E,SAAiCA,GAC/B,IAAI+T,EAAW/T,EAAU6R,IAAI,YAE7B,MAAkB,WADoD,IAAzD,CAAC,WAAY,WAAY,SAASwE,QAAQtC,GAAmB/T,EAAU6R,IAAI,UAAY,QArnBXwH,CAAwBrZ,IAAc/J,KAAKqjB,0BAA0BtZ,IAAcA,EAAU4U,gBAClL3e,KAAK4iB,mBAAmB7Y,GAAW,GAC1BiW,GAAUjW,KAAeuZ,GAAavZ,IAAcwZ,GAAQxZ,IA+nB3E,SAAuBA,GACrB,OAA+E,IAAxE,CAAC,eAAgB,gBAAgBqW,QAAQrW,EAAU6R,IAAI,YAhoByB4H,CAAczZ,IAAc0Z,GAAW1Z,IAC1H/J,KAAK4iB,mBAAmB7Y,GAAW,GAEnCA,EAAUuR,YAAYvR,EAAU4R,OAAOhB,QAExC3a,OAGL8f,EAAWniB,UAAU0lB,0BAA4B,SAAUtZ,GACzD,MAAmC,SAA5BA,EAAUI,KAAKoN,UAAuBxN,EAAU4R,OAAO9O,MAAM,mBAAmBjB,iBAGzFkU,EAAWniB,UAAUulB,cAAgB,SAAUnZ,GAC7C,OAA4B,OAArBA,EAAU4R,QAGnBmE,EAAWniB,UAAU+lB,qBAAuB,SAAU/I,GAsoBtD,IAAoBqI,EAroBlBrI,EAAMqI,SAASW,MAqoBGX,EAroBarI,EAAMqI,SAAShb,MAAM,GAsoB7C,SAAU7J,EAAGC,GAClB,OAAOD,EAAEqe,OAAO,UAAYwG,EAAS5C,QAAQjiB,GAAK6kB,EAASnjB,QAAUzB,EAAEoe,OAAO,UAAYwG,EAAS5C,QAAQhiB,GAAK4kB,EAASnjB,WAtoB3H8a,EAAMqI,SAASrL,QAAQ3X,KAAK0jB,qBAAsB1jB,OAGpD8f,EAAWniB,UAAUimB,gBAAkB,SAAU7Z,GAC/C,OAAO,SAAU6V,EAAM/Y,EAAOgd,GAC5B,GAA4D,SAAxD9Z,EAAU4R,OAAOC,IAAI,kBAAkBS,OAAO,EAAG,IAAwC,IAAvBuD,EAAKrC,OAAO1d,OAAc,CAC9F,GAAIG,KAAKwY,QAAQsL,cAAgB/Z,EAAU4R,OAAOgD,eAAgB,CAChE,IAAIC,EAASiF,EAAS7b,MAAM,EAAGnB,GAAOpB,KAAK,IAAI5F,OAC/C,OAAOG,KAAK+jB,eAAeha,EAAUI,KAAMyU,EAAQgB,EAAK/f,QACnD,GAAIkK,EAAUI,MAAuC,iBAAxBJ,EAAUI,KAAK1I,KAAmB,CACpE,IAAIuiB,EAAkBja,EAAUI,KAAK8Z,UAAUrE,EAAK/f,QAChD8W,EAAS3W,KAAKkkB,iBAAiBna,EAAUI,KAAMJ,EAAU4R,OAAOgD,gBAEpE,OADA5U,EAAUI,KAAO6Z,EACVrN,QAEC3W,KAAKwY,QAAQsL,cAAe/Z,EAAU4R,OAAOgD,iBACvD5U,EAAUI,KAAOJ,EAAUI,KAAK8Z,UAAUrE,EAAK/f,SAGjD,MAAO,KAIXigB,EAAWniB,UAAUumB,iBAAmB,SAAU/Z,EAAMgV,GACtD,IAAIgF,EAAUha,EAAKkB,cAAcrI,cAAc,sBAC3C2Y,EAASxR,EAAKia,WACdC,EAAala,EAAKma,WAAU,GAChCH,EAAQ7C,YAAYnX,EAAKma,WAAU,IACnC3I,EAAO4I,aAAaJ,EAASha,GAC7B,IAAIwM,EAASwI,EAAYG,EAAa6E,GAAW5E,EAAU4E,GAE3D,OADAxI,EAAO4I,aAAaF,EAAYF,GACzBxN,GAGTmJ,EAAWniB,UAAUomB,eAAiB,SAAU5Z,EAAMyU,EAAQ/e,GAC5D,IAAI2kB,EAAQxkB,KAAKwkB,QAAUxkB,KAAKwkB,MAAQra,EAAKkB,cAAcoZ,eAG3D,OAFAD,EAAME,SAASva,EAAMyU,GACrB4F,EAAMG,OAAOxa,EAAMyU,EAAS/e,GACrB2kB,EAAMI,yBAKf9E,EAAWniB,UAAUknB,MAAQ,SAAUlK,GAErC,IAAImK,EAAiBnK,EAAMqI,SAAShL,OAAO+M,GAEvCC,EAAqBrK,EAAMY,SAASvD,OAAOgI,IAC3CiF,EAAsBD,EAAmBhN,OAAOkN,GAAIzB,KACpD0B,EAAoCF,EAAoBjN,OAAOkN,GAAI5B,KAAetL,OAAOkN,GAAIE,KAE7FC,EAAsBL,EAAmBhN,OAAOkN,GAAI5B,KAAetL,OAAOyL,IAE1E6B,EAASL,EAAoBjN,OAAOkN,GAAI5B,KAAetL,OAAOoN,IAE9DG,EAAc5K,EAAMqI,SAASxL,OAAOyN,EAAoBjN,OAAOsL,KAAetL,OAAOuL,IAErF3D,EAAOjF,EAAMY,SAASvD,OAAOuI,IAAYvI,OAAOwN,IAChDC,EAAiB9K,EAAMqI,SAAShL,OAAO0N,GAE3CZ,EAAetN,OAAO2N,GAAmC3N,OAAO6N,GAAqB7N,OAAO8N,GAAQ9N,OAAO+N,GAAa/N,OAAOoI,GAAMpI,OAAOiO,GAAgB9N,QAAQ,SAAU5N,GAC5K/J,KAAK2lB,YAAY3f,KAAK+D,GAElB6b,GAAkB7b,KACpB/J,KAAK6kB,MAAM9a,GACX/J,KAAK2lB,YAAY3f,KAAK,IAAI6f,KAE3B7lB,OAGL8f,EAAWniB,UAAUgjB,MAAQ,SAAU5W,GACrC,IACMA,aAAqB8b,EACvB7lB,KAAKqJ,SAASyc,IAAIC,UACTxF,GAAWxW,IAChBiS,GAAgBjS,EAAU4R,SAC5B5R,EAAU4R,OAAOsE,cAGnBjgB,KAAKgmB,UAAUjc,GAEXiS,GAAgBjS,EAAU4R,SAC5B5R,EAAU4R,OAAO2E,YAGnBtgB,KAAKimB,UAAUlc,GAEjB,MAAOzK,GAGP,GAFAsL,EAAItL,GAEAU,KAAKyI,QAAQc,OACf,MAAMjK,IAKZwgB,EAAWniB,UAAUsoB,UAAY,SAAUlc,GACrC6b,GAAkB7b,KACpB/J,KAAKqJ,SAAS6c,WAAWnc,EAAUoR,SACnCnb,KAAKqJ,SAASyc,IAAIK,OAEdpc,EAAU4U,gBACZ3e,KAAKqJ,SAAS+c,aAAarc,EAAU0U,mBAIT,UAA5B1U,EAAUI,KAAKoN,UAAgD,aAAxBxN,EAAUI,KAAKpF,KACxD/E,KAAKqmB,cAActc,GACkB,UAA5BA,EAAUI,KAAKoN,UAAgD,UAAxBxN,EAAUI,KAAKpF,KAC/D/E,KAAKsmB,WAAWvc,GAEhB/J,KAAKumB,aAAaxc,IAItB+V,EAAWniB,UAAU4oB,aAAe,SAAUxc,GAC5C,IAAI4M,EAAS5M,EAAU8U,cACvB7e,KAAKqJ,SAASyR,KAAK/Q,EAAUgR,eAAgB,WAC3C/a,KAAKqJ,SAASmd,iBAAiBzc,EAAW4M,EAAQ5M,EAAU8Q,QAAQA,QAAQ5V,IAAIwhB,MAC/EzmB,MACHA,KAAKqJ,SAASyR,KAAK/Q,EAAU+Q,KAAM,WACjC9a,KAAKqJ,SAASqd,cAAc3c,EAAU8Q,QAAQA,UAC7C7a,MACHA,KAAKqJ,SAASyR,KAAK/Q,EAAUgR,eAAgB,WAC3C,OAAQhR,EAAUI,KAAKoN,UACrB,IAAK,MACL,IAAK,SACH,IAAIoP,EAAe3mB,KAAKoX,OAAO2C,IAAIhQ,EAAUI,MAEzCwc,EACF3mB,KAAKqJ,SAASud,YAAY7c,EAAW4M,EAAQ5M,EAAU8Q,QAAS8L,GAEhE/b,EAAI,kBAAoBb,EAAUI,KAAKoN,SAAW,IAAKxN,EAAUI,MAGnE,MAEF,IAAK,MACH,IAAI0c,EAAiB7mB,KAAKoX,OAAO2C,IAAIhQ,EAAUI,KAAKyM,KAEhDiQ,EACF7mB,KAAKqJ,SAASud,YAAY7c,EAAW4M,EAAQ5M,EAAU8Q,QAASgM,GAEhEjc,EAAI,sBAAuBb,EAAUI,KAAKyM,KAG5C,MAEF,IAAK,SACH5W,KAAKqJ,SAASud,YAAY7c,EAAW4M,EAAQ5M,EAAU8Q,QAAS,CAC9DzC,MAAOrO,EAAUI,OAEnB,MAEF,IAAK,SACL,IAAK,QACL,IAAK,WACHnK,KAAK8mB,eAAe/c,KAGvB/J,OAGL8f,EAAWniB,UAAU0oB,cAAgB,SAAUtc,GAC7C,IAAI3L,EAAI2L,EAAU8U,cACdtI,EAAO5R,KAAKoH,IAAI3N,EAAEqL,MAAOrL,EAAEuL,QAC3BgN,EAAS,CACXlN,MAAO8M,EAAO,EACd5M,OAAQ4M,EAAO,EACfyG,IAAK5e,EAAE4e,IACPG,KAAM/e,EAAE+e,MAENjf,EAAI,CAAC,EAAG,GACR6oB,EAAS,CAAC7oB,EAAGA,EAAGA,EAAGA,GACnB2c,EAAU,CAAC,EAAG,EAAG,EAAG,GAAG5V,IAAI,SAAUnE,GACvC,MAAO,CACL+L,MAAO,IAAIrB,EAAM,WACjB/B,MAAO3I,KAGPkmB,EAAeC,EAAqBtQ,EAAQoQ,EAAQlM,GACxD7a,KAAKqJ,SAASyR,KAAK/Q,EAAUgR,eAAgB,WAC3C/a,KAAKqJ,SAAS6d,UAAUvQ,EAAOwG,KAAO,EAAGxG,EAAOqG,IAAM,EAAGrG,EAAOlN,MAAQ,EAAGkN,EAAOhN,OAAS,EAAG,IAAI6B,EAAM,YACxGxL,KAAKqJ,SAASqd,cAAcS,EAAiBtM,EAASlE,EAAQqQ,EAAcD,IAExEhd,EAAUI,KAAKid,UACjBpnB,KAAKqJ,SAASge,KAAK,IAAI7b,EAAM,WAAY,SAAU,SAAU,OAAQ+K,EAAO,EAAI,KAAM,SACtFvW,KAAKqJ,SAASuW,KAAK,IAAUjJ,EAAOwG,KAAO5G,EAAO,EAAGI,EAAOqG,IAAMzG,EAAO,KAE1EvW,OAGL8f,EAAWniB,UAAU2oB,WAAa,SAAUvc,GAC1C,IAAI4M,EAAS5M,EAAU8U,cACnBtI,EAAO5R,KAAKoH,IAAI4K,EAAOlN,MAAOkN,EAAOhN,QAAU,EACnD3J,KAAKqJ,SAASyR,KAAK/Q,EAAUgR,eAAgB,WAC3C/a,KAAKqJ,SAASie,aAAa3Q,EAAOwG,KAAO,EAAGxG,EAAOqG,IAAM,EAAGzG,EAAM,IAAI/K,EAAM,WAAY,EAAG,IAAIA,EAAM,YAEjGzB,EAAUI,KAAKid,SACjBpnB,KAAKqJ,SAASke,OAAO5iB,KAAK6iB,KAAK7Q,EAAOwG,KAAO5G,EAAO,GAAK,EAAG5R,KAAK6iB,KAAK7Q,EAAOqG,IAAMzG,EAAO,GAAK,EAAG5R,KAAKD,MAAM6R,EAAO,GAAI,IAAI/K,EAAM,aAEnIxL,OAGL8f,EAAWniB,UAAUmpB,eAAiB,SAAU/c,GAC9C,IAAIpE,EAAQoE,EAAUyV,WAEtB,GAAI7Z,EAAM9F,OAAS,EAAG,CACpB,IAAIhC,EAAWkM,EAAUI,KAAKkB,cAC1B8Y,EAAUtmB,EAASmF,cAAc,sBACpB,CAAC,aAAc,YAAa,aAAc,aAAc,WAAY,QAAS,cAAe,aAAc,eAAgB,gBAAiB,QAAS,SAAU,kBAAmB,iBAAkB,kBAAmB,iBAAkB,YAAa,aAAc,YACzQ2U,QAAQ,SAAU2F,GAC3B,IACE6G,EAAQvC,MAAMtE,GAAYvT,EAAU6R,IAAI0B,GACxC,MAAOhe,GAEPsL,EAAI,4DAA8DtL,EAAEmoB,YAGxE,IAAI9Q,EAAS5M,EAAU8U,cACvBsF,EAAQvC,MAAM9D,SAAW,QACzBqG,EAAQvC,MAAMzE,KAAOxG,EAAOwG,KAAO,KACnCgH,EAAQvC,MAAM5E,IAAMrG,EAAOqG,IAAM,KACjCmH,EAAQuD,YAAc/hB,EACtB9H,EAASwjB,KAAKC,YAAY6C,GAC1BnkB,KAAKgmB,UAAU,IAAI1D,GAAc6B,EAAQwD,WAAY5d,IACrDlM,EAASwjB,KAAKuG,YAAYzD,KAI9BrE,EAAWniB,UAAUqoB,UAAY,SAAUjc,GACzCA,EAAU8d,qBACV,IA0ekBviB,EA1edwiB,EAAalqB,EAAO2K,YAAYhF,SAASqE,KAAKnB,OAAOsD,EAAUI,KAAK1I,MACpEoiB,EAAa7jB,KAAKyI,QAAQsf,kBAiWhC,SAAyBhe,GACvB,MAAO,sBAAsBjC,KAAKiC,EAAU4R,OAAOC,IAAI,kBAlWNoM,CAAgBje,KAye/CzE,EAze0EyE,EAAUI,KAAK1I,KA0epG,mBAAmBqG,KAAKxC,IA1e2GwiB,EAAW7iB,IAAI,SAAUgjB,GACjK,OAAOrqB,EAAO2K,YAAYhF,SAASqE,KAAKP,OAAO,CAAC4gB,MA+bpD,SAAkBH,GAChB,IAGII,EAHAC,EAAQ,GACR/nB,EAAI,EACJgoB,GAAiB,EAGrB,KAAON,EAAWjoB,QA0BIwoB,EAzBDP,EAAW1nB,IA+BF,IALvB,CAAC,GACR,GACA,GACA,EACA,IACEggB,QAAQiI,KA/B8BD,IACpCF,EAAOJ,EAAW1gB,OAAO,EAAGhH,IAEnBP,QACPsoB,EAAMniB,KAAKpI,EAAO2K,YAAYhF,SAASqE,KAAKP,OAAO6gB,IAGrDE,GAAkBA,EAClBhoB,EAAI,GAEJA,IAGEA,GAAK0nB,EAAWjoB,SAClBqoB,EAAOJ,EAAW1gB,OAAO,EAAGhH,IAEnBP,QACPsoB,EAAMniB,KAAKpI,EAAO2K,YAAYhF,SAASqE,KAAKP,OAAO6gB,IAQ3D,IAAwBG,EAHtB,OAAOF,EA7d4GG,CAASR,GAGxHlL,EAAS7S,EAAU4R,OAAOgB,aAC1BpG,EAAOxM,EAAU4R,OAAOC,IAAI,YAC5BtF,EAASvM,EAAU4R,OAAOC,IAAI,cAC9BuC,EAAUpU,EAAU4R,OAAOqC,mBAC/Bhe,KAAKqJ,SAASge,KAAKtd,EAAU4R,OAAO9O,MAAM,SAAU9C,EAAU4R,OAAOC,IAAI,aAAc7R,EAAU4R,OAAOC,IAAI,eAAgBgB,EAAQrG,EAAMD,GAEtI6H,EAAQte,OAEVG,KAAKqJ,SAASkf,WAAWpK,EAAQ,GAAGtR,MAAOsR,EAAQ,GAAGG,QAASH,EAAQ,GAAGI,QAASJ,EAAQ,GAAGK,MAE9Fxe,KAAKqJ,SAASmf,cAGhBxoB,KAAKqJ,SAASyR,KAAK/Q,EAAU4R,OAAOb,KAAM,WACxC+I,EAAS5e,IAAIjF,KAAK4jB,gBAAgB7Z,GAAY/J,MAAM2X,QAAQ,SAAUhB,EAAQ9P,GACxE8P,IACF3W,KAAKqJ,SAASuW,KAAKiE,EAAShd,GAAQ8P,EAAOwG,KAAMxG,EAAOuG,QACxDld,KAAKyoB,qBAAqB1e,EAAU4R,OAAQhF,EAAQ3W,KAAK0oB,YAAYrS,WAAWC,EAAQC,MAEzFvW,OACFA,OAGL8f,EAAWniB,UAAU8qB,qBAAuB,SAAU1e,EAAW4M,EAAQgS,GACvE,OAAQ5e,EAAU6R,IAAI,kBAAkBpW,MAAM,KAAK,IACjD,IAAK,YAGHxF,KAAKqJ,SAAS6d,UAAUvQ,EAAOwG,KAAMxY,KAAKgH,MAAMgL,EAAOqG,IAAM2L,EAAQC,SAAWD,EAAQE,WAAYlS,EAAOlN,MAAO,EAAGM,EAAU8C,MAAM,UACrI,MAEF,IAAK,WACH7M,KAAKqJ,SAAS6d,UAAUvQ,EAAOwG,KAAMxY,KAAKgH,MAAMgL,EAAOqG,KAAMrG,EAAOlN,MAAO,EAAGM,EAAU8C,MAAM,UAC9F,MAEF,IAAK,eAEH7M,KAAKqJ,SAAS6d,UAAUvQ,EAAOwG,KAAMxY,KAAK6iB,KAAK7Q,EAAOqG,IAAM2L,EAAQG,OAASH,EAAQE,WAAYlS,EAAOlN,MAAO,EAAGM,EAAU8C,MAAM,YAKxI,IAAIkc,EAAwB,CAC1BC,MAAO,CAAC,CAAC,SAAU,IAAO,CAAC,SAAU,IAAO,CAAC,SAAU,IAAO,CAAC,SAAU,MAG3ElJ,EAAWniB,UAAUuiB,aAAe,SAAUnW,GAC5C,IAAIkf,EAAalf,EAAU8U,cACvBkI,EAkTN,SAA6Bhd,GAC3B,MAAO,CAAC,UAAW,WAAY,cAAe,cAAc9E,IAAI,SAAUikB,GACxE,IAAIvjB,EAAQoE,EAAU6R,IAAI,SAAWsN,EAAO,UACxCC,EAAMxjB,EAAMH,MAAM,KAMtB,OAJI2jB,EAAItpB,QAAU,IAChBspB,EAAI,GAAKA,EAAI,IAGRA,EAAIlkB,IAAImkB,MA3TJC,CAAoBtf,GAC7B8Q,EAAU,CAAC,MAAO,QAAS,SAAU,QAAQ5V,IAAI,SAAUikB,EAAMriB,GACnE,IAAI+a,EAAQ7X,EAAU6R,IAAI,SAAWsN,EAAO,SACxCrc,EAAQ9C,EAAU8C,MAAM,SAAWqc,EAAO,SAEhC,UAAVtH,GAAqB/U,EAAMhB,YAC7BgB,EAAQ,IAAIrB,EAAM,CAAC,IAAK,IAAK,IAAKqB,EAAM1O,KAG1C,IAAImrB,EAAiBP,EAAsBnH,GAASmH,EAAsBnH,GAAO/a,GAAS,KAC1F,MAAO,CACL4C,MAAOM,EAAUyS,OAAO,SAAW0M,EAAO,SAC1Crc,MAAOyc,EAAiBzc,EAAMyc,EAAe,IAAIA,EAAe,IAAMzc,EACtE4K,KAAM,QAGNuP,EAAeC,EAAqBgC,EAAYlC,EAAQlM,GAC5D,MAAO,CACLC,KAAM9a,KAAKupB,oBAAoBxf,EAAWid,EAAcnM,EAASkM,EAAQkC,GACzEpO,QAASsM,EAAiBtM,EAASoO,EAAYjC,EAAcD,KAiEjEjH,EAAWniB,UAAU4rB,oBAAsB,SAAUxf,EAAWid,EAAcnM,EAASkM,EAAQpQ,GAC7F,IACI6S,EAAa,GAEjB,OAHqBzf,EAAU6R,IAAI,mBAIjC,IAAK,cACL,IAAK,cACH6N,EAAYD,EAAYzC,EAAO,GAAIA,EAAO,GAAIC,EAAa0C,aAAc1C,EAAa2C,cAAehT,EAAOwG,KAAOtC,EAAQ,GAAGpR,MAAOkN,EAAOqG,IAAMnC,EAAQ,GAAGpR,OAC7JggB,EAAYD,EAAYzC,EAAO,GAAIA,EAAO,GAAIC,EAAa2C,cAAe3C,EAAa4C,iBAAkBjT,EAAOwG,KAAOxG,EAAOlN,MAAQoR,EAAQ,GAAGpR,MAAOkN,EAAOqG,IAAMnC,EAAQ,GAAGpR,OAChLggB,EAAYD,EAAYzC,EAAO,GAAIA,EAAO,GAAIC,EAAa4C,iBAAkB5C,EAAa6C,gBAAiBlT,EAAOwG,KAAOxG,EAAOlN,MAAQoR,EAAQ,GAAGpR,MAAOkN,EAAOqG,IAAMrG,EAAOhN,OAASkR,EAAQ,GAAGpR,OAClMggB,EAAYD,EAAYzC,EAAO,GAAIA,EAAO,GAAIC,EAAa6C,gBAAiB7C,EAAa0C,aAAc/S,EAAOwG,KAAOtC,EAAQ,GAAGpR,MAAOkN,EAAOqG,IAAMrG,EAAOhN,OAASkR,EAAQ,GAAGpR,OAC/K,MAEF,QACEggB,EAAYD,EAAYzC,EAAO,GAAIA,EAAO,GAAIC,EAAa8C,aAAc9C,EAAa+C,cAAepT,EAAOwG,KAAMxG,EAAOqG,KACzHyM,EAAYD,EAAYzC,EAAO,GAAIA,EAAO,GAAIC,EAAa+C,cAAe/C,EAAagD,iBAAkBrT,EAAOwG,KAAOxG,EAAOlN,MAAOkN,EAAOqG,KAC5IyM,EAAYD,EAAYzC,EAAO,GAAIA,EAAO,GAAIC,EAAagD,iBAAkBhD,EAAaiD,gBAAiBtT,EAAOwG,KAAOxG,EAAOlN,MAAOkN,EAAOqG,IAAMrG,EAAOhN,QAC3J8f,EAAYD,EAAYzC,EAAO,GAAIA,EAAO,GAAIC,EAAaiD,gBAAiBjD,EAAa8C,aAAcnT,EAAOwG,KAAMxG,EAAOqG,IAAMrG,EAAOhN,QAI5I,OAAO6f,GA6VT,IAAIU,EAAa,EACbC,EAAgB,oBAAqB,IAAIC,eACzCC,EAAqB,gBAAiB,IAAIC,MAmE9CvJ,GAAuBpjB,UAAU+c,QAAU,SAAUC,GACnDoG,GAAuBpjB,UAAU+c,QAAQlb,KAAKQ,KAAM2a,GACpDA,EAAMqB,iBAAkB,EACxBrB,EAAMuB,OAASlc,KAAKkc,QAGtB6E,GAAuBpjB,UAAYgD,OAAOoC,OAAO0X,EAAc9c,WAE/DojB,GAAuBpjB,UAAUsiB,YAAc,WACzCjgB,KAAKkc,OACPlc,KAAK2b,OAAOxR,KAAKogB,aAAavqB,KAAKmK,KAAMnK,KAAK2b,OAAOxR,KAAKwd,YAE1D3nB,KAAK2b,OAAOxR,KAAKmX,YAAYthB,KAAKmK,MAGpCnK,KAAK2b,OAAOxR,KAAKkY,WAAa,IAAMriB,KAAKwqB,gBAG3CzJ,GAAuBpjB,UAAU2iB,SAAW,WAC1CtgB,KAAKmK,KAAKia,WAAWwD,YAAY5nB,KAAKmK,OAGxC4W,GAAuBpjB,UAAU6sB,aAAe,WAC9C,OAAOxqB,KAAK,8BAAgCA,KAAKkc,OAAS,SAAW,WAGvE6E,GAAuBpjB,UAAUqjB,iCAAmC,wCACpED,GAAuBpjB,UAAUsjB,gCAAkC,uCAUnEwJ,GAAS9sB,UAAUipB,YAAc,SAAU7c,EAAW4M,EAAQ+T,EAAY7D,GACxE,IAAI8D,EAAc5gB,EAAUyS,OAAO,eAC/BoO,EAAa7gB,EAAUyS,OAAO,cAC9BqO,EAAe9gB,EAAUyS,OAAO,gBAChCsO,EAAgB/gB,EAAUyS,OAAO,iBACjC3B,EAAU6P,EAAW7P,QACrBpR,EAAQkN,EAAOlN,OAASoR,EAAQ,GAAGpR,MAAQoR,EAAQ,GAAGpR,MAAQkhB,EAAcE,GAC5ElhB,EAASgN,EAAOhN,QAAUkR,EAAQ,GAAGpR,MAAQoR,EAAQ,GAAGpR,MAAQmhB,EAAaE,GACjF9qB,KAAK+qB,UAAUlE,EAAgB,EAAG,EAAGA,EAAezO,MAAM3O,OAASA,EAAOod,EAAezO,MAAMzO,QAAUA,EAAQgN,EAAOwG,KAAOwN,EAAc9P,EAAQ,GAAGpR,MAAOkN,EAAOqG,IAAM4N,EAAa/P,EAAQ,GAAGpR,MAAOA,EAAOE,IAGpN8gB,GAAS9sB,UAAU6oB,iBAAmB,SAAUzc,EAAW4M,EAAQ+T,GAC7D/T,EAAOhN,OAAS,GAAKgN,EAAOlN,MAAQ,IACtCzJ,KAAKgrB,sBAAsBjhB,EAAW4M,GACtC3W,KAAKirB,sBAAsBlhB,EAAW4M,EAAQ+T,KAIlDD,GAAS9sB,UAAUqtB,sBAAwB,SAAUjhB,EAAW4M,GAC9D,IAAI9J,EAAQ9C,EAAU8C,MAAM,mBAEvBA,EAAMjB,iBACT5L,KAAKknB,UAAUvQ,EAAOwG,KAAMxG,EAAOqG,IAAKrG,EAAOlN,MAAOkN,EAAOhN,OAAQkD,IAIzE4d,GAAS9sB,UAAU+oB,cAAgB,SAAU7L,GAC3CA,EAAQlD,QAAQ3X,KAAKkrB,aAAclrB,OAGrCyqB,GAAS9sB,UAAUutB,aAAe,SAAUzpB,GACrCA,EAAKoL,MAAMjB,iBAAiC,OAAdnK,EAAKgW,MACtCzX,KAAKmrB,UAAU1pB,EAAKgW,KAAMhW,EAAKoL,QAInC4d,GAAS9sB,UAAUstB,sBAAwB,SAAUlhB,EAAW4M,EAAQ+T,GAC/C3gB,EAAUgO,wBAChBqT,UAAUzT,QAAQ,SAAU0T,EAAiBxkB,EAAOsiB,GACnE,OAAQkC,EAAgB3T,QACtB,IAAK,MACH,IAAIU,EAAQpY,KAAKoX,OAAO2C,IAAIsR,EAAgB5T,KAAK,IAE7CW,EACFpY,KAAKsrB,0BAA0BvhB,EAAW4M,EAAQyB,EAAO+Q,EAAItpB,QAAUgH,EAAQ,GAAI6jB,GAEnF9f,EAAI,iCAAkCygB,EAAgB5T,KAAK,IAG7D,MAEF,IAAK,kBACL,IAAK,WACH,IAAI8T,EAAgBvrB,KAAKoX,OAAO2C,IAAIsR,EAAgB1lB,OAEhD4lB,EACFvrB,KAAKwrB,yBAAyBD,EAAe5U,EAAQ+T,GAErD9f,EAAI,iCAAkCygB,EAAgB5T,KAAK,IAG7D,MAEF,IAAK,OACH,MAEF,QACE7M,EAAI,gCAAiCygB,EAAgB5T,KAAK,MAE7DzX,OAGLyqB,GAAS9sB,UAAU2tB,0BAA4B,SAAUvhB,EAAW4M,EAAQkQ,EAAgBhgB,EAAO6jB,GACjG,IAAInU,EAAOxM,EAAUyT,oBAAoB7G,EAAQkQ,EAAezO,MAAOvR,GACnEiX,EAAW/T,EAAU6T,wBAAwBjH,EAAQkQ,EAAezO,MAAOvR,EAAO0P,GAGtF,OAFaxM,EAAUgU,sBAAsBlX,IAG3C,IAAK,WACL,IAAK,mBACH7G,KAAKyrB,sBAAsB5E,EAAgB/I,EAAUvH,EAAMI,EAAQA,EAAOwG,KAAOuN,EAAW,GAAI/T,EAAOqG,IAAMc,EAASd,IAAM0N,EAAW,GAAI,MAAOnU,EAAK5M,OAAQ+gB,GAC/J,MAEF,IAAK,WACL,IAAK,mBACH1qB,KAAKyrB,sBAAsB5E,EAAgB/I,EAAUvH,EAAMI,EAAQA,EAAOwG,KAAOW,EAASX,KAAOuN,EAAW,GAAI/T,EAAOqG,IAAM0N,EAAW,GAAInU,EAAK9M,MAAO,MAAOihB,GAC/J,MAEF,IAAK,YACH1qB,KAAKyrB,sBAAsB5E,EAAgB/I,EAAUvH,EAAMI,EAAQA,EAAOwG,KAAOW,EAASX,KAAOuN,EAAW,GAAI/T,EAAOqG,IAAMc,EAASd,IAAM0N,EAAW,GAAInU,EAAK9M,MAAO8M,EAAK5M,OAAQ+gB,GACpL,MAEF,QACE1qB,KAAK0rB,uBAAuB7E,EAAgB/I,EAAUvH,EAAM,CAC1DyG,IAAKrG,EAAOqG,IACZG,KAAMxG,EAAOwG,MACZuN,EAAW,GAAIA,EAAW,MAanC5H,GAAgBnlB,UAAYgD,OAAOoC,OAAO0X,EAAc9c,WAExDmlB,GAAgBnlB,UAAUolB,eAAiB,SAAU4I,GACnD,IAAIC,EAAc5rB,KAAK2b,OAAS3b,KAAK2b,OAAOhB,MAAQ,KACpD,OAAOiR,EAAcA,EAAYC,YAAcD,EAAcA,EAAY7I,eAAe4I,GAAWA,EAAQhR,OAS7GmR,GAAQnuB,UAAUouB,gBAAkB,SAAUluB,GAC5C,IAAI2mB,EACAwH,EAGAxT,GAAU,EAsBd,OApBI3a,EAAS4mB,cACXD,EAAQ3mB,EAAS4mB,eAEPG,yBACRoH,EAAcnuB,EAASmF,cAAc,cACzB4e,MAAMjY,OAAS,QAC3BqiB,EAAYpK,MAAME,QAAU,QAC5BjkB,EAASwjB,KAAKC,YAAY0K,GAC1BxH,EAAMyH,WAAWD,GAIG,MAHNxH,EAAMI,wBACMjb,SAGxB6O,GAAU,GAGZ3a,EAASwjB,KAAKuG,YAAYoE,IAIvBxT,GAGTsT,GAAQnuB,UAAUuuB,SAAW,WAC3B,YAA0C,KAA5B,IAAI5B,OAAQ6B,aAG5BL,GAAQnuB,UAAUyuB,QAAU,WAC1B,IAAInS,EAAM,IAAIqQ,MACVhf,EAASzN,EAASmF,cAAc,UAChC8iB,EAAMxa,EAAOrI,WAAW,MAC5BgX,EAAIrD,IAAM,oEAEV,IACEkP,EAAIiF,UAAU9Q,EAAK,EAAG,GACtB3O,EAAO+gB,YACP,MAAO/sB,GACP,OAAO,EAGT,OAAO,GAgBT2Z,GAAatb,UAAU2uB,UAAY,WACjC,OAAQ/jB,YAAYgkB,OAA4F9pB,QAAQP,UAA3FO,QAAQJ,OAAO,IAAIL,MAAM,yDAGxDiX,GAAatb,UAAU6uB,iBAAmB,SAAU5V,GAClD,MAAO,gCAAgC9O,KAAK8O,GAAO5W,KAAKysB,SAASzsB,KAAK0sB,kBAAkB9V,IAAQ5W,KAAK0sB,kBAAkB9V,IAGzHqC,GAAatb,UAAU+uB,kBAAoB,SAAU9V,GACnD,OAAOA,EAAI+B,QAAQ,mCAAoC,KAGzDM,GAAatb,UAAU0b,SAAW,SAAUzC,GAC1C,MAAO,yBAAyB9O,KAAK8O,IAGvCqC,GAAatb,UAAUgvB,aAAe,SAAUzqB,GAC9C,IAAIS,EAAO3C,KACX,OAAO,SAAU4sB,EAASnkB,GACxB,IAAI6C,EAAS,IAAI/C,YAAYgkB,OAAOM,aAAa,KACjDlqB,EAAKyV,MAAQ9M,EAAOwhB,cACpBxhB,EAAOyhB,SAAStkB,EAAQgB,OAAOujB,UAAUvkB,EAAQkB,QAAQsjB,IAAI1kB,YAAYgkB,OAAOW,KAAKC,iBAAiBP,EAASnkB,IAAU2kB,YACzHlrB,EAAQoJ,EAAOwhB,iBAInB7T,GAAatb,UAAU8uB,SAAW,SAAUY,GAC1C,MAA8B,mBAAhBzvB,EAAO0vB,KAAsB1vB,EAAO0vB,KAAKD,GAAOZ,GAASY,IAiEzEjU,GAAiBzb,UAAYgD,OAAOoC,OAAOkW,GAAatb,WAMxD2kB,GAAc3kB,UAAYgD,OAAOoC,OAAO0X,EAAc9c,WAEtD2kB,GAAc3kB,UAAUkqB,mBAAqB,WAC3C7nB,KAAKmK,KAAK1I,KAAOzB,KAAKmf,UAAUnf,KAAK2b,OAAOC,IAAI,mBAGlD0G,GAAc3kB,UAAUwhB,UAAY,SAAUA,GAC5C,IAAIS,EAAO5f,KAAKmK,KAAK1I,KAErB,OAAQ0d,GACN,IAAK,YACH,OAAOS,EAAK3X,cAEd,IAAK,aACH,OAAO2X,EAAKjH,QAAQ,2BAA4B4U,IAElD,IAAK,YACH,OAAO3N,EAAKtD,cAEd,QACE,OAAOsD,IAebzG,GAAwBxb,UAAYgD,OAAOoC,OAAO8T,EAAkBlZ,WAuCpE2L,GAAe3L,UAAYgD,OAAOoC,OAAO0nB,GAAS9sB,WAElD2L,GAAe3L,UAAU6vB,aAAe,SAAUC,GAEhD,OADAztB,KAAK8lB,IAAI2H,UAAmC,WAAvBnwB,QAAQmwB,IAA6BA,EAAU1gB,QAAU0gB,EAAU7sB,WAAa6sB,EAC9FztB,KAAK8lB,KAGdxc,GAAe3L,UAAUupB,UAAY,SAAU/J,EAAMH,EAAKvT,EAAOE,EAAQkD,GACvE7M,KAAKwtB,aAAa3gB,GAAO6gB,SAASvQ,EAAMH,EAAKvT,EAAOE,IAGtDL,GAAe3L,UAAU4pB,OAAS,SAAUpK,EAAMH,EAAKzG,EAAM1J,GAC3D7M,KAAKwtB,aAAa3gB,GAClB7M,KAAK8lB,IAAI6H,YACT3tB,KAAK8lB,IAAI8H,IAAIzQ,EAAO5G,EAAO,EAAGyG,EAAMzG,EAAO,EAAGA,EAAO,EAAG,EAAa,EAAV5R,KAAKkpB,IAAQ,GACxE7tB,KAAK8lB,IAAIgI,YACT9tB,KAAK8lB,IAAIiI,QAGXzkB,GAAe3L,UAAU2pB,aAAe,SAAUnK,EAAMH,EAAKzG,EAAM1J,EAAOmhB,EAAQC,GAChFjuB,KAAKunB,OAAOpK,EAAMH,EAAKzG,EAAM1J,GAC7B7M,KAAK8lB,IAAIoI,YAAcD,EAAYrtB,WACnCZ,KAAK8lB,IAAIkI,UAGX1kB,GAAe3L,UAAUwtB,UAAY,SAAUgD,EAAOthB,GACpD7M,KAAKmuB,MAAMA,GACXnuB,KAAKwtB,aAAa3gB,GAAOkhB,QAG3BzkB,GAAe3L,UAAUywB,OAAS,SAAUvH,GAC1C,GAA+B,OAA3BA,EAAewH,QAAkB,CACnCruB,KAAKsuB,SAASvD,UAAUlE,EAAezO,MAAO,EAAG,GAEjD,IACEpY,KAAKsuB,SAASC,aAAa,EAAG,EAAG,EAAG,GACpC1H,EAAewH,SAAU,EACzB,MAAO/uB,GACPU,KAAKsuB,SAAWzwB,EAASmF,cAAc,UAAUC,WAAW,MAC5D4jB,EAAewH,SAAU,GAI7B,OAAOxH,EAAewH,SAGxB/kB,GAAe3L,UAAUotB,UAAY,SAAUlE,EAAgB2H,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACpF/uB,KAAKouB,OAAOvH,KAAmB7mB,KAAKyI,QAAQQ,YAC/CjJ,KAAK8lB,IAAIiF,UAAUlE,EAAezO,MAAOoW,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,IAIzEzlB,GAAe3L,UAAUmd,KAAO,SAAUkU,EAAQ9W,EAAUyT,GAC1D3rB,KAAK8lB,IAAIK,OACT6I,EAAOhX,OAAOiX,IAAYtX,QAAQ,SAAUwW,GAC1CnuB,KAAKmuB,MAAMA,GAAOrT,QACjB9a,MACHkY,EAAS1Y,KAAKmsB,GACd3rB,KAAK8lB,IAAIC,WAGXzc,GAAe3L,UAAUwwB,MAAQ,SAAUA,GAUzC,OATAnuB,KAAK8lB,IAAI6H,YACTQ,EAAMxW,QAAQ,SAAUuX,EAAOroB,GACZ,SAAbqoB,EAAM,GACRlvB,KAAK8lB,IAAIqJ,KAAKC,MAAMpvB,KAAK8lB,IAAKoJ,EAAMlnB,MAAM,IAE1ChI,KAAK8lB,IAAc,IAAVjf,EAAc,SAAWqoB,EAAM,GAAK,MAAME,MAAMpvB,KAAK8lB,IAAKoJ,EAAMlnB,MAAM,KAEhFhI,MACHA,KAAK8lB,IAAIgI,YACF9tB,KAAK8lB,KAGdxc,GAAe3L,UAAU0pB,KAAO,SAAUxa,EAAO+U,EAAOyN,EAASzS,EAAQrG,EAAMD,GAC7EtW,KAAKwtB,aAAa3gB,GAAOwa,KAAO,CAACzF,EAAOyN,EAASzS,EAAQrG,EAAMD,GAAQ7Q,KAAK,KAAKD,MAAM,KAAK,IAG9F8D,GAAe3L,UAAU4qB,WAAa,SAAU1b,EAAOyR,EAASC,EAASC,GACvExe,KAAKsvB,YAAY,cAAeziB,EAAMjM,YAAY0uB,YAAY,gBAAiBhR,GAASgR,YAAY,gBAAiB/Q,GAAS+Q,YAAY,aAAc9Q,IAG1JlV,GAAe3L,UAAU6qB,YAAc,WACrCxoB,KAAKsvB,YAAY,cAAe,kBAGlChmB,GAAe3L,UAAUuoB,WAAa,SAAU/K,GAC9Cnb,KAAK8lB,IAAIyJ,YAAcpU,GAGzB7R,GAAe3L,UAAUyoB,aAAe,SAAUjH,GAChDnf,KAAK8lB,IAAI0J,UAAUrQ,EAAU3F,OAAO,GAAI2F,EAAU3F,OAAO,IACzDxZ,KAAK8lB,IAAI3G,UAAUiQ,MAAMpvB,KAAK8lB,IAAK3G,EAAUH,QAC7Chf,KAAK8lB,IAAI0J,WAAWrQ,EAAU3F,OAAO,IAAK2F,EAAU3F,OAAO,KAG7DlQ,GAAe3L,UAAU2xB,YAAc,SAAUhS,EAAU3X,GAKzD,OAJI3F,KAAKyvB,UAAUnS,KAAc3X,IAC/B3F,KAAKyvB,UAAUnS,GAAYtd,KAAK8lB,IAAIxI,GAAY3X,GAG3C3F,MAGTsJ,GAAe3L,UAAUiiB,KAAO,SAAUA,EAAMzC,EAAMD,GACpDld,KAAK8lB,IAAI4J,SAAS9P,EAAMzC,EAAMD,IAGhC5T,GAAe3L,UAAU8tB,sBAAwB,SAAU5E,EAAgB8I,EAAoBpZ,EAAMI,EAAQwG,EAAMH,EAAKvT,EAAOE,EAAQ+gB,GACrI,IAAIyD,EAAQ,CAAC,CAAC,OAAQxpB,KAAKgH,MAAMwR,GAAOxY,KAAKgH,MAAMqR,IAAO,CAAC,OAAQrY,KAAKgH,MAAMwR,EAAO1T,GAAQ9E,KAAKgH,MAAMqR,IAAO,CAAC,OAAQrY,KAAKgH,MAAMwR,EAAO1T,GAAQ9E,KAAKgH,MAAMhC,EAASqT,IAAO,CAAC,OAAQrY,KAAKgH,MAAMwR,GAAOxY,KAAKgH,MAAMhC,EAASqT,KAC5Nhd,KAAK8a,KAAK,CAACqT,GAAQ,WACjBnuB,KAAK0rB,uBAAuB7E,EAAgB8I,EAAoBpZ,EAAMI,EAAQ+T,EAAW,GAAIA,EAAW,KACvG1qB,OAGLsJ,GAAe3L,UAAU+tB,uBAAyB,SAAU7E,EAAgB8I,EAAoBpZ,EAAMI,EAAQiZ,EAAYC,GACxH,IAAIvR,EAAU3Z,KAAKgH,MAAMgL,EAAOwG,KAAOwS,EAAmBxS,KAAOyS,GAC7DrR,EAAU5Z,KAAKgH,MAAMgL,EAAOqG,IAAM2S,EAAmB3S,IAAM6S,GAC/D7vB,KAAKwtB,aAAaxtB,KAAK8lB,IAAIgK,cAAc9vB,KAAK+vB,YAAYlJ,EAAgBtQ,GAAO,WACjFvW,KAAK8lB,IAAI0J,UAAUlR,EAASC,GAC5Bve,KAAK8lB,IAAIiI,OACT/tB,KAAK8lB,IAAI0J,WAAWlR,GAAUC,IAGhCjV,GAAe3L,UAAU6tB,yBAA2B,SAAUD,EAAe5U,GAC3E,GAAI4U,aAAyBrS,EAAyB,CACpD,IAAI8W,EAAWhwB,KAAK8lB,IAAImK,qBAAqBtZ,EAAOwG,KAAOxG,EAAOlN,MAAQ8hB,EAAc2E,GAAIvZ,EAAOqG,IAAMrG,EAAOhN,OAAS4hB,EAAc4E,GAAIxZ,EAAOwG,KAAOxG,EAAOlN,MAAQ8hB,EAAc6E,GAAIzZ,EAAOqG,IAAMrG,EAAOhN,OAAS4hB,EAAc8E,IACrO9E,EAAc+E,WAAW3Y,QAAQ,SAAU4Y,GACzCP,EAASQ,aAAaD,EAAUE,KAAMF,EAAU1jB,MAAMjM,cAExDZ,KAAKknB,UAAUvQ,EAAOwG,KAAMxG,EAAOqG,IAAKrG,EAAOlN,MAAOkN,EAAOhN,OAAQqmB,KAIzE1mB,GAAe3L,UAAUoyB,YAAc,SAAUlJ,EAAgBtQ,GAC/D,IAAI6B,EAAQyO,EAAezO,MAE3B,GAAIA,EAAM3O,QAAU8M,EAAK9M,OAAS2O,EAAMzO,SAAW4M,EAAK5M,OACtD,OAAOyO,EAGT,IACI9M,EAASzN,EAASmF,cAAc,UAKpC,OAJAsI,EAAO7B,MAAQ8M,EAAK9M,MACpB6B,EAAO3B,OAAS4M,EAAK5M,OACf2B,EAAOrI,WAAW,MACpB8nB,UAAU3S,EAAO,EAAG,EAAGA,EAAM3O,MAAO2O,EAAMzO,OAAQ,EAAG,EAAG4M,EAAK9M,MAAO8M,EAAK5M,QACtE2B,QAh8GN1N,GAAUiF,OAAO/E,SAASyK,YAAc,WACvC,OAAO9F,QAAQJ,OAAO,sBAknB1B,SAAS2H,EAAaG,EAAMJ,EAAWtB,EAAS4B,EAAaC,GAC3D,IA4DqBomB,EA5DjBzlB,EAAelB,EAAUE,cACzBuO,EAAU,IAAIsT,GAAQ7gB,EAAapN,UACnC8yB,EAAc,IAAI1Z,EAAYxO,EAAS+P,GACvC7B,EAAS4I,EAAUpV,GACnBV,EAAyB,SAAjBhB,EAAQ1D,KAAkBsF,GAwDjBqmB,EAxD6CzlB,EAAapN,SAyDxE8G,KAAKisB,IAAIjsB,KAAKisB,IAAIF,EAAIrP,KAAKwP,YAAaH,EAAIxmB,gBAAgB2mB,aAAclsB,KAAKisB,IAAIF,EAAIrP,KAAKyP,YAAaJ,EAAIxmB,gBAAgB4mB,aAAcnsB,KAAKisB,IAAIF,EAAIrP,KAAK0P,YAAaL,EAAIxmB,gBAAgB6mB,eAxDjMpnB,EAA0B,SAAjBlB,EAAQ1D,KAAkBuF,EA2DzC,SAAwBomB,GACtB,OAAO/rB,KAAKisB,IAAIjsB,KAAKisB,IAAIF,EAAIrP,KAAK2P,aAAcN,EAAIxmB,gBAAgB8mB,cAAersB,KAAKisB,IAAIF,EAAIrP,KAAK4P,aAAcP,EAAIxmB,gBAAgB+mB,cAAetsB,KAAKisB,IAAIF,EAAIrP,KAAK6P,aAAcR,EAAIxmB,gBAAgBgnB,eA5DpJC,CAAelmB,EAAapN,UAC9EwL,EAAW,IAAIZ,EAAQY,SAASI,EAAOE,EAAQgnB,EAAaloB,EAAS5K,GAEzE,OADa,IAAIiiB,EAAW3V,EAAMd,EAAUmP,EAASmY,EAAaloB,GACpD2R,MAAMlb,KAAK,WAEvB,IAAIoM,EAyBJ,OA1BAV,EAAI,sBAIFU,EADmB,SAAjB7C,EAAQ1D,KACDqsB,EAAK/nB,EAASiC,OAAQ,CAC7B7B,MAAOJ,EAASiC,OAAO7B,MACvBE,OAAQN,EAASiC,OAAO3B,OACxBqT,IAAK,EACLG,KAAM,EACNvd,EAAG,EACHO,EAAG,IAEIgK,IAASc,EAAapN,SAASwjB,MAAQlX,IAASc,EAAapN,SAASqM,iBAAqC,MAAlBzB,EAAQ6C,OACjGjC,EAASiC,OAET8lB,EAAK/nB,EAASiC,OAAQ,CAC7B7B,MAAwB,MAAjBhB,EAAQgB,MAAgBhB,EAAQgB,MAAQkN,EAAOlN,MACtDE,OAA0B,MAAlBlB,EAAQkB,OAAiBlB,EAAQkB,OAASgN,EAAOhN,OACzDqT,IAAKrG,EAAOqG,IACZG,KAAMxG,EAAOwG,KACbvd,EAAGqL,EAAaP,YAChBvK,EAAG8K,EAAaN,cASxB,SAA0BZ,EAAWtB,GAC/BA,EAAQS,kBACVa,EAAUqa,WAAWwD,YAAY7d,GACjCa,EAAI,yBARJymB,CAAiBtnB,EAAWtB,GACrB6C,IAWX,SAAS8lB,EAAK9lB,EAAQqL,GACpB,IAAI2a,EAAgBzzB,EAASmF,cAAc,UACvCotB,EAAKzrB,KAAKoH,IAAIT,EAAO7B,MAAQ,EAAG9E,KAAKisB,IAAI,EAAGja,EAAOwG,OACnDoU,EAAK5sB,KAAKoH,IAAIT,EAAO7B,MAAO9E,KAAKisB,IAAI,EAAGja,EAAOwG,KAAOxG,EAAOlN,QAC7D4mB,EAAK1rB,KAAKoH,IAAIT,EAAO3B,OAAS,EAAGhF,KAAKisB,IAAI,EAAGja,EAAOqG,MACpDwU,EAAK7sB,KAAKoH,IAAIT,EAAO3B,OAAQhF,KAAKisB,IAAI,EAAGja,EAAOqG,IAAMrG,EAAOhN,SAMjE,OALA2nB,EAAc7nB,MAAQkN,EAAOlN,MAC7B6nB,EAAc3nB,OAASgN,EAAOhN,OAC9BiB,EAAI,sBAAuB,QAAS+L,EAAOwG,KAAM,OAAQxG,EAAOqG,IAAK,SAAUuU,EAAKnB,EAAI,UAAWoB,EAAKnB,GACxGzlB,EAAI,4BAA6B+L,EAAOlN,MAAO,aAAckN,EAAOhN,OAAQ,UAAWymB,EAAI,QAASC,GACpGiB,EAAcruB,WAAW,MAAM8nB,UAAUzf,EAAQ8kB,EAAIC,EAAIkB,EAAKnB,EAAIoB,EAAKnB,EAAI1Z,EAAO/W,EAAG+W,EAAOxW,EAAGoxB,EAAKnB,EAAIoB,EAAKnB,GACtGiB,EAmCT,SAAS9mB,EAAkBa,EAAeomB,EAAmBhoB,EAAOE,EAAQlB,EAAS7I,EAAGO,IAsGxF,SAA6BkL,GAC3B,GAAGrD,MAAMxI,KAAK6L,EAAcqmB,iBAAiB,UAAW,GAAG/Z,QAAQ,SAAUrM,GAC3EA,EAAOlB,aAAahC,EAAiC,UAAYC,OAvGnEspB,CAAoBtmB,GACpB,IAAInB,EArBGrM,EAAS+zB,cAAgB/zB,EAAS+zB,cAAgB,EAI3D,SAASC,EAAa1nB,EAAMhB,GAI1B,IAHA,IAAI2oB,EAA0B,IAAlB3nB,EAAK/G,SAAiBvF,EAASyD,eAAe6I,EAAK4nB,WAAa5nB,EAAKma,WAAU,GACvF0N,EAAQ7nB,EAAKwd,WAEVqK,IACqB,IAAtB7oB,GAAiD,IAAnB6oB,EAAM5uB,UAAqC,WAAnB4uB,EAAMza,UAC9Dua,EAAMxQ,YAAYuQ,EAAaG,EAAO7oB,IAGxC6oB,EAAQA,EAAMC,YAGhB,OAAOH,EAKyBD,CAAaxmB,EAAcnB,gBAAiBzB,EAAQU,mBAAqBkC,EAAcnB,gBAAgBoa,WAAU,GAC7Iva,EAAY0nB,EAAkBzuB,cAAc,UAYhD,OAXA+G,EAAUsY,UAAY,wBACtBtY,EAAU6X,MAAMsQ,WAAa,SAC7BnoB,EAAU6X,MAAM9D,SAAW,QAC3B/T,EAAU6X,MAAMzE,KAAO,WACvBpT,EAAU6X,MAAM5E,IAAM,MACtBjT,EAAU6X,MAAMuQ,OAAS,IACzBpoB,EAAUN,MAAQA,EAClBM,EAAUJ,OAASA,EACnBI,EAAUqoB,UAAY,KAEtBX,EAAkBpQ,KAAKC,YAAYvX,GAC5B,IAAItH,QAAQ,SAAUP,GAC3B,IAAImwB,EAAgBtoB,EAAUE,cAAcpM,SAC5Cy0B,EAAgBjnB,EAAcnB,gBAAiBA,EAAiB,YAChEooB,EAAgBjnB,EAAcnB,gBAAiBA,EAAiB,UAKhEH,EAAUE,cAAcsoB,OAASxoB,EAAUwoB,OAAS,WAClD,IAAIC,EAAWC,YAAY,WACrBJ,EAAchR,KAAKoB,WAAW5iB,OAAS,KAmFnD,SAA6BwL,EAAegnB,GAC1C,GAAGrqB,MAAMxI,KAAK6L,EAAcqmB,iBAAiB,IAAMtpB,EAAkC,KAAM,GAAGuP,QAAQ,SAAUrM,GAC9G,IACE,IAAIonB,EAAeL,EAActnB,cAAc,IAAM3C,EAAkC,KAAOkD,EAAOwQ,aAAa1T,GAAmC,MAEjJsqB,IACFA,EAAajpB,MAAQ6B,EAAO7B,MAC5BipB,EAAa/oB,OAAS2B,EAAO3B,OAC7B+oB,EAAazvB,WAAW,MAAM0vB,aAAarnB,EAAOrI,WAAW,MAAMsrB,aAAa,EAAG,EAAGjjB,EAAO7B,MAAO6B,EAAO3B,QAAS,EAAG,IAEzH,MAAOrK,GACPsL,EAAI,qCAAsCU,EAAQhM,GAGpDgM,EAAON,gBAAgB5C,KAhGjBwqB,CAAoBvnB,EAAegnB,GACnCQ,cAAcL,GAEO,SAAjB/pB,EAAQ1D,MACVgF,EAAUE,cAAc6oB,SAASlzB,EAAGO,GAGtC+B,EAAQ6H,KAET,KAGLsoB,EAAcU,OACdV,EAAcW,MAAM,gCAkBxB,SAA4B3nB,EAAezL,EAAGO,IACxCkL,EAAcZ,aAAgB7K,IAAMyL,EAAcZ,YAAYC,aAAevK,IAAMkL,EAAcZ,YAAYE,aAC/GU,EAAcZ,YAAYqoB,SAASlzB,EAAGO,GAlBtC8yB,CAAmB5nB,EAAezL,EAAGO,GACrCkyB,EAAc9N,cAA2C,IAA9B9b,EAAQU,kBAA6BkpB,EAAca,UAAUhpB,GAoF5F,SAASipB,EAAkBxX,GACzB,GAAG3T,MAAMxI,KAAKmc,EAAO8G,WAAY,GAAGzK,OAAOob,GAAezb,QAAQ,SAAUxN,GACrD,WAAjBA,EAAKuV,QACP/D,EAAOiM,YAAYzd,GAEnBgpB,EAAkBhpB,KAGtB,OAAOwR,EA5FsGwX,CAAkBd,EAAca,UAAUhpB,IAAmBmoB,EAAcnoB,iBACtLmoB,EAAcgB,UAIlB,SAASf,EAAgBz0B,EAAUi0B,EAAOva,GAKxC,IAJA,IAAI+b,EAAgBz1B,EAAS01B,qBAAqBhc,GAC9Cic,EAAc1B,EAAMyB,qBAAqBhc,GACzCkc,EAAQH,EAAczzB,OAEjBO,EAAI,EAAGA,EAAIqzB,EAAOrzB,IACzBozB,EAAYpzB,GAAGuF,MAAQ2tB,EAAclzB,GAAGuF,MAU5C,SAASkE,EAAgB+M,EAAKpN,EAAO3L,EAAU4L,EAAOE,EAAQlB,GAC5D,OAAO,IAAIirB,GAAM9c,EAAKpN,EAAO5L,EAAOC,UAAUqB,KAAKy0B,EAAiB/c,IAAM1X,KAAK,SAAUwxB,GACvF,OAAOlmB,EAAkBkmB,EAAK7yB,EAAU4L,EAAOE,EAAQlB,EAAS,EAAG,KAIvE,SAASkrB,EAAiB/c,GACxB,OAAO,SAAUgd,GACf,IACIlD,EADAmD,EAAS,IAAIC,UAGjB,IACEpD,EAAMmD,EAAOE,gBAAgBH,EAAM,aACnC,MAAOt0B,GACPsL,EAAI,+DACJ8lB,EAAM7yB,EAASm2B,eAAeC,mBAAmB,IAEjD,IACEvD,EAAIqC,OACJrC,EAAIsC,MAAMY,GACVlD,EAAI2C,QACJ,MAAOa,GACPtpB,EAAI,mFACJ8lB,EAAIrP,KAAKD,UAAYwS,GAIzB,IAAIx1B,EAAIsyB,EAAI3lB,cAAc,QAE1B,IAAK3M,IAAMA,EAAE0L,KAAKqqB,KAAM,CACtB,IAAIzwB,EAAOgtB,EAAI1tB,cAAc,QAC7BU,EAAKoG,KAAO8M,EACZ8Z,EAAI0D,KAAK7J,aAAa7mB,EAAMgtB,EAAI0D,KAAKzM,YAGvC,OAAO+I,GAuCX,SAAS0C,EAAcjpB,GACrB,OAAOA,EAAK/G,WAAaqY,KAAK+F,aAWhC,SAAShW,EAAM7F,GACb3F,KAAK9B,EAAI,EACT8B,KAAKpB,EAAI,EACToB,KAAK5B,EAAI,EACT4B,KAAK7B,EAAI,KACI6B,KAAK8L,UAAUnG,IAAU3F,KAAK4M,WAAWjH,IAAU3F,KAAKwM,IAAI7G,IAAU3F,KAAK2M,KAAKhH,IAAU3F,KAAKqM,KAAK1G,IAAU3F,KAAKiM,KAAKtG,GAmQvI,SAASqT,EAAoBpC,GAI3B,GAHA5W,KAAK4W,IAAMA,EACXhM,EAAI,0BAA2BgM,IAE1B5W,KAAK8Z,UAAY9Z,KAAKoY,MAAO,CAChCxN,EAAI,kCACJoO,EAAoBrb,UAAUya,MAAQ,IAAIkS,MAC1C,IAAIlS,EAAQpY,KAAKoY,MACjBY,EAAoBrb,UAAUmc,QAAU,IAAIrX,QAAQ,SAAUP,EAASG,GACrE+V,EAAMma,OAASrwB,EACfkW,EAAMic,QAAUhyB,EAChB+V,EAAMxB,IA/bH,kFAicoB,IAAnBwB,EAAMkc,UACRpyB,EAAQkW,MAMhB,SAAS5B,EAAKF,EAAQC,GACpB,IAIIqS,EACAE,EALA/e,EAAYlM,EAASmF,cAAc,OACnCiX,EAAMpc,EAASmF,cAAc,OAC7BuxB,EAAO12B,EAASmF,cAAc,QAIlC+G,EAAU6X,MAAMsQ,WAAa,SAC7BnoB,EAAU6X,MAAM4S,WAAale,EAC7BvM,EAAU6X,MAAM6S,SAAWle,EAC3BxM,EAAU6X,MAAM8S,OAAS,EACzB3qB,EAAU6X,MAAM+S,QAAU,EAC1B92B,EAASwjB,KAAKC,YAAYvX,GAC1BkQ,EAAIrD,IArdG,iFAsdPqD,EAAIxQ,MAAQ,EACZwQ,EAAItQ,OAAS,EACbsQ,EAAI2H,MAAM8S,OAAS,EACnBza,EAAI2H,MAAM+S,QAAU,EACpB1a,EAAI2H,MAAMgT,cAAgB,WAC1BL,EAAK3S,MAAM4S,WAAale,EACxBie,EAAK3S,MAAM6S,SAAWle,EACtBge,EAAK3S,MAAM8S,OAAS,EACpBH,EAAK3S,MAAM+S,QAAU,EACrBJ,EAAKjT,YAAYzjB,EAASyD,eAnBT,gBAoBjByI,EAAUuX,YAAYiT,GACtBxqB,EAAUuX,YAAYrH,GACtB2O,EAAW3O,EAAI4a,UAAYN,EAAKM,UAAY,EAC5C9qB,EAAU6d,YAAY2M,GACtBxqB,EAAUuX,YAAYzjB,EAASyD,eAxBd,gBAyBjByI,EAAU6X,MAAMkT,WAAa,SAC7B7a,EAAI2H,MAAMgT,cAAgB,QAC1B9L,EAAS7O,EAAI4a,UAAY9qB,EAAU8qB,UAAY,EAC/Ch3B,EAASwjB,KAAKuG,YAAY7d,GAC1B/J,KAAK4oB,SAAWA,EAChB5oB,KAAK6oB,UAAY,EACjB7oB,KAAK8oB,OAASA,EAGhB,SAAS1S,IACPpW,KAAKyB,KAAO,GAWd,SAASgV,EAAe1M,EAAWgrB,EAAYtsB,GAC7CzI,KAAKoY,MAAQ,KACbpY,KAAK4W,IAAM7M,EACX,IAAIpH,EAAO3C,KACP2W,EAAS4I,EAAUxV,GACvB/J,KAAK8Z,SAAYib,EAA8D,IAAItyB,QAAQ,SAAUP,GACtD,gBAAzC6H,EAAUE,cAAcpM,SAASm3B,KAA6E,MAApDjrB,EAAUE,cAAcpM,SAASqM,gBAC7FH,EAAUE,cAAcsoB,OAASxoB,EAAUwoB,OAAS,WAClDrwB,EAAQ6H,IAGV7H,EAAQ6H,KANkB/J,KAAK0W,UAAUjO,EAAQe,MAAOmN,EAAQlO,IAQhEvJ,KAAK,SAAU6K,GACjB,OAAOxB,YAAYwB,EAAUE,cAAcpM,SAASqM,gBAAiB,CACnEnF,KAAM,OACN0E,MAAOM,EAAUN,MACjBE,OAAQI,EAAUJ,OAClBH,MAAOf,EAAQe,MACfL,kBAAmBV,EAAQU,kBAC3BD,gBAAiBT,EAAQS,gBACzBD,WAAYR,EAAQQ,WACpBG,aAAcX,EAAQW,aAAe,MAEtClK,KAAK,SAAUoM,GAChB,OAAO3I,EAAKyV,MAAQ9M,IASxB,SAASuL,EAAkByB,GACzBtY,KAAK4W,IAAM0B,EAAU3S,MACrB3F,KAAKswB,WAAa,GAClBtwB,KAAK+E,KAAO,KACZ/E,KAAKkwB,GAAK,GACVlwB,KAAKmwB,GAAK,GACVnwB,KAAKowB,GAAK,GACVpwB,KAAKqwB,GAAK,GACVrwB,KAAK8Z,QAAUrX,QAAQP,SAAQ,GAQjC,SAASwW,EAAe9B,EAAKiC,GAC3B7Y,KAAK4W,IAAMA,EACX5W,KAAKoY,MAAQ,IAAIkS,MACjB,IAAI3nB,EAAO3C,KACXA,KAAKquB,QAAU,KACfruB,KAAK8Z,QAAU,IAAIrX,QAAQ,SAAUP,EAASG,GAC5CM,EAAKyV,MAAMma,OAASrwB,EACpBS,EAAKyV,MAAMic,QAAUhyB,EAEjBwW,IACFlW,EAAKyV,MAAM+T,YAAc,aAG3BxpB,EAAKyV,MAAMxB,IAAMA,GAEW,IAAxBjU,EAAKyV,MAAMkc,UACbpyB,EAAQS,EAAKyV,SAKnB,SAASnB,EAAYxO,EAAS+P,GAC5BxY,KAAK2I,KAAO,KACZ3I,KAAKyI,QAAUA,EACfzI,KAAKwY,QAAUA,EACfxY,KAAKwZ,OAASxZ,KAAKuZ,UAAU3b,EAAOq3B,SAASnrB,MAiJ/C,SAASoP,EAAwBZ,GAC/BzB,EAAkBuY,MAAMpvB,KAAMsC,WAC9BtC,KAAK+E,KAAO/E,KAAK8W,MAAMC,OACvB,IAAIme,EAA4D,OAA7C5c,EAAUb,KAAK,GAAGvL,MAAMlM,KAAKwa,YAE5C0a,EACF5c,EAAUb,KAAK,GAAGjS,MAAM,KAAK4lB,UAAUzT,QAAQ,SAAUmG,GACvD,OAAQA,GACN,IAAK,OACH9d,KAAKkwB,GAAK,EACVlwB,KAAKowB,GAAK,EACV,MAEF,IAAK,MACHpwB,KAAKmwB,GAAK,EACVnwB,KAAKqwB,GAAK,EACV,MAEF,IAAK,QACHrwB,KAAKkwB,GAAK,EACVlwB,KAAKowB,GAAK,EACV,MAEF,IAAK,SACHpwB,KAAKmwB,GAAK,EACVnwB,KAAKqwB,GAAK,EACV,MAEF,IAAK,KACH,IAAIF,EAAKnwB,KAAKmwB,GACVD,EAAKlwB,KAAKkwB,GACdlwB,KAAKmwB,GAAKnwB,KAAKqwB,GACfrwB,KAAKkwB,GAAKlwB,KAAKowB,GACfpwB,KAAKowB,GAAKF,EACVlwB,KAAKqwB,GAAKF,IAGbnwB,OAEHA,KAAKmwB,GAAK,EACVnwB,KAAKqwB,GAAK,GAGZrwB,KAAKswB,WAAahY,EAAUb,KAAKzP,MAAMktB,EAAe,EAAI,GAAGjwB,IAAI,SAAUsrB,GACzE,IAAI4E,EAAiB5E,EAAUrkB,MAAMlM,KAAKwa,YAC1C,MAAO,CACL3N,MAAO,IAAIrB,EAAM2pB,EAAe,IAChC1E,KAA4B,MAAtB0E,EAAe,GAAaA,EAAe,GAAK,IAAM,OAE7Dn1B,MAE6B,OAA5BA,KAAKswB,WAAW,GAAGG,OACrBzwB,KAAKswB,WAAW,GAAGG,KAAO,GAG6B,OAArDzwB,KAAKswB,WAAWtwB,KAAKswB,WAAWzwB,OAAS,GAAG4wB,OAC9CzwB,KAAKswB,WAAWtwB,KAAKswB,WAAWzwB,OAAS,GAAG4wB,KAAO,GAGrDzwB,KAAKswB,WAAW3Y,QAAQ,SAAU4Y,EAAW1pB,GACpB,OAAnB0pB,EAAUE,MACZzwB,KAAKswB,WAAWtoB,MAAMnB,GAAOyS,KAAK,SAAU8b,EAAM3B,GAChD,OAAkB,OAAd2B,EAAK3E,OACPF,EAAUE,MAAQ2E,EAAK3E,KAAOzwB,KAAKswB,WAAWzpB,EAAQ,GAAG4pB,OAASgD,EAAQ,GAAKzzB,KAAKswB,WAAWzpB,EAAQ,GAAG4pB,MACnG,IAIRzwB,OAEJA,MAML,SAAS4K,IACHhN,EAAO2K,YAAYK,SAAWhL,EAAOy3B,SAAWz3B,EAAOy3B,QAAQzqB,KACjE0qB,SAAS33B,UAAUwc,KAAK3a,KAAK5B,EAAOy3B,QAAQzqB,IAAKhN,EAAOy3B,SAASjG,MAAMxxB,EAAOy3B,QAAS,CAACvsB,KAAKC,MAAQnL,EAAO2K,YAAYM,MAAQ,KAAM,gBAAgB2O,OAAO,GAAGxP,MAAMxI,KAAK8C,UAAW,KAI1L,SAASmY,EAActQ,EAAMwR,GAC3B3b,KAAKmK,KAAOA,EACZnK,KAAK2b,OAASA,EACd3b,KAAK2a,MAAQ,KACb3a,KAAK2W,OAAS,KACd3W,KAAK6a,QAAU,KACf7a,KAAK8a,KAAO,GACZ9a,KAAK+a,eAAiB,GACtB/a,KAAKsf,aAAe,KACpBtf,KAAK4a,QAAU,KACf5a,KAAKgb,eAAiB,KACtBhb,KAAK8M,OAAS,GACd9M,KAAKib,OAAS,GACdjb,KAAKkb,iBAAmB,KACxBlb,KAAK0e,cAAgB,KACrB1e,KAAKkf,gBAAkB,KACvBlf,KAAKgc,iBAAkB,EACvBhc,KAAKmb,QAAU,KAsRjB,SAASsC,EAAa9X,GACpB,OAA0C,IAAnCA,EAAM/E,WAAWwf,QAAQ,KAGlC,SAAShD,EAAiBiO,GACxB,IACI3T,EACA6d,EACAnZ,EACAoZ,EACAC,EAIAC,EACAje,EAJAyG,EAAU,GACVyX,EAAO,EACPC,EAAW,EAIXC,EAAe,WACbne,IAC8B,MAA5B6d,EAAWlZ,OAAO,EAAG,KACvBkZ,EAAaA,EAAWlZ,OAAO,EAAGkZ,EAAW11B,OAAS,IAGpD01B,GACF9d,EAAKzR,KAAKuvB,GAGgB,MAAxB7d,EAAO2E,OAAO,EAAG,KAAemZ,EAAW9d,EAAO0I,QAAQ,IAAK,GAAK,GAAK,IAC3EhE,EAAS1E,EAAO2E,OAAO,EAAGmZ,GAC1B9d,EAASA,EAAO2E,OAAOmZ,IAGzBtX,EAAQlY,KAAK,CACXoW,OAAQA,EACR1E,OAAQA,EAAOzP,cACftC,MAAO8vB,EACPhe,KAAMA,EACNW,MAAO,QAIXX,EAAO,GACPC,EAAS0E,EAASmZ,EAAaE,EAAQ,IA4EzC,OAzEAhe,EAAO,GACPC,EAAS0E,EAASmZ,EAAaE,EAAQ,GACvCpK,EAAgB7lB,MAAM,IAAImS,QAAQ,SAAU1Y,GAC1C,KAAa,IAAT02B,GA3CW,UA2CcvV,QAAQnhB,IAAM,GAA3C,CAIA,OAAQA,GACN,IAAK,IACEy2B,EAEMA,IAAUz2B,IACnBy2B,EAAQ,MAFRA,EAAQz2B,EAKV,MAEF,IAAK,IACH,GAAIy2B,EACF,MACK,GAAa,IAATC,EAGT,OAFAA,EAAO,OACPF,GAASx2B,GAGT22B,IAGF,MAEF,IAAK,IACH,GAAIF,EACF,MACK,GAAa,IAATC,EAAY,CACrB,GAAiB,IAAbC,EAIF,OAHAD,EAAO,EACPF,GAASx2B,OACT42B,IAGAD,IAIJ,MAEF,IAAK,IACH,GAAIF,EACF,MACK,GAAa,IAATC,EAET,YADAE,IAEK,GAAa,IAATF,GACQ,IAAbC,IAAmBle,EAAOxL,MAAM,UAIlC,OAHAuL,EAAKzR,KAAKuvB,GACVA,EAAa,QACbE,GAASx2B,GAQjBw2B,GAASx2B,EAEI,IAAT02B,EACFje,GAAUzY,EAEVs2B,GAAct2B,KAGlB42B,IACO3X,EAGT,SAASY,EAASuO,GAChB,OAAOA,EAAI1U,QAAQ,KAAM,IAG3B,SAASoG,EAAQsO,GACf,OAAO3Q,WAAW2Q,GAGpB,SAAS9N,EAAUpV,GACjB,GAAIA,EAAKya,sBAAuB,CAC9B,IAAIkR,EAAa3rB,EAAKya,wBAClBnb,EAA4B,MAApBU,EAAK2mB,YAAsBgF,EAAWrsB,MAAQU,EAAK2mB,YAC/D,MAAO,CACL9T,IAAK8Y,EAAW9Y,IAChBE,OAAQ4Y,EAAW5Y,QAAU4Y,EAAW9Y,IAAM8Y,EAAWnsB,OACzDsT,MAAO6Y,EAAW3Y,KAAO1T,EACzB0T,KAAM2Y,EAAW3Y,KACjB1T,MAAOA,EACPE,OAA6B,MAArBQ,EAAK8mB,aAAuB6E,EAAWnsB,OAASQ,EAAK8mB,cAIjE,MAAO,GAGT,SAAS3R,EAAanV,GACpB,IAAIwR,EAASxR,EAAK4rB,aAAezW,EAAanV,EAAK4rB,cAAgB,CACjE/Y,IAAK,EACLG,KAAM,GAER,MAAO,CACLH,IAAK7S,EAAK0qB,UAAYlZ,EAAOqB,IAC7BE,OAAQ/S,EAAK0qB,UAAY1qB,EAAK8mB,aAAetV,EAAOqB,IACpDC,MAAO9S,EAAK6rB,WAAara,EAAOwB,KAAOhT,EAAK2mB,YAC5C3T,KAAMhT,EAAK6rB,WAAara,EAAOwB,KAC/B1T,MAAOU,EAAK2mB,YACZnnB,OAAQQ,EAAK8mB,cAIjB,SAASnR,EAAWmW,EAAS5sB,EAAUmP,EAASmY,EAAaloB,GAC3DmC,EAAI,uBACJ5K,KAAKqJ,SAAWA,EAChBrJ,KAAKyI,QAAUA,EACfzI,KAAKwkB,MAAQ,KACbxkB,KAAKwY,QAAUA,EACfxY,KAAK2lB,YAAc,GACnB3lB,KAAK2a,MAAQ,IAAImI,IAAgB,EAAM,EAAGmT,EAAQ5qB,cAAe,MACjE,IAAIsQ,EAAS,IAAIlB,EAAcwb,EAAS,MAMxC,GAJIxtB,EAAQytB,YACV7sB,EAAS6d,UAAU,EAAG,EAAG7d,EAASI,MAAOJ,EAASM,OAAQ,IAAI6B,EAAM/C,EAAQytB,aAG1ED,IAAYA,EAAQ5qB,cAAcnB,gBAAiB,CAErD,IAAIisB,EAAmB,IAAI1b,EAAckB,EAAO9O,MAAM,mBAAmBjB,gBAAkBqqB,EAAQ5qB,cAAcgW,KAAO4U,EAAQ5qB,cAAcnB,gBAAiB,MAC/Jb,EAAS6d,UAAU,EAAG,EAAG7d,EAASI,MAAOJ,EAASM,OAAQwsB,EAAiBtpB,MAAM,oBAGnF8O,EAAOya,SAAWza,EAAOH,mBACzBxb,KAAK6gB,uBAAuBoV,EAAQ5qB,eACpCrL,KAAKkhB,kBAAkB+U,EAAQ5qB,eAC/BrL,KAAKmX,MAAQwK,GAAQ,CAAChG,GAAQnE,OAAOxX,KAAKuiB,YAAY5G,IAAS3D,OAAO,SAAUjO,GAC9E,OAAOA,EAAU6Q,QAAU7Q,EAAUyR,qBACpCvW,IAAIjF,KAAKuhB,kBAAmBvhB,OAC/BA,KAAK0oB,YAAc,IAAItS,EACvBxL,EAAI,wBAAyB5K,KAAKmX,MAAMtX,QACxC+K,EAAI,4BACJ5K,KAAK+f,yBACLnV,EAAI,yBACJ5K,KAAKoX,OAASuZ,EAAYzW,MAAMla,KAAKmX,MAAMa,OAAOgI,KAClDhgB,KAAKoa,MAAQpa,KAAKoX,OAAOgD,MAAMlb,KAAKib,GAAK,WAQvC,OAPAvP,EAAI,mCACJA,EAAI,8BACJ5K,KAAKijB,yBACLrY,EAAI,6BACJ5K,KAAK0jB,qBAAqB1jB,KAAK2a,OAC/B3a,KAAK6kB,MAAM7kB,KAAK2a,OAChB/P,EAAI,6BAA+B5K,KAAK2lB,YAAY9lB,OAAS,UACtD,IAAI4C,QAAQ0X,GAAK,SAAUjY,GAC3BuG,EAAQO,MAGuB,mBAAlBP,EAAQO,MACxBP,EAAQO,MAAMxJ,KAAKQ,KAAMA,KAAK2lB,YAAazjB,GAClClC,KAAK2lB,YAAY9lB,OAAS,GACnCG,KAAK4gB,YAAc,EACnB5gB,KAAKwgB,cAAcxgB,KAAK2lB,YAAazjB,IAErCA,KARAlC,KAAK2lB,YAAYhO,QAAQ3X,KAAK2gB,MAAO3gB,MACrCkC,MASDlC,QACFA,OAkCL,SAASqgB,EAActW,GACrB,OAAOA,EAAU4R,QAAU5R,EAAU4R,OAAOb,KAAKjb,OAoKnD,SAASgmB,KA0QT,SAASsB,EAAiBtM,EAASoO,EAAYjC,EAAcD,GAC3D,OAAOlM,EAAQ5V,IAAI,SAAUktB,EAAQkE,GACnC,GAAIlE,EAAO1oB,MAAQ,EAAG,CACpB,IAAI6sB,EAAKrN,EAAW9L,KAChBoZ,EAAKtN,EAAWjM,IAChBwZ,EAAKvN,EAAWxf,MAChBgtB,EAAKxN,EAAWtf,OAASkR,EAAQ,GAAGpR,MAExC,OAAQ4sB,GACN,KAAK,EAEHI,EAAK5b,EAAQ,GAAGpR,MAChB0oB,EAAO1a,KAAOif,EAAS,CACrBC,GAAI,CAACL,EAAIC,GACTK,GAAI,CAACN,EAAKE,EAAID,GACdM,GAAI,CAACP,EAAKE,EAAK3b,EAAQ,GAAGpR,MAAO8sB,EAAKE,GACtCK,GAAI,CAACR,EAAKzb,EAAQ,GAAGpR,MAAO8sB,EAAKE,IAChC1P,EAAO,GAAIA,EAAO,GAAIC,EAAa8C,aAAc9C,EAAa0C,aAAc1C,EAAa+C,cAAe/C,EAAa2C,eACxH,MAEF,KAAK,EAEH2M,EAAKrN,EAAW9L,KAAO8L,EAAWxf,MAAQoR,EAAQ,GAAGpR,MACrD+sB,EAAK3b,EAAQ,GAAGpR,MAChB0oB,EAAO1a,KAAOif,EAAS,CACrBC,GAAI,CAACL,EAAKE,EAAID,GACdK,GAAI,CAACN,EAAKE,EAAID,EAAKE,EAAK5b,EAAQ,GAAGpR,OACnCotB,GAAI,CAACP,EAAIC,EAAKE,GACdK,GAAI,CAACR,EAAIC,EAAK1b,EAAQ,GAAGpR,QACxBsd,EAAO,GAAIA,EAAO,GAAIC,EAAa+C,cAAe/C,EAAa2C,cAAe3C,EAAagD,iBAAkBhD,EAAa4C,kBAC7H,MAEF,KAAK,EAEH2M,EAAKA,EAAKtN,EAAWtf,OAASkR,EAAQ,GAAGpR,MACzCgtB,EAAK5b,EAAQ,GAAGpR,MAChB0oB,EAAO1a,KAAOif,EAAS,CACrBC,GAAI,CAACL,EAAKE,EAAID,EAAKE,GACnBG,GAAI,CAACN,EAAIC,EAAKE,GACdI,GAAI,CAACP,EAAKzb,EAAQ,GAAGpR,MAAO8sB,GAC5BO,GAAI,CAACR,EAAKE,EAAK3b,EAAQ,GAAGpR,MAAO8sB,IAChCxP,EAAO,GAAIA,EAAO,GAAIC,EAAagD,iBAAkBhD,EAAa4C,iBAAkB5C,EAAaiD,gBAAiBjD,EAAa6C,iBAClI,MAEF,KAAK,EAEH2M,EAAK3b,EAAQ,GAAGpR,MAChB0oB,EAAO1a,KAAOif,EAAS,CACrBC,GAAI,CAACL,EAAIC,EAAKE,EAAK5b,EAAQ,GAAGpR,OAC9BmtB,GAAI,CAACN,EAAIC,GACTM,GAAI,CAACP,EAAKE,EAAID,EAAK1b,EAAQ,GAAGpR,OAC9BqtB,GAAI,CAACR,EAAKE,EAAID,EAAKE,IAClB1P,EAAO,GAAIA,EAAO,GAAIC,EAAaiD,gBAAiBjD,EAAa6C,gBAAiB7C,EAAa8C,aAAc9C,EAAa0C,eAKnI,OAAOyI,IA4BX,SAAS4E,EAAen3B,EAAGO,EAAG62B,EAAIC,GAChC,IAAIC,GAAcvyB,KAAKwyB,KAAK,GAAK,GAAK,EAA1B,EACRC,EAAKJ,EAAKE,EAEdG,EAAKJ,EAAKC,EAEVI,EAAK13B,EAAIo3B,EAETO,EAAKp3B,EAAI82B,EAET,MAAO,CACLO,QAASC,EAAY,CACnB73B,EAAGA,EACHO,EAAGo3B,GACF,CACD33B,EAAGA,EACHO,EAAGo3B,EAAKF,GACP,CACDz3B,EAAG03B,EAAKF,EACRj3B,EAAGA,GACF,CACDP,EAAG03B,EACHn3B,EAAGA,IAELu3B,SAAUD,EAAY,CACpB73B,EAAGA,EACHO,EAAGA,GACF,CACDP,EAAGA,EAAIw3B,EACPj3B,EAAGA,GACF,CACDP,EAAG03B,EACHn3B,EAAGo3B,EAAKF,GACP,CACDz3B,EAAG03B,EACHn3B,EAAGo3B,IAELI,YAAaF,EAAY,CACvB73B,EAAG03B,EACHn3B,EAAGA,GACF,CACDP,EAAG03B,EACHn3B,EAAGA,EAAIk3B,GACN,CACDz3B,EAAGA,EAAIw3B,EACPj3B,EAAGo3B,GACF,CACD33B,EAAGA,EACHO,EAAGo3B,IAELK,WAAYH,EAAY,CACtB73B,EAAG03B,EACHn3B,EAAGo3B,GACF,CACD33B,EAAG03B,EAAKF,EACRj3B,EAAGo3B,GACF,CACD33B,EAAGA,EACHO,EAAGA,EAAIk3B,GACN,CACDz3B,EAAGA,EACHO,EAAGA,KAKT,SAAS8mB,EAAqBtQ,EAAQkhB,EAAchd,GAClD,IAAIjb,EAAI+W,EAAOwG,KACXhd,EAAIwW,EAAOqG,IACXvT,EAAQkN,EAAOlN,MACfE,EAASgN,EAAOhN,OAChBmuB,EAAMD,EAAa,GAAG,GACtBE,EAAMF,EAAa,GAAG,GACtBG,EAAMH,EAAa,GAAG,GACtBI,EAAMJ,EAAa,GAAG,GACtBK,EAAML,EAAa,GAAG,GACtBM,EAAMN,EAAa,GAAG,GACtBO,EAAMP,EAAa,GAAG,GACtBQ,EAAMR,EAAa,GAAG,GACtBS,EAAW7uB,EAAQuuB,EACnBO,EAAc5uB,EAASwuB,EACvBK,EAAc/uB,EAAQyuB,EACtBO,EAAa9uB,EAAS0uB,EAC1B,MAAO,CACLvO,aAAciN,EAAen3B,EAAGO,EAAG23B,EAAKC,GAAKP,QAAQkB,UAAU,IAC/DhP,aAAcqN,EAAen3B,EAAIib,EAAQ,GAAGpR,MAAOtJ,EAAI0a,EAAQ,GAAGpR,MAAO9E,KAAKisB,IAAI,EAAGkH,EAAMjd,EAAQ,GAAGpR,OAAQ9E,KAAKisB,IAAI,EAAGmH,EAAMld,EAAQ,GAAGpR,QAAQ+tB,QAAQkB,UAAU,IACrK3O,cAAegN,EAAen3B,EAAI04B,EAAUn4B,EAAG63B,EAAKC,GAAKP,SAASgB,UAAU,IAC5E/O,cAAeoN,EAAen3B,EAAI+E,KAAKoH,IAAIusB,EAAU7uB,EAAQoR,EAAQ,GAAGpR,OAAQtJ,EAAI0a,EAAQ,GAAGpR,MAAO6uB,EAAW7uB,EAAQoR,EAAQ,GAAGpR,MAAQ,EAAIuuB,EAAMnd,EAAQ,GAAGpR,MAAOwuB,EAAMpd,EAAQ,GAAGpR,OAAOiuB,SAASgB,UAAU,IACnN1O,iBAAkB+M,EAAen3B,EAAI44B,EAAar4B,EAAIo4B,EAAaL,EAAKC,GAAKR,YAAYe,UAAU,IACnG9O,iBAAkBmN,EAAen3B,EAAI+E,KAAKoH,IAAIysB,EAAa/uB,EAAQoR,EAAQ,GAAGpR,OAAQtJ,EAAIwE,KAAKoH,IAAIwsB,EAAa5uB,EAASkR,EAAQ,GAAGpR,OAAQ9E,KAAKisB,IAAI,EAAGsH,EAAMrd,EAAQ,GAAGpR,OAAQ0uB,EAAMtd,EAAQ,GAAGpR,OAAOkuB,YAAYe,UAAU,IAC/NzO,gBAAiB8M,EAAen3B,EAAGO,EAAIs4B,EAAYL,EAAKC,GAAKT,WAAWc,UAAU,IAClF7O,gBAAiBkN,EAAen3B,EAAIib,EAAQ,GAAGpR,MAAOtJ,EAAIs4B,EAAY9zB,KAAKisB,IAAI,EAAGwH,EAAMvd,EAAQ,GAAGpR,OAAQ4uB,EAAMxd,EAAQ,GAAGpR,OAAOmuB,WAAWc,UAAU,KAI5J,SAASjB,EAAY5uB,EAAO8vB,EAAcC,EAAYC,GACpD,IAAIC,EAAO,SAAc36B,EAAGC,EAAGK,GAC7B,MAAO,CACLmB,EAAGzB,EAAEyB,GAAKxB,EAAEwB,EAAIzB,EAAEyB,GAAKnB,EACvB0B,EAAGhC,EAAEgC,GAAK/B,EAAE+B,EAAIhC,EAAEgC,GAAK1B,IAI3B,MAAO,CACLoK,MAAOA,EACP8vB,aAAcA,EACdC,WAAYA,EACZC,IAAKA,EACLH,UAAW,SAAmBj6B,GAC5B,IAAIs6B,EAAKD,EAAKjwB,EAAO8vB,EAAcl6B,GAC/Bu6B,EAAKF,EAAKH,EAAcC,EAAYn6B,GACpCw6B,EAAKH,EAAKF,EAAYC,EAAKp6B,GAC3By6B,EAAOJ,EAAKC,EAAIC,EAAIv6B,GACpB06B,EAAOL,EAAKE,EAAIC,EAAIx6B,GACpB26B,EAAON,EAAKI,EAAMC,EAAM16B,GAC5B,MAAO,CAACg5B,EAAY5uB,EAAOkwB,EAAIG,EAAME,GAAO3B,EAAY2B,EAAMD,EAAMF,EAAIJ,KAE1EQ,QAAS,SAAiB7P,GACxBA,EAAWxjB,KAAK,CAAC,cAAe2yB,EAAa/4B,EAAG+4B,EAAax4B,EAAGy4B,EAAWh5B,EAAGg5B,EAAWz4B,EAAG04B,EAAIj5B,EAAGi5B,EAAI14B,KAEzGm5B,gBAAiB,SAAyB9P,GACxCA,EAAWxjB,KAAK,CAAC,cAAe4yB,EAAWh5B,EAAGg5B,EAAWz4B,EAAGw4B,EAAa/4B,EAAG+4B,EAAax4B,EAAG0I,EAAMjJ,EAAGiJ,EAAM1I,MAKjH,SAASu2B,EAAShM,EAAY6O,EAASC,EAASC,EAAQC,EAAQC,EAAQC,GACtE,IAAIpQ,EAAa,GA0BjB,OAxBI+P,EAAQ,GAAK,GAAKA,EAAQ,GAAK,GACjC/P,EAAWxjB,KAAK,CAAC,OAAQyzB,EAAO,GAAG5wB,MAAMjJ,EAAG65B,EAAO,GAAG5wB,MAAM1I,IAC5Ds5B,EAAO,GAAGJ,QAAQ7P,IAElBA,EAAWxjB,KAAK,CAAC,OAAQ0kB,EAAWiM,GAAG,GAAIjM,EAAWiM,GAAG,KAGvD6C,EAAQ,GAAK,GAAKA,EAAQ,GAAK,GACjChQ,EAAWxjB,KAAK,CAAC,OAAQ2zB,EAAO,GAAG9wB,MAAMjJ,EAAG+5B,EAAO,GAAG9wB,MAAM1I,IAC5Dw5B,EAAO,GAAGN,QAAQ7P,GAClBA,EAAWxjB,KAAK,CAAC,OAAQ4zB,EAAO,GAAGf,IAAIj5B,EAAGg6B,EAAO,GAAGf,IAAI14B,IACxDy5B,EAAO,GAAGN,gBAAgB9P,KAE1BA,EAAWxjB,KAAK,CAAC,OAAQ0kB,EAAWkM,GAAG,GAAIlM,EAAWkM,GAAG,KACzDpN,EAAWxjB,KAAK,CAAC,OAAQ0kB,EAAWmM,GAAG,GAAInM,EAAWmM,GAAG,MAGvD0C,EAAQ,GAAK,GAAKA,EAAQ,GAAK,GACjC/P,EAAWxjB,KAAK,CAAC,OAAQ0zB,EAAO,GAAGb,IAAIj5B,EAAG85B,EAAO,GAAGb,IAAI14B,IACxDu5B,EAAO,GAAGJ,gBAAgB9P,IAE1BA,EAAWxjB,KAAK,CAAC,OAAQ0kB,EAAWoM,GAAG,GAAIpM,EAAWoM,GAAG,KAGpDtN,EAGT,SAASC,EAAYD,EAAY+P,EAASC,EAASK,EAASC,EAASl6B,EAAGO,GAClEo5B,EAAQ,GAAK,GAAKA,EAAQ,GAAK,GACjC/P,EAAWxjB,KAAK,CAAC,OAAQ6zB,EAAQ,GAAGhxB,MAAMjJ,EAAGi6B,EAAQ,GAAGhxB,MAAM1I,IAC9D05B,EAAQ,GAAGR,QAAQ7P,GACnBqQ,EAAQ,GAAGR,QAAQ7P,IAEnBA,EAAWxjB,KAAK,CAAC,OAAQpG,EAAGO,KAG1Bq5B,EAAQ,GAAK,GAAKA,EAAQ,GAAK,IACjChQ,EAAWxjB,KAAK,CAAC,OAAQ8zB,EAAQ,GAAGjxB,MAAMjJ,EAAGk6B,EAAQ,GAAGjxB,MAAM1I,IAIlE,SAAS4kB,EAAehb,GACtB,OAAOA,EAAUyS,OAAO,UAAY,EAGtC,SAASkJ,EAAe3b,GACtB,OAAOA,EAAUyS,OAAO,UAAY,EAGtC,SAAS+G,GAAQxZ,GACf,OAAsC,IAA/BA,EAAUyS,OAAO,UAG1B,SAAS4I,GAAYrb,GACnB,OAAyF,IAAlF,CAAC,SAAU,eAAgB,gBAAgBqW,QAAQrW,EAAU6R,IAAI,YAG1E,SAASgK,GAAkB7b,GACzB,OAAOA,aAAqB+Y,GAG9B,SAAS0C,GAAQzb,GACf,OAAOA,EAAUI,KAAK1I,KAAK8b,OAAO1d,OAAS,EAoB7C,SAAS6iB,GAAevY,GACtB,OAAOA,EAAK/G,WAAaqY,KAAKC,WAAavR,EAAK/G,WAAaqY,KAAK+F,aASpE,SAAS8B,GAAavZ,GACpB,MAAqC,WAA9BA,EAAU6R,IAAI,YAGvB,SAAS6H,GAAW1Z,GAClB,MAAkC,SAA3BA,EAAU6R,IAAI,SAOvB,SAASsJ,GAAIhN,GACX,IAAIyT,EAAU3rB,KACd,OAAO,WACL,OAAQkY,EAASkX,MAAMzD,EAASrpB,YAIpC,SAAS0d,GAAUjW,GACjB,OAAOA,EAAUI,KAAK/G,WAAaqY,KAAK+F,aAG1C,SAASxF,GAAgBjS,GACvB,OAAqC,IAA9BA,EAAUiS,gBAGnB,SAASuE,GAAWxW,GAClB,OAAOA,EAAUI,KAAK/G,WAAaqY,KAAKC,UAa1C,SAASvB,GAAKjC,EAAUyT,GACtB,OAAO,WACL,OAAOzT,EAASkX,MAAMzD,EAASrpB,YAInC,SAAS8mB,GAAMzjB,GACb,OAAOwG,SAASxG,EAAO,IAGzB,SAAS8gB,GAAS0L,GAChB,OAAOA,EAAO1oB,MAGhB,SAASkZ,GAAkBoX,GACzB,OAAOA,EAAc5vB,KAAK/G,WAAaqY,KAAK+F,eAAgH,IAAhG,CAAC,SAAU,OAAQ,QAAS,SAAU,KAAM,UAAUpB,QAAQ2Z,EAAc5vB,KAAKoN,UAG/I,SAASoK,GAAQqY,GACf,MAAO,GAAGxiB,OAAO4X,MAAM,GAAI4K,GAqD7B,SAAStG,GAAM9c,EAAKqjB,EAAUp8B,GAC5B,IAAKo8B,EACH,OAAOx3B,QAAQJ,OAAO,uBAGxB,IAAI6V,EAAWgiB,GAAe/P,GAC1BzhB,EAAMyxB,GAAeF,EAAUrjB,EAAKsB,GACxC,OAAOiS,EAAeiQ,GAAI1xB,GAAO2xB,GAAMx8B,EAAU6K,EAAKwP,GAAUhZ,KAAK,SAAUo7B,GAC7E,OAAO7N,GAAS6N,EAASzY,WAQ7B,SAAS0Y,GAAS3jB,EAAKqjB,EAAUp8B,GAC/B,IAAIqa,EAAWgiB,GAAe7P,GAC1B3hB,EAAMyxB,GAAeF,EAAUrjB,EAAKsB,GACxC,OAAOmS,EAAoB5nB,QAAQP,QAAQwG,GAAO2xB,GAAMx8B,EAAU6K,EAAKwP,GAAUhZ,KAAK,SAAUo7B,GAC9F,MAAO,QAAUA,EAASv1B,KAAO,WAAau1B,EAASzY,UAI3D,SAASwY,GAAMx8B,EAAU6K,EAAKwP,GAC5B,OAAO,IAAIzV,QAAQ,SAAUP,EAASG,GACpC,IAAI7D,EAAIX,EAASmF,cAAc,UAE3Bw3B,EAAU,kBACL58B,EAAO2K,YAAYiB,MAAM0O,GAChCra,EAASwjB,KAAKuG,YAAYppB,IAG5BZ,EAAO2K,YAAYiB,MAAM0O,GAAY,SAAUoiB,GAC7CE,IACAt4B,EAAQo4B,IAGV97B,EAAEoY,IAAMlO,EAERlK,EAAE61B,QAAU,SAAU/0B,GACpBk7B,IACAn4B,EAAO/C,IAGTzB,EAASwjB,KAAKC,YAAY9iB,KAI9B,SAAS07B,GAAephB,GACtB,OAAQA,EAAwG,GAA9F,eAAiBhQ,KAAKC,MAAQ,OAAQmhB,EAAa,IAAMvlB,KAAKgH,MAAsB,IAAhBhH,KAAK81B,UAG7F,SAASN,GAAeF,EAAUrjB,EAAKsB,GACrC,OAAO+hB,EAAW,QAAUS,mBAAmB9jB,IAAQsB,EAASrY,OAAS,+BAAiCqY,EAAW,IAGvH,SAASa,GAAoBnC,EAAKpN,GACnB3L,EAASmF,cAAc,UAApC,IACI2F,EAAO9K,EAASmF,cAAc,KAClC2F,EAAKmB,KAAO8M,EACZA,EAAMjO,EAAKmB,KACX9J,KAAK4W,IAAMA,EACX5W,KAAKoY,MAAQ,IAAIkS,MACjB,IAAI3nB,EAAO3C,KACXA,KAAK8Z,QAAU,IAAIrX,QAAQ,SAAUP,EAASG,GAC5CM,EAAKyV,MAAM+T,YAAc,YACzBxpB,EAAKyV,MAAMma,OAASrwB,EACpBS,EAAKyV,MAAMic,QAAUhyB,EACrB,IAAIk4B,GAAS3jB,EAAKpN,EAAO3L,GAAUqB,KAAK,SAAUwJ,GAChD/F,EAAKyV,MAAMxB,IAAMlO,IACT,MAAErG,KAIhB,SAAS0e,GAAuB5W,EAAMwR,EAAQ5W,GAC5C0V,EAAcjb,KAAKQ,KAAMmK,EAAMwR,GAC/B3b,KAAKgc,iBAAkB,EACvBhc,KAAKkc,OAAkB,YAATnX,EAgChB,SAAS0lB,GAAShhB,EAAOE,EAAQyN,EAAQ3O,EAAS5K,GAChDmC,KAAKyJ,MAAQA,EACbzJ,KAAK2J,OAASA,EACd3J,KAAKoX,OAASA,EACdpX,KAAKyI,QAAUA,EACfzI,KAAKnC,SAAWA,EAwGlB,SAASilB,GAAgBD,EAAgB1H,EAAS8a,EAASta,GACzDlB,EAAcjb,KAAKQ,KAAMi2B,EAASta,GAClC3b,KAAK6rB,YAAchJ,EACnB7iB,KAAKgjB,SAAW,GAChBhjB,KAAKub,SAAW,GAChBvb,KAAKmb,SAAWnb,KAAK2b,OAAS3b,KAAK2b,OAAOhB,MAAMQ,QAAU,GAAKA,EAUjE,SAAS2Q,GAAQjuB,GACfmC,KAAK8jB,YAAc9jB,KAAK+rB,gBAAgBluB,GACxCmC,KAAK6Y,KAAO7Y,KAAKksB,WACjBlsB,KAAKyY,IAAMzY,KAAKosB,UAqDlB,SAASnT,GAAarC,GACpB5W,KAAK4W,IAAMA,EACX5W,KAAKoY,MAAQ,KACb,IAAIzV,EAAO3C,KACXA,KAAK8Z,QAAU9Z,KAAKssB,YAAYptB,KAAK,WACnC,OAAOyD,EAAK0W,SAASzC,GAAOnU,QAAQP,QAAQS,EAAK6pB,iBAAiB5V,IAAQwjB,GAAIxjB,KAC7E1X,KAAK,SAAUuZ,GAChB,OAAO,IAAIhW,QAAQ,SAAUP,GAC3BqG,YAAYgkB,OAAOoO,kBAAkBliB,EAAK9V,EAAKgqB,aAAantB,KAAKmD,EAAMT,QA2C7E,SAASuqB,GAASmO,GAChB,IAEIx6B,EAEAy6B,EACAC,EACAC,EACAC,EACAC,EACAC,EATAC,EAAQ,mEACRC,EAAMR,EAAO/6B,OASbgG,EAAS,GAEb,IAAKzF,EAAI,EAAGA,EAAIg7B,EAAKh7B,GAAK,EAKxB46B,EAJWG,EAAM/a,QAAQwa,EAAOx6B,KAIZ,GAHpBy6B,EAAWM,EAAM/a,QAAQwa,EAAOx6B,EAAI,MAGA,EACpC66B,GAAoB,GAAXJ,IAAkB,GAH3BC,EAAWK,EAAM/a,QAAQwa,EAAOx6B,EAAI,MAGO,EAC3C86B,GAAoB,EAAXJ,IAAiB,GAH1BC,EAAWI,EAAM/a,QAAQwa,EAAOx6B,EAAI,KAMlCyF,GADe,KAAbi1B,EACQj2B,OAAOC,aAAak2B,GACR,KAAbD,IAAiC,IAAdA,EAClBl2B,OAAOC,aAAak2B,EAAOC,GAE3Bp2B,OAAOC,aAAak2B,EAAOC,EAAOC,GAIhD,OAAOr1B,EAGT,SAASuT,GAAiBjP,EAAMkxB,GAC9Br7B,KAAK4W,IAAMzM,EACXnK,KAAKoY,MAAQ,KACb,IAAIzV,EAAO3C,KACXA,KAAK8Z,QAAUuhB,EAAU,IAAI54B,QAAQ,SAAUP,EAASG,GACtDM,EAAKyV,MAAQ,IAAIkS,MACjB3nB,EAAKyV,MAAMma,OAASrwB,EACpBS,EAAKyV,MAAMic,QAAUhyB,EACrBM,EAAKyV,MAAMxB,IAAM,uBAAwB,IAAI0kB,eAAgBC,kBAAkBpxB,IAEnD,IAAxBxH,EAAKyV,MAAMkc,UACbpyB,EAAQS,EAAKyV,SAEZpY,KAAKssB,YAAYptB,KAAK,WACzB,OAAO,IAAIuD,QAAQ,SAAUP,GAC3BqG,YAAYgkB,OAAOiP,iBAAiBrxB,EAAMxH,EAAKgqB,aAAantB,KAAKmD,EAAMT,QAO7E,SAASogB,GAAcnY,EAAMwR,GAC3BlB,EAAcjb,KAAKQ,KAAMmK,EAAMwR,GA2BjC,SAAS4R,GAAWzuB,EAAG28B,EAAIC,GACzB,GAAI58B,EAAEe,OAAS,EACb,OAAO47B,EAAKC,EAAGpf,cAInB,SAASnD,GAAwBb,GAC/BzB,EAAkBuY,MAAMpvB,KAAMsC,WAC9BtC,KAAK+E,KAA6B,WAAtBuT,EAAUb,KAAK,GAAkBzX,KAAK8W,MAAMC,OAAS/W,KAAK8W,MAAME,OAK9E,SAASojB,GAAI1xB,GACX,OAAO,IAAIjG,QAAQ,SAAUP,EAASG,GACpC,IAAIs5B,EAAM,IAAIvR,eACduR,EAAI5I,KAAK,MAAOrqB,GAEhBizB,EAAIpJ,OAAS,WACQ,MAAfoJ,EAAIC,OACN15B,EAAQy5B,EAAIE,cAEZx5B,EAAO,IAAIL,MAAM25B,EAAIG,cAIzBH,EAAItH,QAAU,WACZhyB,EAAO,IAAIL,MAAM,mBAGnB25B,EAAII,SAIR,SAASzyB,GAAeG,EAAOE,GAC7B8gB,GAAS2E,MAAMpvB,KAAMsC,WACrBtC,KAAKsL,OAAStL,KAAKyI,QAAQ6C,QAAUtL,KAAKnC,SAASmF,cAAc,UAE5DhD,KAAKyI,QAAQ6C,SAChBtL,KAAKsL,OAAO7B,MAAQA,EACpBzJ,KAAKsL,OAAO3B,OAASA,GAGvB3J,KAAK8lB,IAAM9lB,KAAKsL,OAAOrI,WAAW,MAClCjD,KAAKsuB,SAAWtuB,KAAKnC,SAASmF,cAAc,UAAUC,WAAW,MACjEjD,KAAK8lB,IAAIkW,aAAe,SACxBh8B,KAAKyvB,UAAY,GACjB7kB,EAAI,uCAAwCnB,EAAO,IAAKE,GAyJ1D,SAASslB,GAAW/pB,GAClB,OAAOA,EAAMrF,OAAS,KAEvBL,KAAK,GAAsB,oBAAX5B,OAAyBA,YAASK,EAA+B,oBAAbJ,SAA2BA,cAAWI","sourcesContent":["/*\n  html2canvas 0.5.0-alpha1 <http://html2canvas.hertzen.com>\n  Copyright (c) 2015 Niklas von Hertzen\n\n  Released under MIT License\n*/\n\n(function(window, document, exports, global, define, undefined){\n\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   2.0.1\n */\n\n(function(){function r(a,b){n[l]=a;n[l+1]=b;l+=2;2===l&&A()}function s(a){return\"function\"===typeof a}function F(){return function(){process.nextTick(t)}}function G(){var a=0,b=new B(t),c=document.createTextNode(\"\");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function H(){var a=new MessageChannel;a.port1.onmessage=t;return function(){a.port2.postMessage(0)}}function I(){return function(){setTimeout(t,1)}}function t(){for(var a=0;a<l;a+=2)(0,n[a])(n[a+1]),n[a]=void 0,n[a+1]=void 0;\nl=0}function p(){}function J(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function K(a,b,c){r(function(a){var e=!1,f=J(c,b,function(c){e||(e=!0,b!==c?q(a,c):m(a,c))},function(b){e||(e=!0,g(a,b))});!e&&f&&(e=!0,g(a,f))},a)}function L(a,b){1===b.a?m(a,b.b):2===a.a?g(a,b.b):u(b,void 0,function(b){q(a,b)},function(b){g(a,b)})}function q(a,b){if(a===b)g(a,new TypeError(\"You cannot resolve a promise with itself\"));else if(\"function\"===typeof b||\"object\"===typeof b&&null!==b)if(b.constructor===a.constructor)L(a,\nb);else{var c;try{c=b.then}catch(d){v.error=d,c=v}c===v?g(a,v.error):void 0===c?m(a,b):s(c)?K(a,b,c):m(a,b)}else m(a,b)}function M(a){a.f&&a.f(a.b);x(a)}function m(a,b){void 0===a.a&&(a.b=b,a.a=1,0!==a.e.length&&r(x,a))}function g(a,b){void 0===a.a&&(a.a=2,a.b=b,r(M,a))}function u(a,b,c,d){var e=a.e,f=e.length;a.f=null;e[f]=b;e[f+1]=c;e[f+2]=d;0===f&&a.a&&r(x,a)}function x(a){var b=a.e,c=a.a;if(0!==b.length){for(var d,e,f=a.b,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a.e.length=0}}function D(){this.error=\nnull}function C(a,b,c,d){var e=s(c),f,k,h,l;if(e){try{f=c(d)}catch(n){y.error=n,f=y}f===y?(l=!0,k=f.error,f=null):h=!0;if(b===f){g(b,new TypeError(\"A promises callback cannot return that same promise.\"));return}}else f=d,h=!0;void 0===b.a&&(e&&h?q(b,f):l?g(b,k):1===a?m(b,f):2===a&&g(b,f))}function N(a,b){try{b(function(b){q(a,b)},function(b){g(a,b)})}catch(c){g(a,c)}}function k(a,b,c,d){this.n=a;this.c=new a(p,d);this.i=c;this.o(b)?(this.m=b,this.d=this.length=b.length,this.l(),0===this.length?m(this.c,\nthis.b):(this.length=this.length||0,this.k(),0===this.d&&m(this.c,this.b))):g(this.c,this.p())}function h(a){O++;this.b=this.a=void 0;this.e=[];if(p!==a){if(!s(a))throw new TypeError(\"You must pass a resolver function as the first argument to the promise constructor\");if(!(this instanceof h))throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");N(this,a)}}var E=Array.isArray?Array.isArray:function(a){return\"[object Array]\"===\nObject.prototype.toString.call(a)},l=0,w=\"undefined\"!==typeof window?window:{},B=w.MutationObserver||w.WebKitMutationObserver,w=\"undefined\"!==typeof Uint8ClampedArray&&\"undefined\"!==typeof importScripts&&\"undefined\"!==typeof MessageChannel,n=Array(1E3),A;A=\"undefined\"!==typeof process&&\"[object process]\"==={}.toString.call(process)?F():B?G():w?H():I();var v=new D,y=new D;k.prototype.o=function(a){return E(a)};k.prototype.p=function(){return Error(\"Array Methods must be provided an Array\")};k.prototype.l=\nfunction(){this.b=Array(this.length)};k.prototype.k=function(){for(var a=this.length,b=this.c,c=this.m,d=0;void 0===b.a&&d<a;d++)this.j(c[d],d)};k.prototype.j=function(a,b){var c=this.n;\"object\"===typeof a&&null!==a?a.constructor===c&&void 0!==a.a?(a.f=null,this.g(a.a,b,a.b)):this.q(c.resolve(a),b):(this.d--,this.b[b]=this.h(a))};k.prototype.g=function(a,b,c){var d=this.c;void 0===d.a&&(this.d--,this.i&&2===a?g(d,c):this.b[b]=this.h(c));0===this.d&&m(d,this.b)};k.prototype.h=function(a){return a};\nk.prototype.q=function(a,b){var c=this;u(a,void 0,function(a){c.g(1,b,a)},function(a){c.g(2,b,a)})};var O=0;h.all=function(a,b){return(new k(this,a,!0,b)).c};h.race=function(a,b){function c(a){q(e,a)}function d(a){g(e,a)}var e=new this(p,b);if(!E(a))return (g(e,new TypeError(\"You must pass an array to race.\")), e);for(var f=a.length,h=0;void 0===e.a&&h<f;h++)u(this.resolve(a[h]),void 0,c,d);return e};h.resolve=function(a,b){if(a&&\"object\"===typeof a&&a.constructor===this)return a;var c=new this(p,b);\nq(c,a);return c};h.reject=function(a,b){var c=new this(p,b);g(c,a);return c};h.prototype={constructor:h,then:function(a,b){var c=this.a;if(1===c&&!a||2===c&&!b)return this;var d=new this.constructor(p),e=this.b;if(c){var f=arguments[c-1];r(function(){C(c,d,f,e)})}else u(this,d,a,b);return d},\"catch\":function(a){return this.then(null,a)}};var z={Promise:h,polyfill:function(){var a;a=\"undefined\"!==typeof global?global:\"undefined\"!==typeof window&&window.document?window:self;\"Promise\"in a&&\"resolve\"in\na.Promise&&\"reject\"in a.Promise&&\"all\"in a.Promise&&\"race\"in a.Promise&&function(){var b;new a.Promise(function(a){b=a});return s(b)}()||(a.Promise=h)}};\"function\"===typeof define&&define.amd?define(function(){return z}):\"undefined\"!==typeof module&&module.exports?module.exports=z:\"undefined\"!==typeof this&&(this.ES6Promise=z);}).call(window);\nif (window) {\n    window.ES6Promise.polyfill();\n}\n\n\nif (typeof(document) === \"undefined\" || typeof(Object.create) !== \"function\" || typeof(document.createElement(\"canvas\").getContext) !== \"function\") {\n    (window || module.exports).html2canvas = function() {\n        return Promise.reject(\"No canvas support\");\n    };\n    return;\n}\n\n/*! https://mths.be/punycode v1.3.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\tvar labels = string.split(regexSeparators);\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\nvar html2canvasNodeAttribute = \"data-html2canvas-node\";\nvar html2canvasCanvasCloneAttribute = \"data-html2canvas-canvas-clone\";\nvar html2canvasCanvasCloneIndex = 0;\nvar html2canvasCloneIndex = 0;\n\nwindow.html2canvas = function(nodeList, options) {\n    var index = html2canvasCloneIndex++;\n    options = options || {};\n    if (options.logging) {\n        window.html2canvas.logging = true;\n        window.html2canvas.start = Date.now();\n    }\n\n    options.async = typeof(options.async) === \"undefined\" ? true : options.async;\n    options.allowTaint = typeof(options.allowTaint) === \"undefined\" ? false : options.allowTaint;\n    options.removeContainer = typeof(options.removeContainer) === \"undefined\" ? true : options.removeContainer;\n    options.javascriptEnabled = typeof(options.javascriptEnabled) === \"undefined\" ? false : options.javascriptEnabled;\n    options.imageTimeout = typeof(options.imageTimeout) === \"undefined\" ? 10000 : options.imageTimeout;\n    options.renderer = typeof(options.renderer) === \"function\" ? options.renderer : CanvasRenderer;\n    options.strict = !!options.strict;\n\n    if (typeof(nodeList) === \"string\") {\n        if (typeof(options.proxy) !== \"string\") {\n            return Promise.reject(\"Proxy must be used when rendering url\");\n        }\n        var width = options.width != null ? options.width : window.innerWidth;\n        var height = options.height != null ? options.height : window.innerHeight;\n        return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\n        });\n    }\n\n    var node = ((nodeList === undefined) ? [document.documentElement] : ((nodeList.length) ? nodeList : [nodeList]))[0];\n    node.setAttribute(html2canvasNodeAttribute + index, index);\n    return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function(canvas) {\n        if (typeof(options.onrendered) === \"function\") {\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\n            options.onrendered(canvas);\n        }\n        return canvas;\n    });\n};\n\nwindow.html2canvas.punycode = this.punycode;\nwindow.html2canvas.proxy = {};\n\nfunction renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\n    return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function(container) {\n        log(\"Document cloned\");\n        var attributeName = html2canvasNodeAttribute + html2canvasIndex;\n        var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\n        document.querySelector(selector).removeAttribute(attributeName);\n        var clonedWindow = container.contentWindow;\n        var node = clonedWindow.document.querySelector(selector);\n        var oncloneHandler = (typeof(options.onclone) === \"function\") ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\n        return oncloneHandler.then(function() {\n            return renderWindow(node, container, options, windowWidth, windowHeight);\n        });\n    });\n}\n\nfunction renderWindow(node, container, options, windowWidth, windowHeight) {\n    var clonedWindow = container.contentWindow;\n    var support = new Support(clonedWindow.document);\n    var imageLoader = new ImageLoader(options, support);\n    var bounds = getBounds(node);\n    var width = options.type === \"view\" ? windowWidth : documentWidth(clonedWindow.document);\n    var height = options.type === \"view\" ? windowHeight : documentHeight(clonedWindow.document);\n    var renderer = new options.renderer(width, height, imageLoader, options, document);\n    var parser = new NodeParser(node, renderer, support, imageLoader, options);\n    return parser.ready.then(function() {\n        log(\"Finished rendering\");\n        var canvas;\n\n        if (options.type === \"view\") {\n            canvas = crop(renderer.canvas, {width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0});\n        } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\n            canvas = renderer.canvas;\n        } else {\n            canvas = crop(renderer.canvas, {width:  options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: clonedWindow.pageXOffset, y: clonedWindow.pageYOffset});\n        }\n\n        cleanupContainer(container, options);\n        return canvas;\n    });\n}\n\nfunction cleanupContainer(container, options) {\n    if (options.removeContainer) {\n        container.parentNode.removeChild(container);\n        log(\"Cleaned up container\");\n    }\n}\n\nfunction crop(canvas, bounds) {\n    var croppedCanvas = document.createElement(\"canvas\");\n    var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\n    var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\n    var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\n    var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\n    croppedCanvas.width = bounds.width;\n    croppedCanvas.height =  bounds.height;\n    log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", (x2-x1), \"height:\", (y2-y1));\n    log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \" with x\", x1, \"and y\", y1);\n    croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, x2-x1, y2-y1, bounds.x, bounds.y, x2-x1, y2-y1);\n    return croppedCanvas;\n}\n\nfunction documentWidth (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\n        Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\n        Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\n    );\n}\n\nfunction documentHeight (doc) {\n    return Math.max(\n        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\n        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\n        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\n    );\n}\n\nfunction smallImage() {\n    return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n}\n\nfunction isIE9() {\n    return document.documentMode && document.documentMode <= 9;\n}\n\n// https://github.com/niklasvh/html2canvas/issues/503\nfunction cloneNodeIE9(node, javascriptEnabled) {\n    var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\n\n    var child = node.firstChild;\n    while(child) {\n        if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\n            clone.appendChild(cloneNodeIE9(child, javascriptEnabled));\n        }\n        child = child.nextSibling;\n    }\n\n    return clone;\n}\n\nfunction createWindowClone(ownerDocument, containerDocument, width, height, options, x ,y) {\n    labelCanvasElements(ownerDocument);\n    var documentElement = isIE9() ? cloneNodeIE9(ownerDocument.documentElement, options.javascriptEnabled) : ownerDocument.documentElement.cloneNode(true);\n    var container = containerDocument.createElement(\"iframe\");\n\n    container.className = \"html2canvas-container\";\n    container.style.visibility = \"hidden\";\n    container.style.position = \"fixed\";\n    container.style.left = \"-10000px\";\n    container.style.top = \"0px\";\n    container.style.border = \"0\";\n    container.width = width;\n    container.height = height;\n    container.scrolling = \"no\"; // ios won't scroll without it\n    containerDocument.body.appendChild(container);\n\n    return new Promise(function(resolve) {\n        var documentClone = container.contentWindow.document;\n\n        cloneNodeValues(ownerDocument.documentElement, documentElement, \"textarea\");\n        cloneNodeValues(ownerDocument.documentElement, documentElement, \"select\");\n\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\n         if window url is about:blank, we can assign the url to current by writing onto the document\n         */\n        container.contentWindow.onload = container.onload = function() {\n            var interval = setInterval(function() {\n                if (documentClone.body.childNodes.length > 0) {\n                    cloneCanvasContents(ownerDocument, documentClone);\n                    clearInterval(interval);\n                    if (options.type === \"view\") {\n                        container.contentWindow.scrollTo(x, y);\n                    }\n                    resolve(container);\n                }\n            }, 50);\n        };\n\n        documentClone.open();\n        documentClone.write(\"<!DOCTYPE html><html></html>\");\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\n        restoreOwnerScroll(ownerDocument, x, y);\n        documentClone.replaceChild(options.javascriptEnabled === true ? documentClone.adoptNode(documentElement) : removeScriptNodes(documentClone.adoptNode(documentElement)), documentClone.documentElement);\n        documentClone.close();\n    });\n}\n\nfunction cloneNodeValues(document, clone, nodeName) {\n    var originalNodes = document.getElementsByTagName(nodeName);\n    var clonedNodes = clone.getElementsByTagName(nodeName);\n    var count = originalNodes.length;\n    for (var i = 0; i < count; i++) {\n        clonedNodes[i].value = originalNodes[i].value;\n    }\n}\n\nfunction restoreOwnerScroll(ownerDocument, x, y) {\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\n        ownerDocument.defaultView.scrollTo(x, y);\n    }\n}\n\nfunction loadUrlDocument(src, proxy, document, width, height, options) {\n    return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\n        return createWindowClone(doc, document, width, height, options, 0, 0);\n    });\n}\n\nfunction documentFromHTML(src) {\n    return function(html) {\n        var parser = new DOMParser(), doc;\n        try {\n            doc = parser.parseFromString(html, \"text/html\");\n        } catch(e) {\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\n            doc = document.implementation.createHTMLDocument(\"\");\n            try {\n                doc.open();\n                doc.write(html);\n                doc.close();\n            } catch(ee) {\n                log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\n                doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\n            }\n        }\n\n        var b = doc.querySelector(\"base\");\n        if (!b || !b.href.host) {\n            var base = doc.createElement(\"base\");\n            base.href = src;\n            doc.head.insertBefore(base, doc.head.firstChild);\n        }\n\n        return doc;\n    };\n}\n\n\nfunction labelCanvasElements(ownerDocument) {\n    [].slice.call(ownerDocument.querySelectorAll(\"canvas\"), 0).forEach(function(canvas) {\n        canvas.setAttribute(html2canvasCanvasCloneAttribute, \"canvas-\" + html2canvasCanvasCloneIndex++);\n    });\n}\n\nfunction cloneCanvasContents(ownerDocument, documentClone) {\n    [].slice.call(ownerDocument.querySelectorAll(\"[\" + html2canvasCanvasCloneAttribute + \"]\"), 0).forEach(function(canvas) {\n        try {\n            var clonedCanvas = documentClone.querySelector('[' + html2canvasCanvasCloneAttribute + '=\"' + canvas.getAttribute(html2canvasCanvasCloneAttribute) + '\"]');\n            if (clonedCanvas) {\n                clonedCanvas.width = canvas.width;\n                clonedCanvas.height = canvas.height;\n                clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\n            }\n        } catch(e) {\n            log(\"Unable to copy canvas content from\", canvas, e);\n        }\n        canvas.removeAttribute(html2canvasCanvasCloneAttribute);\n    });\n}\n\nfunction removeScriptNodes(parent) {\n    [].slice.call(parent.childNodes, 0).filter(isElementNode).forEach(function(node) {\n        if (node.tagName === \"SCRIPT\") {\n            parent.removeChild(node);\n        } else {\n            removeScriptNodes(node);\n        }\n    });\n    return parent;\n}\n\nfunction isElementNode(node) {\n    return node.nodeType === Node.ELEMENT_NODE;\n}\n\nfunction absoluteUrl(url) {\n    var link = document.createElement(\"a\");\n    link.href = url;\n    link.href = link.href;\n    return link;\n}\n\n// http://dev.w3.org/csswg/css-color/\n\nfunction Color(value) {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = null;\n    var result = this.fromArray(value) ||\n        this.namedColor(value) ||\n        this.rgb(value) ||\n        this.rgba(value) ||\n        this.hex6(value) ||\n        this.hex3(value);\n}\n\nColor.prototype.darken = function(amount) {\n    var a = 1 - amount;\n    return  new Color([\n        Math.round(this.r * a),\n        Math.round(this.g * a),\n        Math.round(this.b * a),\n        this.a\n    ]);\n};\n\nColor.prototype.isTransparent = function() {\n    return this.a === 0;\n};\n\nColor.prototype.isBlack = function() {\n    return this.r === 0 && this.g === 0 && this.b === 0;\n};\n\nColor.prototype.fromArray = function(array) {\n    if (Array.isArray(array)) {\n        this.r = Math.min(array[0], 255);\n        this.g = Math.min(array[1], 255);\n        this.b = Math.min(array[2], 255);\n        if (array.length > 3) {\n            this.a = array[3];\n        }\n    }\n\n    return (Array.isArray(array));\n};\n\nvar _hex3 = /^#([a-f0-9]{3})$/i;\n\nColor.prototype.hex3 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex3)) !== null) {\n        this.r = parseInt(match[1][0] + match[1][0], 16);\n        this.g = parseInt(match[1][1] + match[1][1], 16);\n        this.b = parseInt(match[1][2] + match[1][2], 16);\n    }\n    return match !== null;\n};\n\nvar _hex6 = /^#([a-f0-9]{6})$/i;\n\nColor.prototype.hex6 = function(value) {\n    var match = null;\n    if ((match = value.match(_hex6)) !== null) {\n        this.r = parseInt(match[1].substring(0, 2), 16);\n        this.g = parseInt(match[1].substring(2, 4), 16);\n        this.b = parseInt(match[1].substring(4, 6), 16);\n    }\n    return match !== null;\n};\n\n\nvar _rgb = /^rgb\\((\\d{1,3}) *, *(\\d{1,3}) *, *(\\d{1,3})\\)$/;\n\nColor.prototype.rgb = function(value) {\n    var match = null;\n    if ((match = value.match(_rgb)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n    }\n    return match !== null;\n};\n\nvar _rgba = /^rgba\\((\\d{1,3}) *, *(\\d{1,3}) *, *(\\d{1,3}) *, *(\\d+\\.?\\d*)\\)$/;\n\nColor.prototype.rgba = function(value) {\n    var match = null;\n    if ((match = value.match(_rgba)) !== null) {\n        this.r = Number(match[1]);\n        this.g = Number(match[2]);\n        this.b = Number(match[3]);\n        this.a = Number(match[4]);\n    }\n    return match !== null;\n};\n\nColor.prototype.toString = function() {\n    return this.a !== null && this.a !== 1 ?\n    \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" :\n    \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\n};\n\nColor.prototype.namedColor = function(value) {\n    var color = colors[value.toLowerCase()];\n    if (color) {\n        this.r = color[0];\n        this.g = color[1];\n        this.b = color[2];\n    } else if (value.toLowerCase() === \"transparent\") {\n        this.r = this.g = this.b = this.a = 0;\n        return true;\n    }\n\n    return !!color;\n};\n\nColor.prototype.isColor = true;\n\n// JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\nvar colors = {\n    \"aliceblue\": [240, 248, 255],\n    \"antiquewhite\": [250, 235, 215],\n    \"aqua\": [0, 255, 255],\n    \"aquamarine\": [127, 255, 212],\n    \"azure\": [240, 255, 255],\n    \"beige\": [245, 245, 220],\n    \"bisque\": [255, 228, 196],\n    \"black\": [0, 0, 0],\n    \"blanchedalmond\": [255, 235, 205],\n    \"blue\": [0, 0, 255],\n    \"blueviolet\": [138, 43, 226],\n    \"brown\": [165, 42, 42],\n    \"burlywood\": [222, 184, 135],\n    \"cadetblue\": [95, 158, 160],\n    \"chartreuse\": [127, 255, 0],\n    \"chocolate\": [210, 105, 30],\n    \"coral\": [255, 127, 80],\n    \"cornflowerblue\": [100, 149, 237],\n    \"cornsilk\": [255, 248, 220],\n    \"crimson\": [220, 20, 60],\n    \"cyan\": [0, 255, 255],\n    \"darkblue\": [0, 0, 139],\n    \"darkcyan\": [0, 139, 139],\n    \"darkgoldenrod\": [184, 134, 11],\n    \"darkgray\": [169, 169, 169],\n    \"darkgreen\": [0, 100, 0],\n    \"darkgrey\": [169, 169, 169],\n    \"darkkhaki\": [189, 183, 107],\n    \"darkmagenta\": [139, 0, 139],\n    \"darkolivegreen\": [85, 107, 47],\n    \"darkorange\": [255, 140, 0],\n    \"darkorchid\": [153, 50, 204],\n    \"darkred\": [139, 0, 0],\n    \"darksalmon\": [233, 150, 122],\n    \"darkseagreen\": [143, 188, 143],\n    \"darkslateblue\": [72, 61, 139],\n    \"darkslategray\": [47, 79, 79],\n    \"darkslategrey\": [47, 79, 79],\n    \"darkturquoise\": [0, 206, 209],\n    \"darkviolet\": [148, 0, 211],\n    \"deeppink\": [255, 20, 147],\n    \"deepskyblue\": [0, 191, 255],\n    \"dimgray\": [105, 105, 105],\n    \"dimgrey\": [105, 105, 105],\n    \"dodgerblue\": [30, 144, 255],\n    \"firebrick\": [178, 34, 34],\n    \"floralwhite\": [255, 250, 240],\n    \"forestgreen\": [34, 139, 34],\n    \"fuchsia\": [255, 0, 255],\n    \"gainsboro\": [220, 220, 220],\n    \"ghostwhite\": [248, 248, 255],\n    \"gold\": [255, 215, 0],\n    \"goldenrod\": [218, 165, 32],\n    \"gray\": [128, 128, 128],\n    \"green\": [0, 128, 0],\n    \"greenyellow\": [173, 255, 47],\n    \"grey\": [128, 128, 128],\n    \"honeydew\": [240, 255, 240],\n    \"hotpink\": [255, 105, 180],\n    \"indianred\": [205, 92, 92],\n    \"indigo\": [75, 0, 130],\n    \"ivory\": [255, 255, 240],\n    \"khaki\": [240, 230, 140],\n    \"lavender\": [230, 230, 250],\n    \"lavenderblush\": [255, 240, 245],\n    \"lawngreen\": [124, 252, 0],\n    \"lemonchiffon\": [255, 250, 205],\n    \"lightblue\": [173, 216, 230],\n    \"lightcoral\": [240, 128, 128],\n    \"lightcyan\": [224, 255, 255],\n    \"lightgoldenrodyellow\": [250, 250, 210],\n    \"lightgray\": [211, 211, 211],\n    \"lightgreen\": [144, 238, 144],\n    \"lightgrey\": [211, 211, 211],\n    \"lightpink\": [255, 182, 193],\n    \"lightsalmon\": [255, 160, 122],\n    \"lightseagreen\": [32, 178, 170],\n    \"lightskyblue\": [135, 206, 250],\n    \"lightslategray\": [119, 136, 153],\n    \"lightslategrey\": [119, 136, 153],\n    \"lightsteelblue\": [176, 196, 222],\n    \"lightyellow\": [255, 255, 224],\n    \"lime\": [0, 255, 0],\n    \"limegreen\": [50, 205, 50],\n    \"linen\": [250, 240, 230],\n    \"magenta\": [255, 0, 255],\n    \"maroon\": [128, 0, 0],\n    \"mediumaquamarine\": [102, 205, 170],\n    \"mediumblue\": [0, 0, 205],\n    \"mediumorchid\": [186, 85, 211],\n    \"mediumpurple\": [147, 112, 219],\n    \"mediumseagreen\": [60, 179, 113],\n    \"mediumslateblue\": [123, 104, 238],\n    \"mediumspringgreen\": [0, 250, 154],\n    \"mediumturquoise\": [72, 209, 204],\n    \"mediumvioletred\": [199, 21, 133],\n    \"midnightblue\": [25, 25, 112],\n    \"mintcream\": [245, 255, 250],\n    \"mistyrose\": [255, 228, 225],\n    \"moccasin\": [255, 228, 181],\n    \"navajowhite\": [255, 222, 173],\n    \"navy\": [0, 0, 128],\n    \"oldlace\": [253, 245, 230],\n    \"olive\": [128, 128, 0],\n    \"olivedrab\": [107, 142, 35],\n    \"orange\": [255, 165, 0],\n    \"orangered\": [255, 69, 0],\n    \"orchid\": [218, 112, 214],\n    \"palegoldenrod\": [238, 232, 170],\n    \"palegreen\": [152, 251, 152],\n    \"paleturquoise\": [175, 238, 238],\n    \"palevioletred\": [219, 112, 147],\n    \"papayawhip\": [255, 239, 213],\n    \"peachpuff\": [255, 218, 185],\n    \"peru\": [205, 133, 63],\n    \"pink\": [255, 192, 203],\n    \"plum\": [221, 160, 221],\n    \"powderblue\": [176, 224, 230],\n    \"purple\": [128, 0, 128],\n    \"rebeccapurple\": [102, 51, 153],\n    \"red\": [255, 0, 0],\n    \"rosybrown\": [188, 143, 143],\n    \"royalblue\": [65, 105, 225],\n    \"saddlebrown\": [139, 69, 19],\n    \"salmon\": [250, 128, 114],\n    \"sandybrown\": [244, 164, 96],\n    \"seagreen\": [46, 139, 87],\n    \"seashell\": [255, 245, 238],\n    \"sienna\": [160, 82, 45],\n    \"silver\": [192, 192, 192],\n    \"skyblue\": [135, 206, 235],\n    \"slateblue\": [106, 90, 205],\n    \"slategray\": [112, 128, 144],\n    \"slategrey\": [112, 128, 144],\n    \"snow\": [255, 250, 250],\n    \"springgreen\": [0, 255, 127],\n    \"steelblue\": [70, 130, 180],\n    \"tan\": [210, 180, 140],\n    \"teal\": [0, 128, 128],\n    \"thistle\": [216, 191, 216],\n    \"tomato\": [255, 99, 71],\n    \"turquoise\": [64, 224, 208],\n    \"violet\": [238, 130, 238],\n    \"wheat\": [245, 222, 179],\n    \"white\": [255, 255, 255],\n    \"whitesmoke\": [245, 245, 245],\n    \"yellow\": [255, 255, 0],\n    \"yellowgreen\": [154, 205, 50]\n};\n\n\nfunction DummyImageContainer(src) {\n    this.src = src;\n    log(\"DummyImageContainer for\", src);\n    if (!this.promise || !this.image) {\n        log(\"Initiating DummyImageContainer\");\n        DummyImageContainer.prototype.image = new Image();\n        var image = this.image;\n        DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\n            image.onload = resolve;\n            image.onerror = reject;\n            image.src = smallImage();\n            if (image.complete === true) {\n                resolve(image);\n            }\n        });\n    }\n}\n\nfunction Font(family, size) {\n    var container = document.createElement('div'),\n        img = document.createElement('img'),\n        span = document.createElement('span'),\n        sampleText = 'Hidden Text',\n        baseline,\n        middle;\n\n    container.style.visibility = \"hidden\";\n    container.style.fontFamily = family;\n    container.style.fontSize = size;\n    container.style.margin = 0;\n    container.style.padding = 0;\n\n    document.body.appendChild(container);\n\n    img.src = smallImage();\n    img.width = 1;\n    img.height = 1;\n\n    img.style.margin = 0;\n    img.style.padding = 0;\n    img.style.verticalAlign = \"baseline\";\n\n    span.style.fontFamily = family;\n    span.style.fontSize = size;\n    span.style.margin = 0;\n    span.style.padding = 0;\n\n    span.appendChild(document.createTextNode(sampleText));\n    container.appendChild(span);\n    container.appendChild(img);\n    baseline = (img.offsetTop - span.offsetTop) + 1;\n\n    container.removeChild(span);\n    container.appendChild(document.createTextNode(sampleText));\n\n    container.style.lineHeight = \"normal\";\n    img.style.verticalAlign = \"super\";\n\n    middle = (img.offsetTop-container.offsetTop) + 1;\n\n    document.body.removeChild(container);\n\n    this.baseline = baseline;\n    this.lineWidth = 1;\n    this.middle = middle;\n}\n\nfunction FontMetrics() {\n    this.data = {};\n}\n\nFontMetrics.prototype.getMetrics = function(family, size) {\n    if (this.data[family + \"-\" + size] === undefined) {\n        this.data[family + \"-\" + size] = new Font(family, size);\n    }\n    return this.data[family + \"-\" + size];\n};\n\nfunction FrameContainer(container, sameOrigin, options) {\n    this.image = null;\n    this.src = container;\n    var self = this;\n    var bounds = getBounds(container);\n    this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function(resolve) {\n        if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\n            container.contentWindow.onload = container.onload = function() {\n                resolve(container);\n            };\n        } else {\n            resolve(container);\n        }\n    })).then(function(container) {\n        return html2canvas(container.contentWindow.document.documentElement, {type: 'view', width: container.width, height: container.height, proxy: options.proxy, javascriptEnabled: options.javascriptEnabled, removeContainer: options.removeContainer, allowTaint: options.allowTaint, imageTimeout: options.imageTimeout / 2});\n    }).then(function(canvas) {\n        return self.image = canvas;\n    });\n}\n\nFrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\n    var container = this.src;\n    return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\n};\n\nfunction GradientContainer(imageData) {\n    this.src = imageData.value;\n    this.colorStops = [];\n    this.type = null;\n    this.x0 = 0.5;\n    this.y0 = 0.5;\n    this.x1 = 0.5;\n    this.y1 = 0.5;\n    this.promise = Promise.resolve(true);\n}\n\nGradientContainer.prototype.TYPES = {\n    LINEAR: 1,\n    RADIAL: 2\n};\n\nfunction ImageContainer(src, cors) {\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.tainted = null;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        if (cors) {\n            self.image.crossOrigin = \"anonymous\";\n        }\n        self.image.src = src;\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    });\n}\n\nfunction ImageLoader(options, support) {\n    this.link = null;\n    this.options = options;\n    this.support = support;\n    this.origin = this.getOrigin(window.location.href);\n}\n\nImageLoader.prototype.findImages = function(nodes) {\n    var images = [];\n    nodes.reduce(function(imageNodes, container) {\n        switch(container.node.nodeName) {\n        case \"IMG\":\n            return imageNodes.concat([{\n                args: [container.node.src],\n                method: \"url\"\n            }]);\n        case \"svg\":\n        case \"IFRAME\":\n            return imageNodes.concat([{\n                args: [container.node],\n                method: container.node.nodeName\n            }]);\n        }\n        return imageNodes;\n    }, []).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.findBackgroundImage = function(images, container) {\n    container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\n    return images;\n};\n\nImageLoader.prototype.addImage = function(images, callback) {\n    return function(newImage) {\n        newImage.args.forEach(function(image) {\n            if (!this.imageExists(images, image)) {\n                images.splice(0, 0, callback.call(this, newImage));\n                log('Added image #' + (images.length), typeof(image) === \"string\" ? image.substring(0, 100) : image);\n            }\n        }, this);\n    };\n};\n\nImageLoader.prototype.hasImageBackground = function(imageData) {\n    return imageData.method !== \"none\";\n};\n\nImageLoader.prototype.loadImage = function(imageData) {\n    if (imageData.method === \"url\") {\n        var src = imageData.args[0];\n        if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\n            return new SVGContainer(src);\n        } else if (src.match(/data:image\\/.*;base64,/i)) {\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), false);\n        } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\n            return new ImageContainer(src, false);\n        } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\n            return new ImageContainer(src, true);\n        } else if (this.options.proxy) {\n            return new ProxyImageContainer(src, this.options.proxy);\n        } else {\n            return new DummyImageContainer(src);\n        }\n    } else if (imageData.method === \"linear-gradient\") {\n        return new LinearGradientContainer(imageData);\n    } else if (imageData.method === \"gradient\") {\n        return new WebkitGradientContainer(imageData);\n    } else if (imageData.method === \"svg\") {\n        return new SVGNodeContainer(imageData.args[0], this.support.svg);\n    } else if (imageData.method === \"IFRAME\") {\n        return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\n    } else {\n        return new DummyImageContainer(imageData);\n    }\n};\n\nImageLoader.prototype.isSVG = function(src) {\n    return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\n};\n\nImageLoader.prototype.imageExists = function(images, src) {\n    return images.some(function(image) {\n        return image.src === src;\n    });\n};\n\nImageLoader.prototype.isSameOrigin = function(url) {\n    return (this.getOrigin(url) === this.origin);\n};\n\nImageLoader.prototype.getOrigin = function(url) {\n    var link = this.link || (this.link = document.createElement(\"a\"));\n    link.href = url;\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\n    return link.protocol + link.hostname + link.port;\n};\n\nImageLoader.prototype.getPromise = function(container) {\n    return this.timeout(container, this.options.imageTimeout)['catch'](function() {\n        var dummy = new DummyImageContainer(container.src);\n        return dummy.promise.then(function(image) {\n            container.image = image;\n        });\n    });\n};\n\nImageLoader.prototype.get = function(src) {\n    var found = null;\n    return this.images.some(function(img) {\n        return (found = img).src === src;\n    }) ? found : null;\n};\n\nImageLoader.prototype.fetch = function(nodes) {\n    this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\n    this.images.forEach(function(image, index) {\n        image.promise.then(function() {\n            log(\"Succesfully loaded image #\"+ (index+1), image);\n        }, function(e) {\n            log(\"Failed loading image #\"+ (index+1), image, e);\n        });\n    });\n    this.ready = Promise.all(this.images.map(this.getPromise, this));\n    log(\"Finished searching images\");\n    return this;\n};\n\nImageLoader.prototype.timeout = function(container, timeout) {\n    var timer;\n    var promise = Promise.race([container.promise, new Promise(function(res, reject) {\n        timer = setTimeout(function() {\n            log(\"Timed out loading image\", container);\n            reject(container);\n        }, timeout);\n    })]).then(function(container) {\n        clearTimeout(timer);\n        return container;\n    });\n    promise['catch'](function() {\n        clearTimeout(timer);\n    });\n    return promise;\n};\n\nfunction LinearGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = this.TYPES.LINEAR;\n\n    var hasDirection = imageData.args[0].match(this.stepRegExp) === null;\n\n    if (hasDirection) {\n        imageData.args[0].split(\" \").reverse().forEach(function(position) {\n            switch(position) {\n            case \"left\":\n                this.x0 = 0;\n                this.x1 = 1;\n                break;\n            case \"top\":\n                this.y0 = 0;\n                this.y1 = 1;\n                break;\n            case \"right\":\n                this.x0 = 1;\n                this.x1 = 0;\n                break;\n            case \"bottom\":\n                this.y0 = 1;\n                this.y1 = 0;\n                break;\n            case \"to\":\n                var y0 = this.y0;\n                var x0 = this.x0;\n                this.y0 = this.y1;\n                this.x0 = this.x1;\n                this.x1 = x0;\n                this.y1 = y0;\n                break;\n            }\n        }, this);\n    } else {\n        this.y0 = 0;\n        this.y1 = 1;\n    }\n\n    this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\n        var colorStopMatch = colorStop.match(this.stepRegExp);\n        return {\n            color: new Color(colorStopMatch[1]),\n            stop: colorStopMatch[3] === \"%\" ? colorStopMatch[2] / 100 : null\n        };\n    }, this);\n\n    if (this.colorStops[0].stop === null) {\n        this.colorStops[0].stop = 0;\n    }\n\n    if (this.colorStops[this.colorStops.length - 1].stop === null) {\n        this.colorStops[this.colorStops.length - 1].stop = 1;\n    }\n\n    this.colorStops.forEach(function(colorStop, index) {\n        if (colorStop.stop === null) {\n            this.colorStops.slice(index).some(function(find, count) {\n                if (find.stop !== null) {\n                    colorStop.stop = ((find.stop - this.colorStops[index - 1].stop) / (count + 1)) + this.colorStops[index - 1].stop;\n                    return true;\n                } else {\n                    return false;\n                }\n            }, this);\n        }\n    }, this);\n}\n\nLinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\nLinearGradientContainer.prototype.stepRegExp = /((?:rgb|rgba)\\(\\d{1,3},\\s\\d{1,3},\\s\\d{1,3}(?:,\\s[0-9\\.]+)?\\))\\s*(\\d{1,3})?(%|px)?/;\n\nfunction log() {\n    if (window.html2canvas.logging && window.console && window.console.log) {\n        Function.prototype.bind.call(window.console.log, (window.console)).apply(window.console, [(Date.now() - window.html2canvas.start) + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\n    }\n}\n\nfunction NodeContainer(node, parent) {\n    this.node = node;\n    this.parent = parent;\n    this.stack = null;\n    this.bounds = null;\n    this.borders = null;\n    this.clip = [];\n    this.backgroundClip = [];\n    this.offsetBounds = null;\n    this.visible = null;\n    this.computedStyles = null;\n    this.colors = {};\n    this.styles = {};\n    this.backgroundImages = null;\n    this.transformData = null;\n    this.transformMatrix = null;\n    this.isPseudoElement = false;\n    this.opacity = null;\n}\n\nNodeContainer.prototype.cloneTo = function(stack) {\n    stack.visible = this.visible;\n    stack.borders = this.borders;\n    stack.bounds = this.bounds;\n    stack.clip = this.clip;\n    stack.backgroundClip = this.backgroundClip;\n    stack.computedStyles = this.computedStyles;\n    stack.styles = this.styles;\n    stack.backgroundImages = this.backgroundImages;\n    stack.opacity = this.opacity;\n};\n\nNodeContainer.prototype.getOpacity = function() {\n    return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\n};\n\nNodeContainer.prototype.assignStack = function(stack) {\n    this.stack = stack;\n    stack.children.push(this);\n};\n\nNodeContainer.prototype.isElementVisible = function() {\n    return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : (\n        this.css('display') !== \"none\" &&\n        this.css('visibility') !== \"hidden\" &&\n        !this.node.hasAttribute(\"data-html2canvas-ignore\") &&\n        (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\")\n    );\n};\n\nNodeContainer.prototype.css = function(attribute) {\n    if (!this.computedStyles) {\n        this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\n    }\n\n    return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\n};\n\nNodeContainer.prototype.prefixedCss = function(attribute) {\n    var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\n    var value = this.css(attribute);\n    if (value === undefined) {\n        prefixes.some(function(prefix) {\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\n            return value !== undefined;\n        }, this);\n    }\n    return value === undefined ? null : value;\n};\n\nNodeContainer.prototype.computedStyle = function(type) {\n    return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\n};\n\nNodeContainer.prototype.cssInt = function(attribute) {\n    var value = parseInt(this.css(attribute), 10);\n    return (isNaN(value)) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\n};\n\nNodeContainer.prototype.color = function(attribute) {\n    return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\n};\n\nNodeContainer.prototype.cssFloat = function(attribute) {\n    var value = parseFloat(this.css(attribute));\n    return (isNaN(value)) ? 0 : value;\n};\n\nNodeContainer.prototype.fontWeight = function() {\n    var weight = this.css(\"fontWeight\");\n    switch(parseInt(weight, 10)){\n    case 401:\n        weight = \"bold\";\n        break;\n    case 400:\n        weight = \"normal\";\n        break;\n    }\n    return weight;\n};\n\nNodeContainer.prototype.parseClip = function() {\n    var matches = this.css('clip').match(this.CLIP);\n    if (matches) {\n        return {\n            top: parseInt(matches[1], 10),\n            right: parseInt(matches[2], 10),\n            bottom: parseInt(matches[3], 10),\n            left: parseInt(matches[4], 10)\n        };\n    }\n    return null;\n};\n\nNodeContainer.prototype.parseBackgroundImages = function() {\n    return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\n};\n\nNodeContainer.prototype.cssList = function(property, index) {\n    var value = (this.css(property) || '').split(',');\n    value = value[index || 0] || value[0] || 'auto';\n    value = value.trim().split(' ');\n    if (value.length === 1) {\n        value = [value[0], value[0]];\n    }\n    return value;\n};\n\nNodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\n    var size = this.cssList(\"backgroundSize\", index);\n    var width, height;\n\n    if (isPercentage(size[0])) {\n        width = bounds.width * parseFloat(size[0]) / 100;\n    } else if (/contain|cover/.test(size[0])) {\n        var targetRatio = bounds.width / bounds.height, currentRatio = image.width / image.height;\n        return (targetRatio < currentRatio ^ size[0] === 'contain') ?  {width: bounds.height * currentRatio, height: bounds.height} : {width: bounds.width, height: bounds.width / currentRatio};\n    } else {\n        width = parseInt(size[0], 10);\n    }\n\n    if (size[0] === 'auto' && size[1] === 'auto') {\n        height = image.height;\n    } else if (size[1] === 'auto') {\n        height = width / image.width * image.height;\n    } else if (isPercentage(size[1])) {\n        height =  bounds.height * parseFloat(size[1]) / 100;\n    } else {\n        height = parseInt(size[1], 10);\n    }\n\n    if (size[0] === 'auto') {\n        width = height / image.height * image.width;\n    }\n\n    return {width: width, height: height};\n};\n\nNodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\n    var position = this.cssList('backgroundPosition', index);\n    var left, top;\n\n    if (isPercentage(position[0])){\n        left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\n    } else {\n        left = parseInt(position[0], 10);\n    }\n\n    if (position[1] === 'auto') {\n        top = left / image.width * image.height;\n    } else if (isPercentage(position[1])){\n        top =  (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\n    } else {\n        top = parseInt(position[1], 10);\n    }\n\n    if (position[0] === 'auto') {\n        left = top / image.height * image.width;\n    }\n\n    return {left: left, top: top};\n};\n\nNodeContainer.prototype.parseBackgroundRepeat = function(index) {\n    return this.cssList(\"backgroundRepeat\", index)[0];\n};\n\nNodeContainer.prototype.parseTextShadows = function() {\n    var textShadow = this.css(\"textShadow\");\n    var results = [];\n\n    if (textShadow && textShadow !== 'none') {\n        var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\n        for (var i = 0; shadows && (i < shadows.length); i++) {\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\n            results.push({\n                color: new Color(s[0]),\n                offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\n                offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\n                blur: s[3] ? s[3].replace('px', '') : 0\n            });\n        }\n    }\n    return results;\n};\n\nNodeContainer.prototype.parseTransform = function() {\n    if (!this.transformData) {\n        if (this.hasTransform()) {\n            var offset = this.parseBounds();\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\n            origin[0] += offset.left;\n            origin[1] += offset.top;\n            this.transformData = {\n                origin: origin,\n                matrix: this.parseTransformMatrix()\n            };\n        } else {\n            this.transformData = {\n                origin: [0, 0],\n                matrix: [1, 0, 0, 1, 0, 0]\n            };\n        }\n    }\n    return this.transformData;\n};\n\nNodeContainer.prototype.parseTransformMatrix = function() {\n    if (!this.transformMatrix) {\n        var transform = this.prefixedCss(\"transform\");\n        var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\n        this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\n    }\n    return this.transformMatrix;\n};\n\nNodeContainer.prototype.parseBounds = function() {\n    return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\n};\n\nNodeContainer.prototype.hasTransform = function() {\n    return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || (this.parent && this.parent.hasTransform());\n};\n\nNodeContainer.prototype.getValue = function() {\n    var value = this.node.value || \"\";\n    if (this.node.tagName === \"SELECT\") {\n        value = selectionValue(this.node);\n    } else if (this.node.type === \"password\") {\n        value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\n    }\n    return value.length === 0 ? (this.node.placeholder || \"\") : value;\n};\n\nNodeContainer.prototype.MATRIX_PROPERTY = /(matrix)\\((.+)\\)/;\nNodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\nNodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\nNodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\n\nfunction selectionValue(node) {\n    var option = node.options[node.selectedIndex || 0];\n    return option ? (option.text || \"\") : \"\";\n}\n\nfunction parseMatrix(match) {\n    if (match && match[1] === \"matrix\") {\n        return match[2].split(\",\").map(function(s) {\n            return parseFloat(s.trim());\n        });\n    }\n}\n\nfunction isPercentage(value) {\n    return value.toString().indexOf(\"%\") !== -1;\n}\n\nfunction parseBackgrounds(backgroundImage) {\n    var whitespace = ' \\r\\n\\t',\n        method, definition, prefix, prefix_i, block, results = [],\n        mode = 0, numParen = 0, quote, args;\n    var appendResult = function() {\n        if(method) {\n            if (definition.substr(0, 1) === '\"') {\n                definition = definition.substr(1, definition.length - 2);\n            }\n            if (definition) {\n                args.push(definition);\n            }\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1 ) + 1) > 0) {\n                prefix = method.substr(0, prefix_i);\n                method = method.substr(prefix_i);\n            }\n            results.push({\n                prefix: prefix,\n                method: method.toLowerCase(),\n                value: block,\n                args: args,\n                image: null\n            });\n        }\n        args = [];\n        method = prefix = definition = block = '';\n    };\n    args = [];\n    method = prefix = definition = block = '';\n    backgroundImage.split(\"\").forEach(function(c) {\n        if (mode === 0 && whitespace.indexOf(c) > -1) {\n            return;\n        }\n        switch(c) {\n        case '\"':\n            if(!quote) {\n                quote = c;\n            } else if(quote === c) {\n                quote = null;\n            }\n            break;\n        case '(':\n            if(quote) {\n                break;\n            } else if(mode === 0) {\n                mode = 1;\n                block += c;\n                return;\n            } else {\n                numParen++;\n            }\n            break;\n        case ')':\n            if (quote) {\n                break;\n            } else if(mode === 1) {\n                if(numParen === 0) {\n                    mode = 0;\n                    block += c;\n                    appendResult();\n                    return;\n                } else {\n                    numParen--;\n                }\n            }\n            break;\n\n        case ',':\n            if (quote) {\n                break;\n            } else if(mode === 0) {\n                appendResult();\n                return;\n            } else if (mode === 1) {\n                if (numParen === 0 && !method.match(/^url$/i)) {\n                    args.push(definition);\n                    definition = '';\n                    block += c;\n                    return;\n                }\n            }\n            break;\n        }\n\n        block += c;\n        if (mode === 0) {\n            method += c;\n        } else {\n            definition += c;\n        }\n    });\n\n    appendResult();\n    return results;\n}\n\nfunction removePx(str) {\n    return str.replace(\"px\", \"\");\n}\n\nfunction asFloat(str) {\n    return parseFloat(str);\n}\n\nfunction getBounds(node) {\n    if (node.getBoundingClientRect) {\n        var clientRect = node.getBoundingClientRect();\n        var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\n        return {\n            top: clientRect.top,\n            bottom: clientRect.bottom || (clientRect.top + clientRect.height),\n            right: clientRect.left + width,\n            left: clientRect.left,\n            width:  width,\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\n        };\n    }\n    return {};\n}\n\nfunction offsetBounds(node) {\n    var parent = node.offsetParent ? offsetBounds(node.offsetParent) : {top: 0, left: 0};\n\n    return {\n        top: node.offsetTop + parent.top,\n        bottom: node.offsetTop + node.offsetHeight + parent.top,\n        right: node.offsetLeft + parent.left + node.offsetWidth,\n        left: node.offsetLeft + parent.left,\n        width: node.offsetWidth,\n        height: node.offsetHeight\n    };\n}\n\nfunction NodeParser(element, renderer, support, imageLoader, options) {\n    log(\"Starting NodeParser\");\n    this.renderer = renderer;\n    this.options = options;\n    this.range = null;\n    this.support = support;\n    this.renderQueue = [];\n    this.stack = new StackingContext(true, 1, element.ownerDocument, null);\n    var parent = new NodeContainer(element, null);\n    if (options.background) {\n        renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\n    }\n    if (element === element.ownerDocument.documentElement) {\n        // http://www.w3.org/TR/css3-background/#special-backgrounds\n        var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\n        renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\n    }\n    parent.visibile = parent.isElementVisible();\n    this.createPseudoHideStyles(element.ownerDocument);\n    this.disableAnimations(element.ownerDocument);\n    this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function(container) {\n        return container.visible = container.isElementVisible();\n    }).map(this.getPseudoElements, this));\n    this.fontMetrics = new FontMetrics();\n    log(\"Fetched nodes, total:\", this.nodes.length);\n    log(\"Calculate overflow clips\");\n    this.calculateOverflowClips();\n    log(\"Start fetching images\");\n    this.images = imageLoader.fetch(this.nodes.filter(isElement));\n    this.ready = this.images.ready.then(bind(function() {\n        log(\"Images loaded, starting parsing\");\n        log(\"Creating stacking contexts\");\n        this.createStackingContexts();\n        log(\"Sorting stacking contexts\");\n        this.sortStackingContexts(this.stack);\n        this.parse(this.stack);\n        log(\"Render queue created with \" + this.renderQueue.length + \" items\");\n        return new Promise(bind(function(resolve) {\n            if (!options.async) {\n                this.renderQueue.forEach(this.paint, this);\n                resolve();\n            } else if (typeof(options.async) === \"function\") {\n                options.async.call(this, this.renderQueue, resolve);\n            } else if (this.renderQueue.length > 0){\n                this.renderIndex = 0;\n                this.asyncRenderer(this.renderQueue, resolve);\n            } else {\n                resolve();\n            }\n        }, this));\n    }, this));\n}\n\nNodeParser.prototype.calculateOverflowClips = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container)) {\n            if (isPseudoElement(container)) {\n                container.appendToDOM();\n            }\n            container.borders = this.parseBorders(container);\n            var clip = (container.css('overflow') === \"hidden\") ? [container.borders.clip] : [];\n            var cssClip = container.parseClip();\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\n                clip.push([[\"rect\",\n                        container.bounds.left + cssClip.left,\n                        container.bounds.top + cssClip.top,\n                        cssClip.right - cssClip.left,\n                        cssClip.bottom - cssClip.top\n                ]]);\n            }\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\n            container.backgroundClip = (container.css('overflow') !== \"hidden\") ? container.clip.concat([container.borders.clip]) : container.clip;\n            if (isPseudoElement(container)) {\n                container.cleanDOM();\n            }\n        } else if (isTextNode(container)) {\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\n        }\n        if (!isPseudoElement(container)) {\n            container.bounds = null;\n        }\n    }, this);\n};\n\nfunction hasParentClip(container) {\n    return container.parent && container.parent.clip.length;\n}\n\nNodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\n    asyncTimer = asyncTimer || Date.now();\n    this.paint(queue[this.renderIndex++]);\n    if (queue.length === this.renderIndex) {\n        resolve();\n    } else if (asyncTimer + 20 > Date.now()) {\n        this.asyncRenderer(queue, resolve, asyncTimer);\n    } else {\n        setTimeout(bind(function() {\n            this.asyncRenderer(queue, resolve);\n        }, this), 0);\n    }\n};\n\nNodeParser.prototype.createPseudoHideStyles = function(document) {\n    this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' +\n        '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\n};\n\nNodeParser.prototype.disableAnimations = function(document) {\n    this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\n        '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\n};\n\nNodeParser.prototype.createStyles = function(document, styles) {\n    var hidePseudoElements = document.createElement('style');\n    hidePseudoElements.innerHTML = styles;\n    document.body.appendChild(hidePseudoElements);\n};\n\nNodeParser.prototype.getPseudoElements = function(container) {\n    var nodes = [[container]];\n    if (container.node.nodeType === Node.ELEMENT_NODE) {\n        var before = this.getPseudoElement(container, \":before\");\n        var after = this.getPseudoElement(container, \":after\");\n\n        if (before) {\n            nodes.push(before);\n        }\n\n        if (after) {\n            nodes.push(after);\n        }\n    }\n    return flatten(nodes);\n};\n\nfunction toCamelCase(str) {\n    return str.replace(/(\\-[a-z])/g, function(match){\n        return match.toUpperCase().replace('-','');\n    });\n}\n\nNodeParser.prototype.getPseudoElement = function(container, type) {\n    var style = container.computedStyle(type);\n    if(!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\n        return null;\n    }\n\n    var content = stripQuotes(style.content);\n    var isImage = content.substr(0, 3) === 'url';\n    var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\n    var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\n\n    for (var i = style.length-1; i >= 0; i--) {\n        var property = toCamelCase(style.item(i));\n        pseudoNode.style[property] = style[property];\n    }\n\n    pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\n\n    if (isImage) {\n        pseudoNode.src = parseBackgrounds(content)[0].args[0];\n        return [pseudoContainer];\n    } else {\n        var text = document.createTextNode(content);\n        pseudoNode.appendChild(text);\n        return [pseudoContainer, new TextContainer(text, pseudoContainer)];\n    }\n};\n\n\nNodeParser.prototype.getChildren = function(parentContainer) {\n    return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\n        var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\n        return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? (container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : []) : container;\n    }, this));\n};\n\nNodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\n    var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\n    container.cloneTo(stack);\n    var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\n    parentStack.contexts.push(stack);\n    container.stack = stack;\n};\n\nNodeParser.prototype.createStackingContexts = function() {\n    this.nodes.forEach(function(container) {\n        if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\n            this.newStackingContext(container, true);\n        } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\n            this.newStackingContext(container, false);\n        } else {\n            container.assignStack(container.parent.stack);\n        }\n    }, this);\n};\n\nNodeParser.prototype.isBodyWithTransparentRoot = function(container) {\n    return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\n};\n\nNodeParser.prototype.isRootElement = function(container) {\n    return container.parent === null;\n};\n\nNodeParser.prototype.sortStackingContexts = function(stack) {\n    stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\n    stack.contexts.forEach(this.sortStackingContexts, this);\n};\n\nNodeParser.prototype.parseTextBounds = function(container) {\n    return function(text, index, textList) {\n        if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\n                var offset = textList.slice(0, index).join(\"\").length;\n                return this.getRangeBounds(container.node, offset, text.length);\n            } else if (container.node && typeof(container.node.data) === \"string\") {\n                var replacementNode = container.node.splitText(text.length);\n                var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\n                container.node = replacementNode;\n                return bounds;\n            }\n        } else if(!this.support.rangeBounds || container.parent.hasTransform()){\n            container.node = container.node.splitText(text.length);\n        }\n        return {};\n    };\n};\n\nNodeParser.prototype.getWrapperBounds = function(node, transform) {\n    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\n    var parent = node.parentNode,\n        backupText = node.cloneNode(true);\n\n    wrapper.appendChild(node.cloneNode(true));\n    parent.replaceChild(wrapper, node);\n    var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\n    parent.replaceChild(backupText, wrapper);\n    return bounds;\n};\n\nNodeParser.prototype.getRangeBounds = function(node, offset, length) {\n    var range = this.range || (this.range = node.ownerDocument.createRange());\n    range.setStart(node, offset);\n    range.setEnd(node, offset + length);\n    return range.getBoundingClientRect();\n};\n\nfunction ClearTransform() {}\n\nNodeParser.prototype.parse = function(stack) {\n    // http://www.w3.org/TR/CSS21/visuren.html#z-index\n    var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\n    var descendantElements = stack.children.filter(isElement);\n    var descendantNonFloats = descendantElements.filter(not(isFloating));\n    var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\n    var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\n    var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\n    var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\n    var text = stack.children.filter(isTextNode).filter(hasText);\n    var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\n    negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats)\n        .concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container) {\n            this.renderQueue.push(container);\n            if (isStackingContext(container)) {\n                this.parse(container);\n                this.renderQueue.push(new ClearTransform());\n            }\n        }, this);\n};\n\nNodeParser.prototype.paint = function(container) {\n    try {\n        if (container instanceof ClearTransform) {\n            this.renderer.ctx.restore();\n        } else if (isTextNode(container)) {\n            if (isPseudoElement(container.parent)) {\n                container.parent.appendToDOM();\n            }\n            this.paintText(container);\n            if (isPseudoElement(container.parent)) {\n                container.parent.cleanDOM();\n            }\n        } else {\n            this.paintNode(container);\n        }\n    } catch(e) {\n        log(e);\n        if (this.options.strict) {\n            throw e;\n        }\n    }\n};\n\nNodeParser.prototype.paintNode = function(container) {\n    if (isStackingContext(container)) {\n        this.renderer.setOpacity(container.opacity);\n        this.renderer.ctx.save();\n        if (container.hasTransform()) {\n            this.renderer.setTransform(container.parseTransform());\n        }\n    }\n\n    if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\n        this.paintCheckbox(container);\n    } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\n        this.paintRadio(container);\n    } else {\n        this.paintElement(container);\n    }\n};\n\nNodeParser.prototype.paintElement = function(container) {\n    var bounds = container.parseBounds();\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\n    }, this);\n\n    this.renderer.clip(container.clip, function() {\n        this.renderer.renderBorders(container.borders.borders);\n    }, this);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        switch (container.node.nodeName) {\n        case \"svg\":\n        case \"IFRAME\":\n            var imgContainer = this.images.get(container.node);\n            if (imgContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\n            } else {\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\n            }\n            break;\n        case \"IMG\":\n            var imageContainer = this.images.get(container.node.src);\n            if (imageContainer) {\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\n            } else {\n                log(\"Error loading <img>\", container.node.src);\n            }\n            break;\n        case \"CANVAS\":\n            this.renderer.renderImage(container, bounds, container.borders, {image: container.node});\n            break;\n        case \"SELECT\":\n        case \"INPUT\":\n        case \"TEXTAREA\":\n            this.paintFormValue(container);\n            break;\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintCheckbox = function(container) {\n    var b = container.parseBounds();\n\n    var size = Math.min(b.width, b.height);\n    var bounds = {width: size - 1, height: size - 1, top: b.top, left: b.left};\n    var r = [3, 3];\n    var radius = [r, r, r, r];\n    var borders = [1,1,1,1].map(function(w) {\n        return {color: new Color('#A5A5A5'), width: w};\n    });\n\n    var borderPoints = calculateCurvePoints(bounds, radius, borders);\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\n        this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\n        if (container.node.checked) {\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', (size - 3) + \"px\", 'arial');\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintRadio = function(container) {\n    var bounds = container.parseBounds();\n\n    var size = Math.min(bounds.width, bounds.height) - 2;\n\n    this.renderer.clip(container.backgroundClip, function() {\n        this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\n        if (container.node.checked) {\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\n        }\n    }, this);\n};\n\nNodeParser.prototype.paintFormValue = function(container) {\n    var value = container.getValue();\n    if (value.length > 0) {\n        var document = container.node.ownerDocument;\n        var wrapper = document.createElement('html2canvaswrapper');\n        var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color',\n            'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom',\n            'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth',\n            'boxSizing', 'whiteSpace', 'wordWrap'];\n\n        properties.forEach(function(property) {\n            try {\n                wrapper.style[property] = container.css(property);\n            } catch(e) {\n                // Older IE has issues with \"border\"\n                log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\n            }\n        });\n        var bounds = container.parseBounds();\n        wrapper.style.position = \"fixed\";\n        wrapper.style.left = bounds.left + \"px\";\n        wrapper.style.top = bounds.top + \"px\";\n        wrapper.textContent = value;\n        document.body.appendChild(wrapper);\n        this.paintText(new TextContainer(wrapper.firstChild, container));\n        document.body.removeChild(wrapper);\n    }\n};\n\nNodeParser.prototype.paintText = function(container) {\n    container.applyTextTransform();\n    var characters = window.html2canvas.punycode.ucs2.decode(container.node.data);\n    var textList = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data) ? getWords(characters) : characters.map(function(character) {\n        return window.html2canvas.punycode.ucs2.encode([character]);\n    });\n\n    var weight = container.parent.fontWeight();\n    var size = container.parent.css('fontSize');\n    var family = container.parent.css('fontFamily');\n    var shadows = container.parent.parseTextShadows();\n\n    this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\n    if (shadows.length) {\n        // TODO: support multiple text shadows\n        this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\n    } else {\n        this.renderer.clearShadow();\n    }\n\n    this.renderer.clip(container.parent.clip, function() {\n        textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\n            if (bounds) {\n                this.renderer.text(textList[index], bounds.left, bounds.bottom);\n                this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\n            }\n        }, this);\n    }, this);\n};\n\nNodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\n    switch(container.css(\"textDecoration\").split(\" \")[0]) {\n    case \"underline\":\n        // Draws a line at the baseline of the font\n        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"overline\":\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\n        break;\n    case \"line-through\":\n        // TODO try and find exact position for line-through\n        this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\n        break;\n    }\n};\n\nvar borderColorTransforms = {\n    inset: [\n        [\"darken\", 0.60],\n        [\"darken\", 0.10],\n        [\"darken\", 0.10],\n        [\"darken\", 0.60]\n    ]\n};\n\nNodeParser.prototype.parseBorders = function(container) {\n    var nodeBounds = container.parseBounds();\n    var radius = getBorderRadiusData(container);\n    var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function(side, index) {\n        var style = container.css('border' + side + 'Style');\n        var color = container.color('border' + side + 'Color');\n        if (style === \"inset\" && color.isBlack()) {\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\n        }\n        var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\n        return {\n            width: container.cssInt('border' + side + 'Width'),\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\n            args: null\n        };\n    });\n    var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\n\n    return {\n        clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\n        borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\n    };\n};\n\nfunction calculateBorders(borders, nodeBounds, borderPoints, radius) {\n    return borders.map(function(border, borderSide) {\n        if (border.width > 0) {\n            var bx = nodeBounds.left;\n            var by = nodeBounds.top;\n            var bw = nodeBounds.width;\n            var bh = nodeBounds.height - (borders[2].width);\n\n            switch(borderSide) {\n            case 0:\n                // top border\n                bh = borders[0].width;\n                border.args = drawSide({\n                        c1: [bx, by],\n                        c2: [bx + bw, by],\n                        c3: [bx + bw - borders[1].width, by + bh],\n                        c4: [bx + borders[3].width, by + bh]\n                    }, radius[0], radius[1],\n                    borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\n                break;\n            case 1:\n                // right border\n                bx = nodeBounds.left + nodeBounds.width - (borders[1].width);\n                bw = borders[1].width;\n\n                border.args = drawSide({\n                        c1: [bx + bw, by],\n                        c2: [bx + bw, by + bh + borders[2].width],\n                        c3: [bx, by + bh],\n                        c4: [bx, by + borders[0].width]\n                    }, radius[1], radius[2],\n                    borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\n                break;\n            case 2:\n                // bottom border\n                by = (by + nodeBounds.height) - (borders[2].width);\n                bh = borders[2].width;\n                border.args = drawSide({\n                        c1: [bx + bw, by + bh],\n                        c2: [bx, by + bh],\n                        c3: [bx + borders[3].width, by],\n                        c4: [bx + bw - borders[3].width, by]\n                    }, radius[2], radius[3],\n                    borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\n                break;\n            case 3:\n                // left border\n                bw = borders[3].width;\n                border.args = drawSide({\n                        c1: [bx, by + bh + borders[2].width],\n                        c2: [bx, by],\n                        c3: [bx + bw, by + borders[0].width],\n                        c4: [bx + bw, by + bh]\n                    }, radius[3], radius[0],\n                    borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\n                break;\n            }\n        }\n        return border;\n    });\n}\n\nNodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\n    var backgroundClip = container.css('backgroundClip'),\n        borderArgs = [];\n\n    switch(backgroundClip) {\n    case \"content-box\":\n    case \"padding-box\":\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\n        break;\n\n    default:\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\n        break;\n    }\n\n    return borderArgs;\n};\n\nfunction getCurvePoints(x, y, r1, r2) {\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\n    var ox = (r1) * kappa, // control point offset horizontal\n        oy = (r2) * kappa, // control point offset vertical\n        xm = x + r1, // x-middle\n        ym = y + r2; // y-middle\n    return {\n        topLeft: bezierCurve({x: x, y: ym}, {x: x, y: ym - oy}, {x: xm - ox, y: y}, {x: xm, y: y}),\n        topRight: bezierCurve({x: x, y: y}, {x: x + ox,y: y}, {x: xm, y: ym - oy}, {x: xm, y: ym}),\n        bottomRight: bezierCurve({x: xm, y: y}, {x: xm, y: y + oy}, {x: x + ox, y: ym}, {x: x, y: ym}),\n        bottomLeft: bezierCurve({x: xm, y: ym}, {x: xm - ox, y: ym}, {x: x, y: y + oy}, {x: x, y:y})\n    };\n}\n\nfunction calculateCurvePoints(bounds, borderRadius, borders) {\n    var x = bounds.left,\n        y = bounds.top,\n        width = bounds.width,\n        height = bounds.height,\n\n        tlh = borderRadius[0][0],\n        tlv = borderRadius[0][1],\n        trh = borderRadius[1][0],\n        trv = borderRadius[1][1],\n        brh = borderRadius[2][0],\n        brv = borderRadius[2][1],\n        blh = borderRadius[3][0],\n        blv = borderRadius[3][1];\n\n    var topWidth = width - trh,\n        rightHeight = height - brv,\n        bottomWidth = width - brh,\n        leftHeight = height - blv;\n\n    return {\n        topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\n        topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\n        topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\n        topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\n        bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\n        bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width),  brv - borders[2].width).bottomRight.subdivide(0.5),\n        bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\n        bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\n    };\n}\n\nfunction bezierCurve(start, startControl, endControl, end) {\n    var lerp = function (a, b, t) {\n        return {\n            x: a.x + (b.x - a.x) * t,\n            y: a.y + (b.y - a.y) * t\n        };\n    };\n\n    return {\n        start: start,\n        startControl: startControl,\n        endControl: endControl,\n        end: end,\n        subdivide: function(t) {\n            var ab = lerp(start, startControl, t),\n                bc = lerp(startControl, endControl, t),\n                cd = lerp(endControl, end, t),\n                abbc = lerp(ab, bc, t),\n                bccd = lerp(bc, cd, t),\n                dest = lerp(abbc, bccd, t);\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\n        },\n        curveTo: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\n        },\n        curveToReversed: function(borderArgs) {\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\n        }\n    };\n}\n\nfunction drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\n    var borderArgs = [];\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\n        outer1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\n        outer2[0].curveTo(borderArgs);\n        borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\n        inner2[0].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\n        borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\n    }\n\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\n        inner1[1].curveToReversed(borderArgs);\n    } else {\n        borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\n    }\n\n    return borderArgs;\n}\n\nfunction parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\n    if (radius1[0] > 0 || radius1[1] > 0) {\n        borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\n        corner1[0].curveTo(borderArgs);\n        corner1[1].curveTo(borderArgs);\n    } else {\n        borderArgs.push([\"line\", x, y]);\n    }\n\n    if (radius2[0] > 0 || radius2[1] > 0) {\n        borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\n    }\n}\n\nfunction negativeZIndex(container) {\n    return container.cssInt(\"zIndex\") < 0;\n}\n\nfunction positiveZIndex(container) {\n    return container.cssInt(\"zIndex\") > 0;\n}\n\nfunction zIndex0(container) {\n    return container.cssInt(\"zIndex\") === 0;\n}\n\nfunction inlineLevel(container) {\n    return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction isStackingContext(container) {\n    return (container instanceof StackingContext);\n}\n\nfunction hasText(container) {\n    return container.node.data.trim().length > 0;\n}\n\nfunction noLetterSpacing(container) {\n    return (/^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\")));\n}\n\nfunction getBorderRadiusData(container) {\n    return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function(side) {\n        var value = container.css('border' + side + 'Radius');\n        var arr = value.split(\" \");\n        if (arr.length <= 1) {\n            arr[1] = arr[0];\n        }\n        return arr.map(asInt);\n    });\n}\n\nfunction renderableNode(node) {\n    return (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE);\n}\n\nfunction isPositionedForStacking(container) {\n    var position = container.css(\"position\");\n    var zIndex = ([\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1) ? container.css(\"zIndex\") : \"auto\";\n    return zIndex !== \"auto\";\n}\n\nfunction isPositioned(container) {\n    return container.css(\"position\") !== \"static\";\n}\n\nfunction isFloating(container) {\n    return container.css(\"float\") !== \"none\";\n}\n\nfunction isInlineBlock(container) {\n    return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\n}\n\nfunction not(callback) {\n    var context = this;\n    return function() {\n        return !callback.apply(context, arguments);\n    };\n}\n\nfunction isElement(container) {\n    return container.node.nodeType === Node.ELEMENT_NODE;\n}\n\nfunction isPseudoElement(container) {\n    return container.isPseudoElement === true;\n}\n\nfunction isTextNode(container) {\n    return container.node.nodeType === Node.TEXT_NODE;\n}\n\nfunction zIndexSort(contexts) {\n    return function(a, b) {\n        return (a.cssInt(\"zIndex\") + (contexts.indexOf(a) / contexts.length)) - (b.cssInt(\"zIndex\") + (contexts.indexOf(b) / contexts.length));\n    };\n}\n\nfunction hasOpacity(container) {\n    return container.getOpacity() < 1;\n}\n\nfunction bind(callback, context) {\n    return function() {\n        return callback.apply(context, arguments);\n    };\n}\n\nfunction asInt(value) {\n    return parseInt(value, 10);\n}\n\nfunction getWidth(border) {\n    return border.width;\n}\n\nfunction nonIgnoredElement(nodeContainer) {\n    return (nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1);\n}\n\nfunction flatten(arrays) {\n    return [].concat.apply([], arrays);\n}\n\nfunction stripQuotes(content) {\n    var first = content.substr(0, 1);\n    return (first === content.substr(content.length - 1) && first.match(/'|\"/)) ? content.substr(1, content.length - 2) : content;\n}\n\nfunction getWords(characters) {\n    var words = [], i = 0, onWordBoundary = false, word;\n    while(characters.length) {\n        if (isWordBoundary(characters[i]) === onWordBoundary) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(window.html2canvas.punycode.ucs2.encode(word));\n            }\n            onWordBoundary =! onWordBoundary;\n            i = 0;\n        } else {\n            i++;\n        }\n\n        if (i >= characters.length) {\n            word = characters.splice(0, i);\n            if (word.length) {\n                words.push(window.html2canvas.punycode.ucs2.encode(word));\n            }\n        }\n    }\n    return words;\n}\n\nfunction isWordBoundary(characterCode) {\n    return [\n        32, // <space>\n        13, // \\n        10, // \\n\n        9, // \\t\n        45 // -\n    ].indexOf(characterCode) !== -1;\n}\n\nfunction hasUnicode(string) {\n    return (/[^\\u0000-\\u00ff]/).test(string);\n}\n\nfunction Proxy(src, proxyUrl, document) {\n    if (!proxyUrl) {\n        return Promise.reject(\"No proxy configured\");\n    }\n    var callback = createCallback(supportsCORS);\n    var url = createProxyUrl(proxyUrl, src, callback);\n\n    return supportsCORS ? XHR(url) : (jsonp(document, url, callback).then(function(response) {\n        return decode64(response.content);\n    }));\n}\nvar proxyCount = 0;\n\nvar supportsCORS = ('withCredentials' in new XMLHttpRequest());\nvar supportsCORSImage = ('crossOrigin' in new Image());\n\nfunction ProxyURL(src, proxyUrl, document) {\n    var callback = createCallback(supportsCORSImage);\n    var url = createProxyUrl(proxyUrl, src, callback);\n    return (supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function(response) {\n        return \"data:\" + response.type + \";base64,\" + response.content;\n    }));\n}\n\nfunction jsonp(document, url, callback) {\n    return new Promise(function(resolve, reject) {\n        var s = document.createElement(\"script\");\n        var cleanup = function() {\n            delete window.html2canvas.proxy[callback];\n            document.body.removeChild(s);\n        };\n        window.html2canvas.proxy[callback] = function(response) {\n            cleanup();\n            resolve(response);\n        };\n        s.src = url;\n        s.onerror = function(e) {\n            cleanup();\n            reject(e);\n        };\n        document.body.appendChild(s);\n    });\n}\n\nfunction createCallback(useCORS) {\n    return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + (++proxyCount) + \"_\" + Math.round(Math.random() * 100000) : \"\";\n}\n\nfunction createProxyUrl(proxyUrl, src, callback) {\n    return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\n}\n\nfunction ProxyImageContainer(src, proxy) {\n    var script = document.createElement(\"script\");\n    var link = document.createElement(\"a\");\n    link.href = src;\n    src = link.href;\n    this.src = src;\n    this.image = new Image();\n    var self = this;\n    this.promise = new Promise(function(resolve, reject) {\n        self.image.crossOrigin = \"Anonymous\";\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n\n        new ProxyURL(src, proxy, document).then(function(url) {\n            self.image.src = url;\n        })['catch'](reject);\n    });\n}\n\nfunction PseudoElementContainer(node, parent, type) {\n    NodeContainer.call(this, node, parent);\n    this.isPseudoElement = true;\n    this.before = type === \":before\";\n}\n\nPseudoElementContainer.prototype.cloneTo = function(stack) {\n    PseudoElementContainer.prototype.cloneTo.call(this, stack);\n    stack.isPseudoElement = true;\n    stack.before = this.before;\n};\n\nPseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\n\nPseudoElementContainer.prototype.appendToDOM = function() {\n    if (this.before) {\n        this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\n    } else {\n        this.parent.node.appendChild(this.node);\n    }\n    this.parent.node.className += \" \" + this.getHideClass();\n};\n\nPseudoElementContainer.prototype.cleanDOM = function() {\n    this.node.parentNode.removeChild(this.node);\n    // this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\n};\n\nPseudoElementContainer.prototype.getHideClass = function() {\n    return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\n};\n\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\n\nfunction Renderer(width, height, images, options, document) {\n    this.width = width;\n    this.height = height;\n    this.images = images;\n    this.options = options;\n    this.document = document;\n}\n\nRenderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\n    var paddingLeft = container.cssInt('paddingLeft'),\n        paddingTop = container.cssInt('paddingTop'),\n        paddingRight = container.cssInt('paddingRight'),\n        paddingBottom = container.cssInt('paddingBottom'),\n        borders = borderData.borders;\n\n    var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\n    var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\n    this.drawImage(\n        imageContainer,\n        0,\n        0,\n        imageContainer.image.width || width,\n        imageContainer.image.height || height,\n        bounds.left + paddingLeft + borders[3].width,\n        bounds.top + paddingTop + borders[0].width,\n        width,\n        height\n    );\n};\n\nRenderer.prototype.renderBackground = function(container, bounds, borderData) {\n    if (bounds.height > 0 && bounds.width > 0) {\n        this.renderBackgroundColor(container, bounds);\n        this.renderBackgroundImage(container, bounds, borderData);\n    }\n};\n\nRenderer.prototype.renderBackgroundColor = function(container, bounds) {\n    var color = container.color(\"backgroundColor\");\n    if (!color.isTransparent()) {\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\n    }\n};\n\nRenderer.prototype.renderBorders = function(borders) {\n    borders.forEach(this.renderBorder, this);\n};\n\nRenderer.prototype.renderBorder = function(data) {\n    if (!data.color.isTransparent() && data.args !== null) {\n        this.drawShape(data.args, data.color);\n    }\n};\n\nRenderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\n    var backgroundImages = container.parseBackgroundImages();\n    backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\n        switch(backgroundImage.method) {\n        case \"url\":\n            var image = this.images.get(backgroundImage.args[0]);\n            if (image) {\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index+1), borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"linear-gradient\":\n        case \"gradient\":\n            var gradientImage = this.images.get(backgroundImage.value);\n            if (gradientImage) {\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\n            } else {\n                log(\"Error loading background-image\", backgroundImage.args[0]);\n            }\n            break;\n        case \"none\":\n            break;\n        default:\n            log(\"Unknown background-image type\", backgroundImage.args[0]);\n        }\n    }, this);\n};\n\nRenderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\n    var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\n    var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\n    var repeat = container.parseBackgroundRepeat(index);\n    switch (repeat) {\n    case \"repeat-x\":\n    case \"repeat no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\n        break;\n    case \"repeat-y\":\n    case \"no-repeat repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\n        break;\n    case \"no-repeat\":\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\n        break;\n    default:\n        this.renderBackgroundRepeat(imageContainer, position, size, {top: bounds.top, left: bounds.left}, borderData[3], borderData[0]);\n        break;\n    }\n};\n\nfunction StackingContext(hasOwnStacking, opacity, element, parent) {\n    NodeContainer.call(this, element, parent);\n    this.ownStacking = hasOwnStacking;\n    this.contexts = [];\n    this.children = [];\n    this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\n}\n\nStackingContext.prototype = Object.create(NodeContainer.prototype);\n\nStackingContext.prototype.getParentStack = function(context) {\n    var parentStack = (this.parent) ? this.parent.stack : null;\n    return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\n};\n\nfunction Support(document) {\n    this.rangeBounds = this.testRangeBounds(document);\n    this.cors = this.testCORS();\n    this.svg = this.testSVG();\n}\n\nSupport.prototype.testRangeBounds = function(document) {\n    var range, testElement, rangeBounds, rangeHeight, support = false;\n\n    if (document.createRange) {\n        range = document.createRange();\n        if (range.getBoundingClientRect) {\n            testElement = document.createElement('boundtest');\n            testElement.style.height = \"123px\";\n            testElement.style.display = \"block\";\n            document.body.appendChild(testElement);\n\n            range.selectNode(testElement);\n            rangeBounds = range.getBoundingClientRect();\n            rangeHeight = rangeBounds.height;\n\n            if (rangeHeight === 123) {\n                support = true;\n            }\n            document.body.removeChild(testElement);\n        }\n    }\n\n    return support;\n};\n\nSupport.prototype.testCORS = function() {\n    return typeof((new Image()).crossOrigin) !== \"undefined\";\n};\n\nSupport.prototype.testSVG = function() {\n    var img = new Image();\n    var canvas = document.createElement(\"canvas\");\n    var ctx =  canvas.getContext(\"2d\");\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\n\n    try {\n        ctx.drawImage(img, 0, 0);\n        canvas.toDataURL();\n    } catch(e) {\n        return false;\n    }\n    return true;\n};\n\nfunction SVGContainer(src) {\n    this.src = src;\n    this.image = null;\n    var self = this;\n\n    this.promise = this.hasFabric().then(function() {\n        return (self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src));\n    }).then(function(svg) {\n        return new Promise(function(resolve) {\n            html2canvas.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGContainer.prototype.hasFabric = function() {\n    return !html2canvas.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\n};\n\nSVGContainer.prototype.inlineFormatting = function(src) {\n    return (/^data:image\\/svg\\+xml;base64,/.test(src)) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\n};\n\nSVGContainer.prototype.removeContentType = function(src) {\n    return src.replace(/^data:image\\/svg\\+xml(;base64)?,/,'');\n};\n\nSVGContainer.prototype.isInline = function(src) {\n    return (/^data:image\\/svg\\+xml/i.test(src));\n};\n\nSVGContainer.prototype.createCanvas = function(resolve) {\n    var self = this;\n    return function (objects, options) {\n        var canvas = new html2canvas.fabric.StaticCanvas('c');\n        self.image = canvas.lowerCanvasEl;\n        canvas\n            .setWidth(options.width)\n            .setHeight(options.height)\n            .add(html2canvas.fabric.util.groupSVGElements(objects, options))\n            .renderAll();\n        resolve(canvas.lowerCanvasEl);\n    };\n};\n\nSVGContainer.prototype.decode64 = function(str) {\n    return (typeof(window.atob) === \"function\") ? window.atob(str) : decode64(str);\n};\n\n/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n\nfunction decode64(base64) {\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n    var len = base64.length, i, encoded1, encoded2, encoded3, encoded4, byte1, byte2, byte3;\n\n    var output = \"\";\n\n    for (i = 0; i < len; i+=4) {\n        encoded1 = chars.indexOf(base64[i]);\n        encoded2 = chars.indexOf(base64[i+1]);\n        encoded3 = chars.indexOf(base64[i+2]);\n        encoded4 = chars.indexOf(base64[i+3]);\n\n        byte1 = (encoded1 << 2) | (encoded2 >> 4);\n        byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        byte3 = ((encoded3 & 3) << 6) | encoded4;\n        if (encoded3 === 64) {\n            output += String.fromCharCode(byte1);\n        } else if (encoded4 === 64 || encoded4 === -1) {\n            output += String.fromCharCode(byte1, byte2);\n        } else{\n            output += String.fromCharCode(byte1, byte2, byte3);\n        }\n    }\n\n    return output;\n}\n\nfunction SVGNodeContainer(node, native) {\n    this.src = node;\n    this.image = null;\n    var self = this;\n\n    this.promise = native ? new Promise(function(resolve, reject) {\n        self.image = new Image();\n        self.image.onload = resolve;\n        self.image.onerror = reject;\n        self.image.src = \"data:image/svg+xml,\" + (new XMLSerializer()).serializeToString(node);\n        if (self.image.complete === true) {\n            resolve(self.image);\n        }\n    }) : this.hasFabric().then(function() {\n        return new Promise(function(resolve) {\n            html2canvas.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\n        });\n    });\n}\n\nSVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\n\nfunction TextContainer(node, parent) {\n    NodeContainer.call(this, node, parent);\n}\n\nTextContainer.prototype = Object.create(NodeContainer.prototype);\n\nTextContainer.prototype.applyTextTransform = function() {\n    this.node.data = this.transform(this.parent.css(\"textTransform\"));\n};\n\nTextContainer.prototype.transform = function(transform) {\n    var text = this.node.data;\n    switch(transform){\n        case \"lowercase\":\n            return text.toLowerCase();\n        case \"capitalize\":\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\n        case \"uppercase\":\n            return text.toUpperCase();\n        default:\n            return text;\n    }\n};\n\nfunction capitalize(m, p1, p2) {\n    if (m.length > 0) {\n        return p1 + p2.toUpperCase();\n    }\n}\n\nfunction WebkitGradientContainer(imageData) {\n    GradientContainer.apply(this, arguments);\n    this.type = (imageData.args[0] === \"linear\") ? this.TYPES.LINEAR : this.TYPES.RADIAL;\n}\n\nWebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\n\nfunction XHR(url) {\n    return new Promise(function(resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', url);\n\n        xhr.onload = function() {\n            if (xhr.status === 200) {\n                resolve(xhr.responseText);\n            } else {\n                reject(new Error(xhr.statusText));\n            }\n        };\n\n        xhr.onerror = function() {\n            reject(new Error(\"Network Error\"));\n        };\n\n        xhr.send();\n    });\n}\n\nfunction CanvasRenderer(width, height) {\n    Renderer.apply(this, arguments);\n    this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\n    if (!this.options.canvas) {\n        this.canvas.width = width;\n        this.canvas.height = height;\n    }\n    this.ctx = this.canvas.getContext(\"2d\");\n    this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\n    this.ctx.textBaseline = \"bottom\";\n    this.variables = {};\n    log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\n}\n\nCanvasRenderer.prototype = Object.create(Renderer.prototype);\n\nCanvasRenderer.prototype.setFillStyle = function(fillStyle) {\n    this.ctx.fillStyle = typeof(fillStyle) === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\n    this.setFillStyle(color).fillRect(left, top, width, height);\n};\n\nCanvasRenderer.prototype.circle = function(left, top, size, color) {\n    this.setFillStyle(color);\n    this.ctx.beginPath();\n    this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI*2, true);\n    this.ctx.closePath();\n    this.ctx.fill();\n};\n\nCanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\n    this.circle(left, top, size, color);\n    this.ctx.strokeStyle = strokeColor.toString();\n    this.ctx.stroke();\n};\n\nCanvasRenderer.prototype.drawShape = function(shape, color) {\n    this.shape(shape);\n    this.setFillStyle(color).fill();\n};\n\nCanvasRenderer.prototype.taints = function(imageContainer) {\n    if (imageContainer.tainted === null) {\n        this.taintCtx.drawImage(imageContainer.image, 0, 0);\n        try {\n            this.taintCtx.getImageData(0, 0, 1, 1);\n            imageContainer.tainted = false;\n        } catch(e) {\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\n            imageContainer.tainted = true;\n        }\n    }\n\n    return imageContainer.tainted;\n};\n\nCanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\n    if (!this.taints(imageContainer) || this.options.allowTaint) {\n        this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\n    }\n};\n\nCanvasRenderer.prototype.clip = function(shapes, callback, context) {\n    this.ctx.save();\n    shapes.filter(hasEntries).forEach(function(shape) {\n        this.shape(shape).clip();\n    }, this);\n    callback.call(context);\n    this.ctx.restore();\n};\n\nCanvasRenderer.prototype.shape = function(shape) {\n    this.ctx.beginPath();\n    shape.forEach(function(point, index) {\n        if (point[0] === \"rect\") {\n            this.ctx.rect.apply(this.ctx, point.slice(1));\n        } else {\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\n        }\n    }, this);\n    this.ctx.closePath();\n    return this.ctx;\n};\n\nCanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\n    this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\n};\n\nCanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\n    this.setVariable(\"shadowColor\", color.toString())\n        .setVariable(\"shadowOffsetY\", offsetX)\n        .setVariable(\"shadowOffsetX\", offsetY)\n        .setVariable(\"shadowBlur\", blur);\n};\n\nCanvasRenderer.prototype.clearShadow = function() {\n    this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\n};\n\nCanvasRenderer.prototype.setOpacity = function(opacity) {\n    this.ctx.globalAlpha = opacity;\n};\n\nCanvasRenderer.prototype.setTransform = function(transform) {\n    this.ctx.translate(transform.origin[0], transform.origin[1]);\n    this.ctx.transform.apply(this.ctx, transform.matrix);\n    this.ctx.translate(-transform.origin[0], -transform.origin[1]);\n};\n\nCanvasRenderer.prototype.setVariable = function(property, value) {\n    if (this.variables[property] !== value) {\n        this.variables[property] = this.ctx[property] = value;\n    }\n\n    return this;\n};\n\nCanvasRenderer.prototype.text = function(text, left, bottom) {\n    this.ctx.fillText(text, left, bottom);\n};\n\nCanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\n    var shape = [\n        [\"line\", Math.round(left), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(top)],\n        [\"line\", Math.round(left + width), Math.round(height + top)],\n        [\"line\", Math.round(left), Math.round(height + top)]\n    ];\n    this.clip([shape], function() {\n        this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\n    }, this);\n};\n\nCanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\n    var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft), offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\n    this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\n    this.ctx.translate(offsetX, offsetY);\n    this.ctx.fill();\n    this.ctx.translate(-offsetX, -offsetY);\n};\n\nCanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\n    if (gradientImage instanceof LinearGradientContainer) {\n        var gradient = this.ctx.createLinearGradient(\n            bounds.left + bounds.width * gradientImage.x0,\n            bounds.top + bounds.height * gradientImage.y0,\n            bounds.left +  bounds.width * gradientImage.x1,\n            bounds.top +  bounds.height * gradientImage.y1);\n        gradientImage.colorStops.forEach(function(colorStop) {\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\n        });\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\n    }\n};\n\nCanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\n    var image = imageContainer.image;\n    if(image.width === size.width && image.height === size.height) {\n        return image;\n    }\n\n    var ctx, canvas = document.createElement('canvas');\n    canvas.width = size.width;\n    canvas.height = size.height;\n    ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height );\n    return canvas;\n};\n\nfunction hasEntries(array) {\n    return array.length > 0;\n}\n\n}).call({}, typeof(window) !== \"undefined\" ? window : undefined, typeof(document) !== \"undefined\" ? document : undefined);"],"file":"html2canvas.min.js"}