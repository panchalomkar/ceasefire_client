{"version":3,"sources":["loader.js"],"names":["define","$","Ajax","Tether","Event","Aria","breakpoints","Drawer","Notice","str","PubSub","ModalFactory","Feedback","gradeTableScrollHandler","left","offset","parseInt","css","html","concat","toggleSubmenuView","_element","_this","find","key","attr","toggleClass","resetSidebar","window","width","hasClass","trigger","removeClass","document","jQuery","init","popover","selector","container","delay","hide","getLegacyEvents","done","events","on","FILTER_CONTENT_UPDATED","change","onbeforeunload","this","form","submit","length","sidebarFooterHeight","height","ready","is","append","tooltip","availableSpace","numOfVisibleItems","$btn","$vlinks","$hlinks","numOfItems","totalSpace","breakWidths","wdmCollapsibleNavMenu","children","last","prependTo","first","appendTo","addClass","outerWidth","i","w","push","currLeft","body","evt","button","target","currentTarget","closest","subscribe","resize","parents","IGNORE_DRAWER_BTN","click","M","util","set_user_preference","info","get_string","prop","show","animate","scrollTop","scroll","hover","topdistance","distanceFromTop","position","top","screenHeight","submenuid","undefined","submenu","subcourseskey","subcourses","elid","parentel","elkey","e","preventDefault","_activeNodes","each","index","panel","next","keypress","keyCode","setfocus","tabIndex","focus","console","log","sectionEl","parent","label","trim","text","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","element","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msRequestFullscreen","toggleFullScreen","event","create","title","data","modal","call","methodname","args","location","href","cfg","wwwroot","encodeURI","mouseover","mouseout"],"mappings":"AAyBA,aAEAA,OAAO,CAAC,SAAU,YAAa,qBAAsB,aAAc,mBAAoB,0BAA2B,qBAAsB,qBAAsB,WAAY,cAAe,qBAAsB,uBAAwB,sBAAuB,mBAAoB,oBAAqB,qBAAsB,uBAAwB,uBAAwB,uBAAwB,oBAAqB,wBAAyB,kBAAmB,sBAAuB,sBAAuB,wBAAyB,SAAUC,EAAGC,EAAMC,EAAQC,EAAOC,EAAMC,EAAaC,EAAQC,EAAQC,EAAKC,EAAQC,EAAcC,GAQ3mB,SAASC,IACP,IAAIC,EAAOb,EAAE,gBAAgBc,SAASD,KAAOb,EAAE,gBAAgBc,SAASD,KAAOE,SAASf,EAAE,gBAAgBgB,IAAI,iBAC9GhB,EAAE,wBAAwBiB,KAAK,6DAA6DC,OAAOL,EAAM,4CAwT3G,SAASM,EAAkBC,GACzB,IAAIC,EAAQrB,EAAEoB,GAAUE,KAAK,gBAEzBC,EAAMvB,EAAEqB,GAAOG,KAAK,YACxBxB,EAAEqB,GAAOI,YAAY,YACrBzB,EAAE,kDAAoDuB,EAAM,MAAME,YAAY,QA6HhF,SAASC,IACK1B,EAAE2B,QAAQC,QAEV,MACN5B,EAAE,QAAQ6B,SAAS,qBACrB7B,EAAE,uCAAuC8B,QAAQ,SAG/C9B,EAAE,QAAQ6B,SAAS,iBACrB7B,EAAE,qCAAqC8B,QAAQ,SAGjD9B,EAAE,QAAQ+B,YAAY,mBAGxB/B,EAAEgC,UAAUF,QAAQ,0BAldtBH,OAAOM,OAASjC,EAChB2B,OAAOzB,OAASA,EAChBI,EAAO4B,OAWPlC,EAAE,QAAQmC,QAAQ,CAChBL,QAAS,QACTM,SAAU,+CAEZpC,EAAE,QAAQmC,QAAQ,CAChBE,UAAW,OACXD,SAAU,4CACVN,QAAS,QACTQ,MAAO,CACLC,KAAM,OAIVpC,EAAMqC,kBAAkBC,KAAK,SAAUC,GACrC1C,EAAEgC,UAAUW,GAAGD,EAAOE,uBAAwB,WAC5C5C,EAAE,QAAQmC,QAAQ,CAChBC,SAAU,0BACVN,QAAS,cAKf9B,EAAE,sCAAsC6C,OAAO,WAC7ClB,OAAOmB,eAAiB,KACxBC,KAAKC,KAAKC,WAEZ7C,EAAK8B,OAELlC,EAAE,qCAAqC2C,GAAG,QAAS,WACjD3C,EAAE,QAAQyB,YAAY,gBAEjBzB,EAAE,QAAQ6B,SAAS,eACtB7B,EAAE,sBAAsB+B,YAAY,UACpC/B,EAAE,sBAAsBuC,UAI5BvC,EAAEgC,UAAUW,GAAG,yBAA0B,WACvC,GAAwC,GAApC3C,EAAE,wBAAwBkD,OAA9B,CAIA,IAAIC,EAAsBnD,EAAE,wBAAwBoD,SAErB,GAA3BpD,EAAE,eAAekD,QAIrBlD,EAAE,eAAegB,IAAI,SAAUmC,EAAsB,SAEvDnD,EAAEgC,UAAUqB,MAAM,WAEZrD,EAAE,QAAQsD,GAAG,qCACftD,EAAE,QAAQuD,OAAO,4CACjBvD,EAAE,wBAAwB2C,GAAG,SAAU/B,GACvCZ,EAAE2B,QAAQgB,GAAG,SAAU/B,IAGzBZ,EAAE,2BAA2BwD,UAEzBxD,EAAE,QAAQ6B,SAAS,YAAc7B,EAAE,QAAQ6B,SAAS,cACtD7B,EAAE,qCAAqC8B,QAAQ,SAGjD9B,EAAEgC,UAAUF,QAAQ,0BACpB9B,EAAE,iCAAiC2C,GAAG,QAAS,WAC7C3C,EAAEgC,UAAUF,QAAQ,4BAEtBJ,IAIA,IAMI+B,EAAgBC,EANhBC,EAAO3D,EAAE,2BACT4D,EAAU5D,EAAE,qBACZ6D,EAAU7D,EAAE,4BACZ8D,EAAa,EACbC,EAAa,EACbC,EAAc,GAYlB,SAASC,IAEPR,EAAiBG,EAAQhC,QAAU,GACnC8B,EAAoBE,EAAQM,WAAWhB,OACvBc,EAAYN,EAAoB,GAE5BD,GAClBG,EAAQM,WAAWC,OAAOC,UAAUP,GACpCH,GAAqB,EACrBO,KACSR,EAAiBO,EAAYN,KACtCG,EAAQK,WAAWG,QAAQC,SAASV,GACpCF,GAAqB,GAIvBC,EAAKnC,KAAK,QAASsC,EAAaJ,GAE5BA,IAAsBI,EACxBH,EAAKY,SAAS,UAEdZ,EAAK5B,YAAY,UA9BrB6B,EAAQM,WAAWM,WAAW,SAAUC,EAAGC,GACzCX,GAAcW,EACdZ,GAAc,EACdE,EAAYW,KAAKZ,KAgCnBE,IAEAN,EAAKhB,GAAG,QAAS,WACf,IAAIiC,EAAW5E,EAAE+C,MAAMjC,SAASD,KAAO,GACvCgD,EAAQ7C,IAAI,CACVH,KAAM+D,EAAW,OAEnBf,EAAQpC,YAAY,YAGtBzB,EAAEgC,SAAS6C,MAAMlC,GAAG,QAAS,SAAUmC,GAGrC,GAAmB,IAAfA,EAAIC,SAAiB/E,EAAE,mBAAmB6B,SAAS,UAAW,CAChE,IAAImD,EAASF,EAAIE,OAEbA,IAAWF,EAAIG,eAAkBjF,EAAEgF,GAAQE,QAL/B,0EAKoDhC,QAClElD,EAAE,mBAAmBuE,SAAS,aAKpC9D,EAAO0E,UAAU,wBAAyB,WACxClB,MAGFjE,EAAE2B,QAAQyD,OAAO,WACfnB,MAI+E,GAA7EjE,EAAE,qCAAqCqF,QAAQ,oBAAoBnC,OACrElD,EAAEgC,SAAS6C,MAAMlC,GAAG,QAAS,SAAUmC,GACrC,GAAmB,IAAfA,EAAIC,SAAiB/E,EAAE,qCAAqC6B,SAAS,UAAW,CAElF,IAAIyD,EAAoB,+DACpBN,EAASF,EAAIE,OAEbA,IAAWF,EAAIG,eAAkBjF,EAAEgF,GAAQE,QAAQI,GAAmBpC,SACxElD,EAAE,qCAAqCuE,SAAS,UAChDvE,EAAEsF,GAAmBvD,YAAY,cAMvC/B,EAAE,4DAA4DuF,MAAM,WAClEvF,EAAE,qCAAqC+B,YAAY,cAKzD/B,EAAE,qCAAqC2C,GAAG,QAAS,WACjD3C,EAAE,QAAQ+B,YAAY,gBACtB/B,EAAE,QAAQyB,YAAY,kBAElBzB,EAAE,QAAQ6B,SAAS,mBACrB2D,EAAEC,KAAKC,oBAAoB,YAAa,QACxCnF,EAAOoF,KAAKH,EAAEC,KAAKG,WAAW,gBAAiB,gBAC/C5F,EAAE+C,MAAM8C,KAAK,QAASL,EAAEC,KAAKG,WAAW,eAAgB,kBAExDJ,EAAEC,KAAKC,oBAAoB,YAAa,IACxCnF,EAAOoF,KAAKH,EAAEC,KAAKG,WAAW,kBAAmB,gBACjD5F,EAAE+C,MAAM8C,KAAK,QAASL,EAAEC,KAAKG,WAAW,aAAc,mBAI1D5F,EAAE,2CAA2C2C,GAAG,QAAS,WACvD3C,EAAE,2CAA2CwB,KAAK,iBAAiB,GACnExB,EAAE+C,MAAMvB,KAAK,iBAAiB,KAGhCxB,EAAEgC,SAAS6C,MAAMlC,GAAG,QAAS,SAAUmC,GAGrC,GAAmB,IAAfA,EAAIC,QAAgB/E,EAAE,QAAQ6B,SAAS,gBAAiB,CAC1D,IAAImD,EAASF,EAAIE,OAEbA,IAAWF,EAAIG,eAAkBjF,EAAEgF,GAAQE,QAL/B,kDAKoDhC,SAClElD,EAAE,QAAQ+B,YAAY,gBACtB/B,EAAE,sBAAsBuE,SAAS,UACjCvE,EAAE,sBAAsB8F,WAK9B9F,EAAE,UAAUuF,MAAM,WAIhB,OAHAvF,EAAE,cAAc+F,QAAQ,CACtBC,UAAW,GACVhG,EAAE2B,QAAQqE,YAAc,IACpB,IAGThG,EAAE2B,QAAQsE,OAAO,WACXjG,EAAE+C,MAAMiD,YAAc,IACxBhG,EAAE,UAAU+B,YAAY,UAAUwC,SAAS,UAE3CvE,EAAE,UAAU+B,YAAY,UAAUwC,SAAS,YAI/CvE,EAAE,sEAAsEkG,MAAM,WAC5E,GAAKlG,EAAE,eAAe6B,SAAS,UAA/B,CAIA,IAKIsE,EALAC,EAAkBpG,EAAE+C,MAAMsD,WAAWC,IAAMtG,EAAE,iCAAiCoD,SAC9EmD,EAAevG,EAAE2B,QAAQyB,SAC7BpD,EAAE+C,MAAMwB,SAAS,WACjBvE,EAAE,eAAegB,IAAI,MAAOoF,EAAkB,MAG9C,IAAII,EAAYxG,EAAE+C,MAAMvB,KAAK,eAE7B,GAAiBiF,MAAbD,GAAuC,IAAbA,EAAiB,CAC7C,IAAIE,EAAU1G,EAAE,GAAGkB,OAAOsF,IAEtBE,EAAQxD,OAAS,IAEjBiD,EADEC,EAAkBG,EAAe,EACrBH,EAAkB,GAElBA,EAAkBpG,EAAE0G,GAAStD,SAG7CpD,EAAE0G,GAAS1F,IAAI,MAAOmF,EAAc,MACpCnG,EAAE0G,GAASnC,SAAS,aAKxB,IAAIoC,EAAgB3G,EAAE+C,MAAMvB,KAAK,YAEjC,GAAqBiF,MAAjBE,EAA4B,CAC9B,IAAIC,EAAa5G,EAAE,gCAAkC2G,GAEjDP,EAAkBG,EAAe,GACnCJ,EAAcC,EAAkB,GAChCpG,EAAE4G,GAAY5F,IAAI,MAAOmF,EAAc,MACvCnG,EAAE4G,GAAYrC,SAAS,cAEvBvE,EAAE4G,GAAYrC,SAAS,YACvB4B,EAAcC,EAAkBpG,EAAE4G,GAAYxD,SAC9CpD,EAAE4G,GAAY5F,IAAI,MAAOmF,EAAc,UAG1C,WACDnG,EAAE+C,MAAMhB,YAAY,WACpB/B,EAAE,aAAa+B,YAAY,YAC3B/B,EAAE,gCAAgC+B,YAAY,cAEhD/B,EAAE,aAAakG,MAAM,WACnB,IAAIW,EAAO7G,EAAE+C,MAAMvB,KAAK,MACpBsF,EAAW9G,EAAE,8CAAgD6G,EAAO,MACxE7G,EAAE8G,GAAUhF,QAAQ,cACpB9B,EAAE8G,GAAUhF,QAAQ,SACpB9B,EAAE8G,GAAUhF,QAAQ,cACnB,WACD,IAAI+E,EAAO7G,EAAE+C,MAAMvB,KAAK,MACpBsF,EAAW9G,EAAE,8CAAgD6G,EAAO,MACxE7G,EAAE8G,GAAUhF,QAAQ,cAGtB9B,EAAE,gCAAgCkG,MAAM,WACtC,IAAIa,EAAQ/G,EAAE+C,MAAMvB,KAAK,mBACrBsF,EAAW9G,EAAE,0CAA4C+G,EAAQ,MACrE/G,EAAE8G,GAAUhF,QAAQ,cACpB9B,EAAE8G,GAAUhF,QAAQ,SACpB9B,EAAE8G,GAAUhF,QAAQ,cACnB,WACD,IAAIiF,EAAQ/G,EAAE+C,MAAMvB,KAAK,mBACrBsF,EAAW9G,EAAE,0CAA4C+G,EAAQ,MACrE/G,EAAE8G,GAAUhF,QAAQ,cAGtB9B,EAAE,+BAA+B2C,GAAG,QAAS,SAAUqE,GACrDA,EAAEC,iBACF,IAAIC,EAAe,0EAIdlH,EAFO+C,MAEEO,GAAGtD,EAAEkH,KACjBlH,EAAEkH,GAAcC,KAAK,SAAUC,GAC7BpH,EAAE+C,MAAMtB,YAAY,UACpBN,EAAkB4B,QAItB5B,EATY4B,MAUZ/C,EAVY+C,MAUHtB,YAAY,UACrB,IAAI4F,EAAQrH,EAXA+C,MAWSuE,KAAK,IAAMtH,EAXpB+C,MAW6BvB,KAAK,aAC9CxB,EAAEqH,GAAO5F,YAAY,YAWvBzB,EAAE,4BAA4BuH,SAAS,SAAUP,GAC/C,GAAiB,IAAbA,EAAEQ,SAA8B,IAAbR,EAAEQ,QAEvB,IACER,EAAEC,iBACF,IAAIQ,EAAW,EACXlG,EAAMvB,EAAE+C,MAAMvB,KAAK,YACvBxB,EAAE,+BAA+ByB,YAAY,YAC7CzB,EAAE,kDAAoDuB,EAAM,MAAME,YAAY,QAE9EzB,EAAE,kDAAoDuB,EAAM,MAAM4F,KAAK,SAAUC,IACW,GAAtFpH,EAAE,kDAAoDuB,EAAM,MAAM6F,GAAOM,UAC3ED,EAAW,EACXzH,EAAE,kDAAoDuB,EAAM,MAAM6F,GAAOM,SAAW,GAEpF1H,EAAE,kDAAoDuB,EAAM,MAAM6F,GAAOM,UAAY,IAIrFD,GACFzH,EAAE,kDAAoDuB,EAAM,MAAM,GAAGoG,QAEvE,MAAOX,GACPY,QAAQC,IAAIb,MAKlBhH,EAAE,gCAAgCuF,MAAM,WACtC,IACIuC,EADW9H,EAAE+C,MAAMgF,SAASA,SAASA,SAChBzG,KAAK,cAE1BwG,EAAU5E,SACZlD,EAAE+C,MAAMtB,YAAY,QACpBzB,EAAE8H,GAAWrG,YAAY,WAGU,SAAjCzB,EAAE+C,MAAMvB,KAAK,iBAGfxB,EAAE+C,MAAMvB,KAAK,gBAAiB,QAI9BxB,EAAE+C,MAAMvB,KAAK,gBAAiB,WAGlCxB,EAAE,gCAAgCuH,SAAS,SAAUP,GACnD,GAAiB,IAAbA,EAAEQ,SAA8B,IAAbR,EAAEQ,QAEvB,IACE,IACIM,EADW9H,EAAE+C,MAAMgF,SAASA,SAASA,SAChBzG,KAAK,cAE1BwG,EAAU5E,SACZlD,EAAE+C,MAAMtB,YAAY,QACpBzB,EAAE8H,GAAWrG,YAAY,WAGU,SAAjCzB,EAAE+C,MAAMvB,KAAK,kBAGfxB,EAAE+C,MAAMvB,KAAK,gBAAiB,QAC9BxB,EAAE8H,GAAWH,SAIb3H,EAAE+C,MAAMvB,KAAK,gBAAiB,SAEhC,MAAOwF,GACPY,QAAQC,IAAIb,MAKlBhH,EAAE,uCAAuCmH,KAAK,WAC5C,IAAIa,EAAQhI,EAAEiI,KAAKjI,EAAE,kBAAmB+C,MAAMmF,QAC9ClI,EAAE,kBAAmB+C,MAAMvB,KAAK,cAAewG,KAGjDhI,EAAE,qBAAqBuF,MAAM,WAC3BvF,EAAE+C,MAAMtB,YAAY,YAOtB,WACE,GAAIO,SAASmG,mBAAqBnG,SAASoG,yBAA2BpG,SAASqG,sBAAwBrG,SAASsG,oBAC1GtG,SAASuG,eACXvG,SAASuG,iBACAvG,SAASwG,oBAClBxG,SAASwG,sBACAxG,SAASyG,qBAClBzG,SAASyG,uBACAzG,SAAS0G,kBAClB1G,SAAS0G,uBAEN,CACL,IAAIC,EAAU3I,EAAE,QAAQ,GAEpB2I,EAAQC,kBACVD,EAAQC,oBACCD,EAAQE,qBACjBF,EAAQE,uBACCF,EAAQG,wBACjBH,EAAQG,wBAAwBC,QAAQC,sBAC/BL,EAAQM,qBACjBN,EAAQM,uBA3BZC,KAiCFlJ,EAAE,kCAAkCuF,MAAM,WACxCvF,EAAE+C,MAAMuE,OAAOhG,KAAK,8BAA8BQ,QAAQ,WAyB5D9B,EAAE2B,QAAQyD,OAAO,WACf1D,MAEF1B,EAAE,mBAAmBuF,MAAM,WACzBvF,EAAE,0BAA0ByB,YAAY,UAE1CzB,EAAE,QAAQ2C,GAAG,QAAS,iBAAkB,SAAUwG,GAChDA,EAAMlC,iBACN,IAAInF,EAAU9B,EAAE,iBAChBU,EAAa0I,OAAO,CAClBC,MAAO7D,EAAEC,KAAKG,WAAW,YAAa,eACtCf,KAAM7E,EAAE+C,MAAMuG,KAAK,QAClBxH,GAASW,KAAK,SAAU8G,GACzBA,EAAMzD,WAKV9F,EAAE,sCAAsCuF,MAAM,WAC5CtF,EAAKuJ,KAAK,CAAC,CACTC,WAAc,0BACdC,KAAQ,QAIZ1J,EAAE,4CAA4CuF,MAAM,WAClDC,EAAEC,KAAKC,oBAAoB,+BAA+B,KAE5D1F,EAAE,+BAA+B2C,GAAG,QAAS,WAC3ChB,OAAOgI,SAASC,KAAOpE,EAAEqE,IAAIC,QAAU,mCAAqCC,UAAUpI,OAAOgI,SAASC,QAGxG5J,EAAE,uCAAuCgK,UAAU,WACjDhK,EAAE,uCAAuCgB,IAAI,SAAU,GAAGE,OAAO,GAAKlB,EAAE+C,MAAMzB,KAAK,kBAAkB4B,OAAQ,SAC5G+G,SAAS,WACVjK,EAAE,uCAAuCgB,IAAI,SAAU","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Template renderer for Moodle. Load and render Moodle templates with Mustache.\n *\n * @module     core/templates\n * @package    core\n * @class      templates\n * @copyright  2015 Damyon Wiese <damyon@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      2.9\n */\n\"use strict\";\ndefine([\n    'jquery',\n    'core/ajax',\n    'theme_remui/tether',\n    'core/event',\n    'theme_remui/aria',\n    'theme_remui/breakpoints',\n    'theme_remui/drawer',\n    'theme_remui/notice',\n    'core/str',\n    'core/pubsub',\n    'core/modal_factory',\n    'theme_remui/feedback',\n    'theme_remui/pending',\n    'theme_remui/util',\n    'theme_remui/alert',\n    'theme_remui/button',\n    'theme_remui/carousel',\n    'theme_remui/collapse',\n    'theme_remui/dropdown',\n    'theme_remui/modal',\n    'theme_remui/scrollspy',\n    'theme_remui/tab',\n    'theme_remui/tooltip',\n    'theme_remui/popover',\n    'theme_remui/skintool',\n], function(\n    $,\n    Ajax,\n    Tether,\n    Event,\n    Aria,\n    breakpoints,\n    Drawer,\n    Notice,\n    str,\n    PubSub,\n    ModalFactory,\n    Feedback\n) {\n\n    window.jQuery = $;\n    window.Tether = Tether;\n    Drawer.init();\n\n    /**\n     * Handle scrolling event on grade page.\n     */\n     function gradeTableScrollHandler() {\n        let left = $('#region-main').offset().left -\n        $('#user-grades').offset().left + parseInt($('#region-main').css('padding-left'));\n        $('#grade-scrolling-fix').html(`\n            .sideonly.floating {\n                left: ${left}px !important;\n            }\n        `);\n    }\n\n    // We do twice because: https://github.com/twbs/bootstrap/issues/10547 end.\n    $('body').popover({\n        trigger: 'focus',\n        selector: \"[data-toggle=popover][data-trigger!=hover]\"\n    });\n\n    $(\"html\").popover({\n        container: \"body\",\n        selector: \"[data-toggle=popover][data-trigger=hover]\",\n        trigger: \"hover\",\n        delay: {\n            hide: 500\n        }\n    });\n\n    // We need to call popover automatically if nodes are added to the page later.\n    Event.getLegacyEvents().done(function(events) {\n        $(document).on(events.FILTER_CONTENT_UPDATED, function() {\n            $('body').popover({\n                selector: '[data-toggle=\"popover\"]',\n                trigger: 'focus'\n            });\n\n        });\n    });\n\n    // Settings update on change.\n    $(`#id_s_theme_remui_frontpagechooser`).change(function() {\n        window.onbeforeunload = null;\n        this.form.submit();\n    });\n    Aria.init();\n    // Open Right Sidebar.\n    $(\".page-aside-switch .fa-angle-left\").on('click', function() {\n        $(\"body\").toggleClass('sidebar-open');\n        if (!$(\"body\").hasClass(\"hasblocks\")) {\n            $(\".page-aside-switch\").removeClass('d-flex');\n            $(\".page-aside-switch\").hide();\n        }\n    });\n\n    // Created custom event to adjust left sidebar scrollable height.\n    $(document).on('remui-adjust-left-side', function() {\n        if ($('.site-menubar-footer').length == 0) {\n            return;\n        }\n        let sidebarFooterHeight = $('.site-menubar-footer').height();\n        if ($('#nav-drawer').length == 0) {\n            return;\n        }\n        $('#nav-drawer').css('bottom', sidebarFooterHeight + 'px');\n    });\n\n    $(document).ready(function() {\n\n        // Dirty hack to handler grade page scrolling issue.\n        if ($('body').is('#page-grade-report-grader-index')) {\n            $('body').append('<style id=\"grade-scrolling-fix\"></style>');\n            $('#region-main > .card').on('scroll', gradeTableScrollHandler);\n            $(window).on('scroll', gradeTableScrollHandler);\n        }\n        $('[data-toggle=\"tooltip\"]').tooltip();\n        if ($(\"body\").hasClass(\"editing\") && $(\"body\").hasClass(\"hasblocks\")) {\n            $(\".page-aside-switch .fa-angle-left\").trigger('click');\n        }\n\n        $(document).trigger('remui-adjust-left-side');\n\n        $('[data-region=\"drawer-toggle\"]').on('click', function() {\n            $(document).trigger('remui-adjust-left-side');\n        });\n\n        resetSidebar();\n\n        // Collapsible menu in header implementation.\n        // Moves excess menu items to 3 dot menu on resize and based on available screen space.\n\n        // Greedy menu js implementation.\n        var $btn = $('nav.greedy .menu-toggle');\n        var $vlinks = $('nav.greedy .links');\n        var $hlinks = $('nav.greedy .hidden-links');\n        var numOfItems = 0;\n        var totalSpace = 0;\n        var breakWidths = [];\n        var availableSpace, numOfVisibleItems, requiredSpace;\n\n        // Get initial state.\n        $vlinks.children().outerWidth(function(i, w) {\n            totalSpace += w;\n            numOfItems += 1;\n            breakWidths.push(totalSpace);\n        });\n\n        /**\n         * Custom collapsible navigation menu\n         */\n        function wdmCollapsibleNavMenu() {\n            // Get instant state.\n            availableSpace = $vlinks.width() - 10;\n            numOfVisibleItems = $vlinks.children().length;\n            requiredSpace = breakWidths[numOfVisibleItems - 1];\n\n            // There is not enought space.\n            if (requiredSpace > availableSpace) {\n                $vlinks.children().last().prependTo($hlinks);\n                numOfVisibleItems -= 1;\n                wdmCollapsibleNavMenu();\n                // There is more than enough space.\n            } else if (availableSpace > breakWidths[numOfVisibleItems]) {\n                $hlinks.children().first().appendTo($vlinks);\n                numOfVisibleItems += 1;\n            }\n            // Update the button accordingly.\n            $btn.attr(\"count\", numOfItems - numOfVisibleItems);\n            if (numOfVisibleItems === numOfItems) {\n                $btn.addClass('hidden');\n            } else {\n                $btn.removeClass('hidden');\n            }\n        }\n\n        // Init collapsible nav menu.\n        wdmCollapsibleNavMenu();\n\n        // Hide / show hidden-links ul on click button.\n        $btn.on('click', function() {\n            var currLeft = $(this).offset().left - 25;\n            $hlinks.css({\n                left: currLeft + \"px\"\n            });\n            $hlinks.toggleClass('hidden');\n        });\n\n        // Close when clicking somewhere else.\n        $(document.body).on('click', function(evt) {\n            let IGNORED_ELS = 'ul.hidden-links, button.menu-toggle, .modal, .alertify, .-handled-lick';\n            if (evt.button === 0 && !$('ul.hidden-links').hasClass('hidden')) {\n                var target = evt.target;\n                if (target === evt.currentTarget || !$(target).closest(IGNORED_ELS).length) {\n                    $('ul.hidden-links').addClass('hidden');\n                }\n            }\n        });\n\n        // Resize menu when drawer opens closes.\n        PubSub.subscribe('nav-drawer-toggle-end', function() {\n            wdmCollapsibleNavMenu();\n        });\n\n        // Window listeners.\n        $(window).resize(function() {\n            wdmCollapsibleNavMenu();\n        });\n\n        // Collapsible menu JS ends.\n\n        // Auto hide messaging bar when not merged in sidebar.\n        if ($('[data-region=\"right-hand-drawer\"]').parents('#sidebar-message').length == 0) {\n            $(document.body).on('click', function(evt) {\n                if (evt.button === 0 && !$('[data-region=\"right-hand-drawer\"]').hasClass('hidden')) {\n                    // Hide Message Drawer if click outsite.\n                    var IGNORE_DRAWER_BTN = '[data-region=\"right-hand-drawer\"], [href=\"#sidebar-message\"]';\n                    var target = evt.target;\n                    if (target === evt.currentTarget || !$(target).closest(IGNORE_DRAWER_BTN).length) {\n                        $('[data-region=\"right-hand-drawer\"]').addClass(\"hidden\");\n                        $(IGNORE_DRAWER_BTN).removeClass('active');\n                    }\n                }\n            });\n        } else {\n            // Prevent messaging bar toggle when merged in sidebar.\n            $('.page-aside .nav-item .nav-link[href=\"#sidebar-message\"]').click(function() {\n                $('[data-region=\"right-hand-drawer\"]').removeClass('hidden');\n            });\n        }\n    });\n\n    // Pin & Unpin Right Sidebar.\n    $(\".page-aside-switch .fa-thumb-tack\").on('click', function() {\n        $(\"body\").removeClass('sidebar-open');\n        $(\"body\").toggleClass('sidebar-pinned');\n        if ($('body').hasClass('sidebar-pinned')) {\n            M.util.set_user_preference('pin_aside', 'true');\n            Notice.info(M.util.get_string('sidebarpinned', 'theme_remui'));\n            $(this).prop('title', M.util.get_string('unpinsidebar', 'theme_remui'));\n        } else {\n            M.util.set_user_preference('pin_aside', '');\n            Notice.info(M.util.get_string('sidebarunpinned', 'theme_remui'));\n            $(this).prop('title', M.util.get_string('pinsidebar', 'theme_remui'));\n        }\n    });\n    // This function ...  handles the aria-selected attribute for tabs in right sidebar.\n    $('.page-aside .site-sidebar-nav .nav-link').on('click', function(){\n        $('.page-aside .site-sidebar-nav .nav-link').attr('aria-selected', false);\n        $(this).attr('aria-selected', true);\n    });\n\n    // Close Right Sidebar on click outside.\n    $(document.body).on('click', function(evt) {\n        let IGNORED_ELS = '.page-aside, .modal, .alertify, .-handled-lick';\n        if (evt.button === 0 && $('body').hasClass('sidebar-open')) {\n            var target = evt.target;\n            if (target === evt.currentTarget || !$(target).closest(IGNORED_ELS).length) {\n                $('body').removeClass('sidebar-open');\n                $(\".page-aside-switch\").addClass('d-flex');\n                $(\".page-aside-switch\").show();\n            }\n        }\n    });\n\n    // Scroll to top.\n    $(\"#gotop\").click(function() {\n        $('html, body').animate({scrollTop: 0}, $(window).scrollTop() / 6);\n        return false;\n    });\n\n    // Hide and Show Go to top button.\n    $(window).scroll(function() {\n        if ($(this).scrollTop() > 300) {\n            $('#gotop').removeClass(\"d-none\").addClass(\"d-flex\");\n        } else {\n            $('#gotop').removeClass(\"d-flex\").addClass(\"d-none\");\n        }\n    });\n\n    // Display Submenu on Hover on closed sidebar.\n    $('#nav-drawer .list-group-item:not(.activity):not([data-indent=\"1\"])').hover(function() {\n        if (!$('#nav-drawer').hasClass('closed')) {\n            return;\n        }\n        let distanceFromTop = $(this).position().top + $('nav.fixed-top:not(.fm-navbar)').height();\n        let screenHeight = $(window).height();\n        $(this).addClass('hovered');\n        $('.media-body').css('top', distanceFromTop + 'px');\n        // Sub Menu.\n        let topdistance;\n        let submenuid = $(this).attr('data-target');\n        if (submenuid != undefined && submenuid != \"\") {\n            let submenu = $(`${submenuid}`);\n            if (submenu.length > 0) {\n                if (distanceFromTop < (screenHeight / 2)) {\n                    topdistance = distanceFromTop + 52;\n                } else {\n                    topdistance = distanceFromTop - $(submenu).height();\n                }\n                $(submenu).css('top', topdistance + 'px');\n                $(submenu).addClass('pop-over');\n            }\n        }\n        // My Courses data-indent = 1.\n        let subcourseskey = $(this).attr('data-key');\n        if (subcourseskey != undefined ) {\n            var subcourses = $('#nav-drawer .mycoursesubmenu.'+subcourseskey);\n            if (distanceFromTop < (screenHeight / 2)) {\n                topdistance = distanceFromTop + 52;\n                $(subcourses).css('top', topdistance + 'px');\n                $(subcourses).addClass('pop-over');\n            } else {\n                $(subcourses).addClass('pop-over');\n                topdistance = distanceFromTop - $(subcourses).height();\n                $(subcourses).css('top', topdistance + 'px');\n            }\n        }\n    }, function() {\n        $(this).removeClass('hovered');\n        $('.sub-menu').removeClass('pop-over');\n        $('#nav-drawer .mycoursesubmenu').removeClass('pop-over');\n    });\n\n    $('.sub-menu').hover(function() {\n        let elid = $(this).attr('id');\n        let parentel = $('#nav-drawer .list-group-item[data-target=\"#' + elid + '\"]');\n        $(parentel).trigger('mouseenter');\n        $(parentel).trigger('hover');\n        $(parentel).trigger('mouseover');\n    }, function() {\n        let elid = $(this).attr('id');\n        let parentel = $('#nav-drawer .list-group-item[data-target=\"#' + elid + '\"]');\n        $(parentel).trigger('mouseout');\n    });\n\n    // My Courses.\n    $('#nav-drawer .mycoursesubmenu').hover(function() {\n        let elkey = $(this).attr('data-parent-key');\n        let parentel = $('#nav-drawer .list-group-item[data-key=\"' + elkey + '\"]');\n        $(parentel).trigger('mouseenter');\n        $(parentel).trigger('hover');\n        $(parentel).trigger('mouseover');\n    }, function() {\n        let elkey = $(this).attr('data-parent-key');\n        let parentel = $('#nav-drawer .list-group-item[data-key=\"' + elkey + '\"]');\n        $(parentel).trigger('mouseout');\n    });\n    // Flat Navigation Improvements.\n    $('#nav-drawer .toggle-submenu').on('click', function(e) {\n        e.preventDefault();\n        let _activeNodes = \"#nav-drawer .toggle-submenu.active, #nav-drawer .mycoursesubmenu.active\";\n        let _this = this;\n        if (!$(_this).is($(_activeNodes))) {\n            $( _activeNodes ).each(function( index ) {\n                $( this ).toggleClass('active');\n                toggleSubmenuView(this);\n            });\n        }\n\n        toggleSubmenuView(_this);\n        $(_this).toggleClass(\"active\");\n        var panel = $(_this).next(\".\" + $(_this).attr('data-key'));\n        $(panel).toggleClass(\"active\");\n    });\n\n    function toggleSubmenuView(_element){\n        let _this = $(_element).find('.toggle-menu');\n        let key = $(_this).attr('data-key');\n        $(_this).toggleClass('rotate90');\n        $('#nav-drawer a.list-group-item[data-parent-key=\"' + key + '\"]').toggleClass('show');\n    }\n\n    $('#nav-drawer .toggle-menu').keypress(function(e){\n        if(e.keyCode == 32 || e.keyCode == 13){\n            //spacebar or enter clicks focused element\n            try {\n                e.preventDefault();\n                let setfocus = 0;\n                let key = $(this).attr('data-key');\n                $('#nav-drawer .fa-angle-right').toggleClass('rotate90');\n                $('#nav-drawer a.list-group-item[data-parent-key=\"' + key + '\"]').toggleClass('show');\n                // Fetch all sub menu items and change their tabindex property \n                $('#nav-drawer a.list-group-item[data-parent-key=\"' + key + '\"]').each(function( index ) {\n                    if ($('#nav-drawer a.list-group-item[data-parent-key=\"' + key + '\"]')[index].tabIndex == -1){\n                        setfocus = 1;\n                        $('#nav-drawer a.list-group-item[data-parent-key=\"' + key + '\"]')[index].tabIndex = 0;\n                    } else {\n                        $('#nav-drawer a.list-group-item[data-parent-key=\"' + key + '\"]')[index].tabIndex = -1;\n                    }\n                });\n                // Set the focus to first element of List\n                if (setfocus) {\n                    $('#nav-drawer a.list-group-item[data-parent-key=\"' + key + '\"]')[0].focus();\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }            \n        }\n    });\n\n    // Toggle section show or hide in default course formats.\n    $('.sectionname .toggle-section').click(function() {\n        let parentEl = $(this).parent().parent().parent();\n        let sectionEl = parentEl.find('ul.section');\n        if (sectionEl.length) {\n            $(this).toggleClass('down');\n            $(sectionEl).toggleClass('hidden');\n        }\n\n        if ($(this).attr('aria-expanded') == 'false') { // region is collapsed\n            // update the aria-expanded attribute of the region\n            $(this).attr('aria-expanded', 'true');\n        }\n        else { // region is expanded\n            // update the aria-expanded attribute of the region\n            $(this).attr('aria-expanded', 'false');\n        }\n    });\n\n    $('.sectionname .toggle-section').keypress(function(e){\n        if(e.keyCode == 32 || e.keyCode == 13){\n            //spacebar or enter clicks focused element\n            try {\n                let parentEl = $(this).parent().parent().parent();\n                let sectionEl = parentEl.find('ul.section');\n                if (sectionEl.length) {\n                    $(this).toggleClass('down');\n                    $(sectionEl).toggleClass('hidden');\n                }\n                if ($(this).attr('aria-expanded') == 'false') { // region is collapsed\n                    // update the aria-expanded attribute of the region\n                    $(this).attr('aria-expanded', 'true');\n                    $(sectionEl).focus();\n                }\n                else { // region is expanded\n                    // update the aria-expanded attribute of the region\n                    $(this).attr('aria-expanded', 'false');\n                }\n            }\n            catch (e) {\n                console.log(e);\n            }            \n        }\n    });\n\n    // Add signup form fields placeholders.\n    $(\".signupform .fcontainer .form-group\").each(function() {\n        var label = $.trim($(\".col-form-label\", this).text());\n        $(\".felement input\", this).attr('placeholder', label);\n    });\n\n    // Function for fullscreen.\n    $('#toggleFullscreen').click(function() {\n        $(this).toggleClass('collapse');\n        toggleFullScreen();\n    });\n\n    /**\n     * Toggle fullscreen\n     */\n    function toggleFullScreen() {\n        if (document.fullscreenElement ||\n            document.webkitFullscreenElement ||\n            document.mozFullScreenElement ||\n            document.msFullscreenElement) {\n            if (document.exitFullscreen) {\n                document.exitFullscreen();\n            } else if (document.mozCancelFullScreen) {\n                document.mozCancelFullScreen();\n            } else if (document.webkitExitFullscreen) {\n                document.webkitExitFullscreen();\n            } else if (document.msExitFullscreen) {\n                document.msExitFullscreen();\n            }\n        } else {\n            var element = $('html')[0];\n            if (element.requestFullscreen) {\n                element.requestFullscreen();\n            } else if (element.mozRequestFullScreen) {\n                element.mozRequestFullScreen();\n            } else if (element.webkitRequestFullscreen) {\n                element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n            } else if (element.msRequestFullscreen) {\n                element.msRequestFullscreen();\n            }\n        }\n    }\n\n\n    // Fix to get message details when no blocks are present.\n    $('.page-aside .page-aside-switch').click(function() {\n        $(this).next().find('.nav-item .nav-link.active').trigger('click');\n    });\n\n    /**\n     * Close drawer and sidebar automatically on smaller window size.\n     */\n    function resetSidebar() {\n        var width = $(window).width();\n        if (width < 992) {\n            if ($('body').hasClass('drawer-open-left')) {\n                $('button[data-action=\"toggle-drawer\"]').trigger('click');\n            }\n            if ($('body').hasClass('sidebar-open')) {\n                $('.page-aside-switch .fa-angle-left').trigger('click');\n            }\n            $('body').removeClass('sidebar-pinned');\n        }\n        $(document).trigger('remui-adjust-left-side');\n    }\n\n    // Resize listner for reset sidebar function.\n    $(window).resize(function() {\n        resetSidebar();\n    });\n\n    $('.navbar-toggler').click(function() {\n        $('.navbar-nav.right-menu').toggleClass('show');\n    });\n\n    $('body').on('click', '.showchangelog', function(event) {\n        event.preventDefault();\n        var trigger = $('#create-modal');\n        ModalFactory.create({\n            title: M.util.get_string('changelog', 'theme_remui'),\n            body: $(this).data('log')\n        }, trigger).done(function(modal) {\n            modal.show();\n        });\n        return;\n    });\n\n    // Hide update-nag ribbon.\n    $('.update-nag [data-dismiss=\"alert\"]').click(function() {\n        Ajax.call([{\n            'methodname': 'theme_remui_hide_update',\n            'args': {}\n        }]);\n    });\n\n    // Save the preference, after dismiss the announcement\n    $('.site-announcement #dismiss_announcement').click(function(){\n        M.util.set_user_preference('remui_dismised_announcement', true);\n    });\n\n    $('.customizer-turn-editing-on').on('click', function() {\n        window.location.href = M.cfg.wwwroot + '/theme/remui/customizer.php?url=' + encodeURI(window.location.href);\n    });\n\n    // Showing closed sidebar's all footer icon on mouse over.\n    $('.site-menubar-footer.sidebar-closed').mouseover(function() {\n        $('.site-menubar-footer.sidebar-closed').css('height', `${55 * $(this).find('a:not(:hidden)').length}px`);\n    }).mouseout(function() {\n        $('.site-menubar-footer.sidebar-closed').css('height', '55px');\n    });\n\n    \n});\n"],"file":"loader.min.js"}