{"version":3,"sources":["customizer.js"],"names":["define","$","Ajax","Notification","ModalFactory","ModalEvents","Utils","globalSite","globalBody","globalColors","globalHeading","globalButtons","headerSiteIdentity","headerPrimary","headerMenu","leftSidebar","footer","additionalSettings","formssettings","iconsettings","PROMISES","SAVE_SETTINGS","settings","call","methodname","args","SELECTOR","CUSTOMIZER","CONTROLS","MODE_TOGGLE","WRAP","CLOSE_CUSTOMIZER","CUSTMIZER_TOGGLE","COLOR_SETTING","PUBLISH","IFRAME","MAIN_OVERLAY","PANEL_LINK","PANEL_BACK","PANEL","PANEL_ID","PREVIOUS","CURRENT","NEXT","SETTINGS_RESET","INPUT_RESET","SELECT_RESET","CHECKBOX_RESET","COLOR_RESET","TEXTAREA_RESET","HTMLEDITOR_RESET","HEADING_TOGGLE","RANGEINPUT","initHandlers","init","document","trigger","applySettings","apply","window","ready","on","getDocument","find","addClass","closest","removeClass","contentWindow","this","setTimeout","history","replaceState","title","M","cfg","wwwroot","encodeURI","location","href","attr","hideLoader","onbeforeunload","showLoader","create","util","get_string","body","type","types","SAVE_CANCEL","done","modal","show","setSaveButtonText","getRoot","save","JSON","stringify","response","reload","fail","ex","exception","data","concat","event","preventDefault","serializeArray","forEach","element","index","name","is","value","spectrum","toString","obj","ALERT","status","errors","message","toggleClass","color","next","prop","val","textarea","html","slideToggle","id","text"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/notification',\n    'core/modal_factory',\n    'core/modal_events',\n    './customizer/utils',\n    './customizer/global-site',\n    './customizer/global-body',\n    './customizer/global-colors',\n    './customizer/global-heading',\n    './customizer/global-buttons',\n    './customizer/header-site-identity',\n    './customizer/header-primary',\n    './customizer/header-menu',\n    './customizer/left-sidebar',\n    './customizer/footer',\n    './customizer/additional-settings',\n    './customizer/forms-settings',\n    './customizer/icon-settings',\n    'core/modal_save_cancel'\n], function(\n    $,\n    Ajax,\n    Notification,\n    ModalFactory,\n    ModalEvents,\n    Utils,\n    globalSite,\n    globalBody,\n    globalColors,\n    globalHeading,\n    globalButtons,\n    headerSiteIdentity,\n    headerPrimary,\n    headerMenu,\n    leftSidebar,\n    footer,\n    additionalSettings,\n    formssettings,\n    iconsettings\n) {\n\n    /**\n     * Ajax promise requests\n     */\n    var PROMISES = {\n        /**\n         * Save settings to database\n         * @param {String} settings Encoded settings string\n         * @return {Promise}\n         */\n        SAVE_SETTINGS: function(settings) {\n            return Ajax.call([{\n                methodname: 'theme_remui_customizer_save_settings',\n                args: {\n                    'settings': settings\n                }\n            }])[0];\n        }\n    };\n\n    /**\n     * Selectors\n     */\n    var SELECTOR = {\n        CUSTOMIZER: '#customizer',\n        CONTROLS: '#customize-controls',\n        MODE_TOGGLE: '#customize-controls .mode-toggle',\n        WRAP: '#customizer-wrap',\n        CLOSE_CUSTOMIZER: '.customize-controls-close',\n        CUSTMIZER_TOGGLE: '.customizer-controls-toggle',\n        COLOR_SETTING: '.setting-type-color',\n        PUBLISH: '#publish-settings',\n        IFRAME: '#customizer-frame',\n        MAIN_OVERLAY: '#main-overlay',\n        PANEL_LINK: '[sidebar-panel-link]',\n        PANEL_BACK: '.customize-panel-back',\n        PANEL: '.sidebar-panel',\n        PANEL_ID: 'panel-id',\n        PREVIOUS: 'previous',\n        CURRENT: 'current',\n        NEXT: 'next',\n        SETTINGS_RESET: '#reset-settings',\n        INPUT_RESET: '.input-reset',\n        SELECT_RESET: '.select-reset',\n        CHECKBOX_RESET: '.checkbox-reset',\n        COLOR_RESET: '.color-reset',\n        TEXTAREA_RESET: '.textarea-reset',\n        HTMLEDITOR_RESET: '.htmleditor-reset',\n        HEADING_TOGGLE: '.heading-toggle',\n        RANGEINPUT: '.form-range'\n    };\n\n    /**\n     * Initialize setting change handler.\n     */\n    function initHandlers() {\n        globalSite.init();\n        globalBody.init();\n        globalColors.init();\n        globalHeading.init();\n        globalButtons.init();\n        headerSiteIdentity.init();\n        headerPrimary.init();\n        headerMenu.init();\n        leftSidebar.init();\n        footer.init();\n        additionalSettings.init();\n        formssettings.init();\n        iconsettings.init();\n        // Trigger init so external js can handle customizer init.\n        $(document).trigger('edwiser.customizer.init');\n    }\n\n    /**\n     * Apply settings on iframe load.\n     */\n    function applySettings() {\n        globalSite.apply();\n        globalBody.apply();\n        globalColors.apply();\n        globalHeading.apply();\n        globalButtons.apply();\n        headerSiteIdentity.apply();\n        headerPrimary.apply();\n        headerMenu.apply();\n        leftSidebar.apply();\n        footer.apply();\n        additionalSettings.apply();\n        formssettings.apply();\n        iconsettings.apply();\n        // Trigger apply so external js can handle customizer apply.\n        $(document).trigger('edwiser.customizer.apply');\n    }\n\n    /**\n     * Initialize events\n     */\n    function init() {\n\n        // Initialize customizer only once.\n        if (window['customizer-enabled'] == true) {\n            return;\n        }\n        window['customizer-enabled'] = true;\n\n        $(document).ready(function($) {\n            initHandlers();\n\n            // Iframe on load event.\n            $(SELECTOR.IFRAME).on(\"load\", function() {\n                $(Utils.getDocument()).find('body').addClass('customizer-opened');\n                $(Utils.getDocument()).find('.customizer-editing-icon').closest('a')\n                .addClass('d-none').removeClass('d-flex');\n                $(Utils.getDocument()).find('#sidebar-setting').addClass('d-none');\n                $(document).trigger('remui-adjust-left-side');\n                var contentWindow = this.contentWindow;\n                setTimeout(function() {\n                    // Change browser url on iframe navigation.\n                    window.history.replaceState('pagechange', document.title, M.cfg.wwwroot + '/theme/remui/customizer.php?url=' +\n                    encodeURI(contentWindow.location.href));\n\n                    // Set current iframe url to customizer close button.\n                    $(SELECTOR.CLOSE_CUSTOMIZER).attr('href', contentWindow.location.href);\n\n                    // Apply setting on iframe load.\n                    applySettings();\n\n                    // Hide overlay when iframe loaded.\n                    Utils.hideLoader();\n                    contentWindow.onbeforeunload = function() {\n                        // Show overlay when iframe loaded.\n                        Utils.showLoader();\n                    };\n                }, 10);\n            });\n\n            $(SELECTOR.SETTINGS_RESET).on('click', function() {\n                ModalFactory.create({\n                    title: M.util.get_string('reset', 'moodle'),\n                    body: M.util.get_string('reset-settings-description', 'theme_remui'),\n                    type: ModalFactory.types.SAVE_CANCEL\n                }, $('#create')).done(function(modal) {\n                    modal.show();\n                    modal.setSaveButtonText(M.util.get_string('yes', 'moodle'));\n                    var root = modal.getRoot();\n                    root.on(ModalEvents.save, function() {\n                        $(SELECTOR.MAIN_OVERLAY).removeClass('d-none');\n                        PROMISES.SAVE_SETTINGS(JSON.stringify([])).done(function(response) {\n                            location.reload();\n                        }).fail(function(ex) {\n                            Notification.exception(ex);\n                            $(SELECTOR.MAIN_OVERLAY).addClass('d-none');\n                        });\n                    });\n                });\n            });\n\n            // Open next panel.\n            $(SELECTOR.PANEL_LINK).on('click', function() {\n                $(SELECTOR.PANEL + '#' + $(this).data(SELECTOR.PANEL_ID)).addClass(SELECTOR.CURRENT);\n                $(this).closest(SELECTOR.PANEL).removeClass(SELECTOR.CURRENT);\n            });\n\n            // Go back to previous panel.\n            $(SELECTOR.PANEL_BACK).on('click', function() {\n                $(SELECTOR.PANEL + ':not(' + SELECTOR.PANEL + '#' + $(this).data(SELECTOR.PANEL_ID) + ')')\n                .removeClass(SELECTOR.CURRENT);\n                $(SELECTOR.PANEL + '#' + $(this).data(SELECTOR.PANEL_ID)).addClass(SELECTOR.CURRENT);\n            });\n\n            // Toggle screen mode.\n            $(SELECTOR.MODE_TOGGLE).on('click', function() {\n                $(SELECTOR.CUSTOMIZER).removeClass('mode-desktop mode-tablet mode-mobile')\n                .addClass(`mode-${$(this).data('mode')}`);\n            });\n\n            // Prevent submission.\n            $(SELECTOR.CONTROLS).on('submit', function(event) {\n                event.preventDefault();\n                return false;\n            });\n\n            // Form change handler.\n            $(`\n                ${SELECTOR.CONTROLS} input[type=\"text\"],\n                ${SELECTOR.CONTROLS} input[type=\"number\"],\n                ${SELECTOR.CONTROLS} input[type=\"checkbox\"]\n                ${SELECTOR.CONTROLS} textarea,\n                ${SELECTOR.CONTROLS} select\n            `).on('change', function() {\n                $(SELECTOR.CONTROLS).data('unsaved', true);\n            });\n            $(`${SELECTOR.CONTROLS} input[type=\"color\"]`).on('color.changed', function() {\n                $(SELECTOR.CONTROLS).data('unsaved', true);\n            });\n\n            // Submit settings to database.\n            $(SELECTOR.PUBLISH).on('click', function() {\n                $(SELECTOR.MAIN_OVERLAY).removeClass('d-none');\n                let settings = $(SELECTOR.CONTROLS).serializeArray();\n                settings.forEach(function(element, index) {\n                    if ($(`[name=\"${element.name}\"]`).is('.site-colorpicker')) {\n                        element.value = $(`[name=\"${element.name}\"]`).spectrum('get').toString();\n                        settings[index] = element;\n                    }\n                });\n                PROMISES.SAVE_SETTINGS(JSON.stringify(settings))\n                .done(function(response) {\n                    let obj = {\n                        type: ModalFactory.types.ALERT\n                    };\n                    if (response.status == false) {\n                        obj.title = M.util.get_string('error', 'theme_remui');\n                        obj.body = response.errors;\n                    } else {\n                        obj.title = M.util.get_string('success', 'moodle');\n                        obj.body = response.message;\n                        $(SELECTOR.CONTROLS).data('unsaved', false);\n                    }\n                    ModalFactory.create(obj, $('#create'))\n                    .done(function(modal) {\n                        modal.show();\n                        $(SELECTOR.MAIN_OVERLAY).addClass('d-none');\n                    });\n                })\n                .fail(Notification.exception);\n            });\n\n            // Handle customizer close event.\n            $(SELECTOR.CLOSE_CUSTOMIZER).on('click', function(event) {\n                if ($(SELECTOR.CONTROLS).data('unsaved') == false) {\n                    return true;\n                }\n                event.preventDefault();\n                ModalFactory.create({\n                    title: M.util.get_string('customizer-close-heading', 'theme_remui'),\n                    body: M.util.get_string('customizer-close-description', 'theme_remui'),\n                    type: ModalFactory.types.SAVE_CANCEL\n                }, $('#create'))\n                .done(function(modal) {\n                    modal.show();\n                    modal.setSaveButtonText(M.util.get_string('yes', 'moodle'));\n                    var root = modal.getRoot();\n                    root.on(ModalEvents.save, function() {\n                        window.location = $(SELECTOR.CLOSE_CUSTOMIZER).attr('href');\n                    });\n                });\n                return true;\n            });\n\n            // Toggle customizer.\n            $(SELECTOR.CUSTMIZER_TOGGLE).on('click', function() {\n                $('body').toggleClass('full-customizer');\n            });\n\n            // Color reset.\n            $(SELECTOR.COLOR_RESET)\n            .on('click', function() {\n                let color = $(this).data('default');\n                $(this).next().find('input').spectrum('set', color);\n                $(this).next().find('input').trigger('color.changed', color);\n            });\n\n            // Checkbox reset.\n            $(SELECTOR.CHECKBOX_RESET)\n            .on('click', function() {\n                let value = $(this).data('default');\n                $(this).next().find('input').prop('checked', $(this).next().find('input').val() == value);\n                $(this).next().find('input').trigger('change').trigger('input');\n            });\n\n            // Reset select.\n            $(SELECTOR.SELECT_RESET)\n            .on('click', function() {\n                let value = $(this).data('default');\n                $(this).next().find('select').val(value).trigger('input').trigger('change');\n            });\n\n            // Reset input.\n            $(SELECTOR.INPUT_RESET)\n            .on('click', function() {\n                let value = $(this).data('default');\n                $(this).next().find('input').val(value).trigger('input').trigger('change');\n            });\n\n            // Reset textarea.\n            $(SELECTOR.TEXTAREA_RESET)\n            .on('click', function() {\n                let value = $(this).data('default');\n                $(this).next().find('textarea').val(value).trigger('input').trigger('change');\n            });\n\n            // Reset htmleditor.\n            $(SELECTOR.HTMLEDITOR_RESET)\n            .on('click', function() {\n                let value = $(this).data('default');\n                let textarea = $(this).next().find('textarea');\n                $(this).next().find(`#${textarea.attr('id')}editable`).html(value);\n                textarea.val(value).trigger('input').trigger('change');\n            });\n\n            // Toggle headings.\n            $(SELECTOR.HEADING_TOGGLE).on('click', function() {\n                $(this).next().slideToggle('fast');\n            });\n\n            // Range slider observer.\n            $('body').on('input', SELECTOR.RANGEINPUT, function() {\n                let id = $(this).attr('id');\n                let value = $(this).val();\n                $(`#${id}-range-value`).text(value);\n            });\n        });\n    }\n    return {\n        init: init\n    };\n});\n"],"file":"customizer.min.js"}