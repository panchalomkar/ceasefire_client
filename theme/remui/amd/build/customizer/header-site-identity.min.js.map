{"version":3,"sources":["customizer/header-site-identity.js"],"names":["define","$","Utils","SELECTOR","BASE","IDENTITYPREFIX","LOGOORSITENAME","ICON","FONTSIZE","LOGO","LOGOMINI","BACKGROUNDCOLOR","logoSelectorHandler","concat","closest","addClass","val","removeClass","getDocument","find","logoHandler","body","itemid","getFileURL","done","response","M","cfg","wwwroot","attr","logoSizeHandler","fontSize","css","content","deviceWidth","mobile","tablet","putStyle","apply","icon","init","fileObserver","siblings","on"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer header-site-identity js\n *\n * @package   theme_remui/customizer\n * @copyright (c) 2021 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\ndefine('theme_remui/customizer/header-site-identity', ['jquery', './utils'], function($, Utils) {\n\n    /**\n     * Selectors\n     */\n    var SELECTOR = {\n        BASE: 'header-site-identy',\n        IDENTITYPREFIX: 'header-site-identity',\n        LOGOORSITENAME: 'logoorsitename',\n        ICON: 'siteicon',\n        FONTSIZE: 'header-site-identity-fontsize',\n        LOGO: 'logo',\n        LOGOMINI: 'logomini',\n        BACKGROUNDCOLOR: 'header-background-color'\n    };\n\n    /**\n     * Handle site logo selector.\n     */\n    function logoSelectorHandler() {\n        $(`\n            [name='${SELECTOR.ICON}'],\n            [name='${SELECTOR.FONTSIZE}'],\n            [name='${SELECTOR.LOGO}'],\n            [name='${SELECTOR.LOGOMINI}'],\n            [name='${SELECTOR.BACKGROUNDCOLOR}']\n        `).closest('.setting-item').addClass('d-none');\n        switch ($(`[name='${SELECTOR.LOGOORSITENAME}']`).val()) {\n            case 'iconsitename':\n                $(`\n                    [name='${SELECTOR.ICON}'],\n                    [name='${SELECTOR.FONTSIZE}']\n                `).closest('.setting-item').removeClass('d-none');\n                break;\n            case 'logo':\n                $(`\n                    [name='${SELECTOR.LOGO}'],\n                    [name='${SELECTOR.LOGOMINI}'],\n                    [name='${SELECTOR.BACKGROUNDCOLOR}']\n                `).closest('.setting-item').removeClass('d-none');\n                break;\n            case 'sitenamewithlogo':\n                $(`\n                    [name='${SELECTOR.FONTSIZE}'],\n                    [name='${SELECTOR.LOGO}'],\n                    [name='${SELECTOR.LOGOMINI}'],\n                    [name='${SELECTOR.BACKGROUNDCOLOR}']\n                `).closest('.setting-item').removeClass('d-none');\n                break;\n        }\n        let body = $(Utils.getDocument()).find('body');\n        body.removeClass(`\n            ${SELECTOR.IDENTITYPREFIX}-iconsitename\n            ${SELECTOR.IDENTITYPREFIX}-logo\n            ${SELECTOR.IDENTITYPREFIX}-sitenamewithlogo\n        `)\n        .addClass(SELECTOR.IDENTITYPREFIX + '-' + $(`[name='${SELECTOR.LOGOORSITENAME}']`).val());\n    }\n\n    /**\n     * Site logo handler.\n     */\n    function logoHandler() {\n        let body = $(Utils.getDocument()).find('body');\n\n        // Logo.\n        let itemid = $(`[name='${SELECTOR.LOGO}']`).val();\n        Utils.getFileURL(itemid).done(function(response) {\n            if (response == '') {\n                response = M.cfg.wwwroot + '/theme/remui/pix/logo.png';\n            }\n            $(body).find('.navbar .header-logo .navbar-brand-logo:not(.mini)').attr('src', response);\n            $(body).find('#page-footer .secondary-footer-logo').attr('src', response);\n        });\n\n        // Logo mini.\n        itemid = $(`[name='${SELECTOR.LOGOMINI}']`).val();\n        Utils.getFileURL(itemid).done(function(response) {\n            if (response == '') {\n                response = M.cfg.wwwroot + '/theme/remui/pix/logomini.png';\n            }\n            $(body).find('.navbar .header-logo .navbar-brand-logo.mini').attr('src', response);\n        });\n    }\n\n    /**\n     * Site logo size handler.\n     */\n    function logoSizeHandler() {\n        let body = $(Utils.getDocument()).find('body');\n        let fontSize = $(`[name=\"${SELECTOR.FONTSIZE}\"]`).val();\n        $(body).find('.navbar .navbar-brand-logo').css('font-size', fontSize + 'rem');\n        let content = '';\n        // Tablet.\n        fontSize = $(`[name='${SELECTOR.FONTSIZE}-tablet']`).val();\n        if (fontSize != '') {\n            content += `\\n\n                @media screen and (min-width: ${Utils.deviceWidth.mobile + 1}px) and (max-width: ${Utils.deviceWidth.tablet}px) {\n                    .navbar .header-sitename .navbar-brand-logo {\n                        font-size: ${fontSize}rem !important;\n                    }\n                }\n            `;\n        }\n\n        // Mobile.\n        fontSize = $(`[name='${SELECTOR.FONTSIZE}-mobile']`).val();\n        if (fontSize != '') {\n            content += `\\n\n                @media screen and (max-width: ${Utils.deviceWidth.mobile}px) {\n                    .navbar .header-sitename .navbar-brand-logo {\n                        font-size: ${fontSize}rem !important;\n                    }\n                }\n            `;\n        }\n        Utils.putStyle(SELECTOR.BASE, content);\n    }\n\n    /**\n     * Apply settings.\n     */\n    function apply() {\n        logoSelectorHandler();\n        let icon = $(`[name=\"${SELECTOR.ICON}\"]`).val();\n        if (icon == '') {\n            icon = 'graduation-cap';\n        }\n        let body = $(Utils.getDocument()).find('body');\n        $(body).find('.navbar .header-sitename .navbar-brand-logo i').attr('class', 'fa fa-' + icon);\n        logoSizeHandler();\n        logoHandler();\n    }\n\n    /**\n     * Initialize evetns.\n     */\n    function init() {\n        // Logo mini listener.\n        Utils.fileObserver($(`[name='${SELECTOR.LOGO}']`).siblings('.filemanager')[0], logoHandler);\n\n        // Logo listener.\n        Utils.fileObserver($(`[name='${SELECTOR.LOGOMINI}']`).siblings('.filemanager')[0], logoHandler);\n\n        // Logo or sitename chooser listener.\n        $(`[name='${SELECTOR.LOGOORSITENAME}']`).on('change', function() {\n            logoSelectorHandler();\n        });\n\n        // Site icon listener.\n        $(`[name=\"${SELECTOR.ICON}\"]`).on('input', function() {\n            apply();\n        });\n\n        // Font size listener.\n        $(`\n            [name=\"${SELECTOR.FONTSIZE}\"],\n            [name=\"${SELECTOR.FONTSIZE}-tablet\"],\n            [name=\"${SELECTOR.FONTSIZE}-mobile\"]\n        `).on('input', logoSizeHandler);\n    }\n\n    return {\n        init: init,\n        apply: apply\n    };\n});\n"],"file":"header-site-identity.min.js"}