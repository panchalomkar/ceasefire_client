"use strict";define("theme_remui/customizer/elements/menu",["jquery","core/notification","core/templates","core/modal_factory","core/modal_events","core/modal_save_cancel"],function(e,t,n,i,o){var r={ADDMENUITEM:".add-menu-item",EDITMENUITEM:".action-edit",MOVEUPMENUITEM:".action-move-up",MOVEDOWNMENUITEM:".action-move-down",DELETEMENUITEM:".action-delete",FORM:".customizer-menu-item-form",TEXT:".menu-text",ADDRESS:".menu-address",MENULIST:".customizer-menu-item-list",MENUITEM:".menu-item",MENURESET:".menu-reset"},c={UP:-1,DOWN:1};function d(t){var n=e(t).find(r.MENULIST).find(r.MENUITEM),i=[];e.each(n,function(t,n){i.push({text:e(n).data("text"),address:e(n).data("address")})}),e(t).find("textarea").val(JSON.stringify(i)).trigger("change")}function a(t,c){var a={};null!=c&&(a={text:e(c).data("text"),address:e(c).data("address")}),i.create({title:M.util.get_string("customizermenuadd","theme_remui"),body:n.render("theme_remui/customizer/elements/menu/menu-add-edit",a),type:i.types.SAVE_CANCEL},e("#create")).done(function(i){i.show(),i.getRoot().on(o.save,function(o){o.preventDefault();var s=e(r.FORM).find(r.TEXT).val(),E=e(r.FORM).find(r.ADDRESS).val();a={text:s,address:E},n.render("theme_remui/customizer/elements/menu/menu-item",a).done(function(i,o){null==c?n.appendNodeContents(e(t).find(r.MENULIST),i,o):n.replaceNode(e(c),i,o),d(t)}),i.hide()}),i.getRoot().on(o.hidden,function(){i.destroy()})})}function s(t,n,i){switch(i){case c.UP:if(0==e(n).prev().length)return;e(n).prev().insertAfter(n);break;case c.DOWN:if(0==e(n).next().length)return;e(n).next().insertBefore(n)}d(t)}return{init:function(t){e("body").on("click",t+" "+r.ADDMENUITEM,function(){a(t)}),e("body").on("click",t+" "+r.EDITMENUITEM,function(){a(t,e(this).closest(r.MENUITEM))}),e("body").on("click",t+" "+r.MOVEUPMENUITEM,function(){s(t,e(this).closest(r.MENUITEM),c.UP)}),e("body").on("click",t+" "+r.MOVEDOWNMENUITEM,function(){s(t,e(this).closest(r.MENUITEM),c.DOWN)}),e("body").on("click",t+" "+r.DELETEMENUITEM,function(){e(this).closest(r.MENUITEM).remove(),d(t)}),e("body").on("click",t+" "+r.MENURESET,function(){var i=e(this).data("default");e(this).next().find("textarea").val(JSON.stringify(i)).trigger("input").trigger("change"),function t(i,o){if(null==o){e(i).find(r.MENULIST).html("").hide(),o=e(i).find("textarea").val();try{o=JSON.parse(o)}catch(e){o=[]}}0!=o.length?n.render("theme_remui/customizer/elements/menu/menu-item",o.shift()).done(function(c,d){n.appendNodeContents(e(i).find(r.MENULIST),c,d),t(i,o)}):e(i).find(r.MENULIST).show()}(t)})}}});
//# sourceMappingURL=menu.min.js.map
