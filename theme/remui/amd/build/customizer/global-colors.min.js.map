{"version":3,"sources":["customizer/global-colors.js"],"names":["define","$","Utils","SELECTOR","SITECOLOR","BACKGROUNDCHOOSE","BACKGROUNDCOLOR","BACKGROUNDGRAD1","BACKGROUNDGRAD2","BACKGROUNDIMAGE","BACKGROUNDIMAGEATTACHMENT","handleBackground","color","color1","color2","itemid","attachment","concat","closest","addClass","val","removeClass","spectrum","toString","putStyle","getFileURL","done","response","M","cfg","wwwroot","apply","init","bind","on","fileObserver","siblings"],"mappings":"AAAA,aAyBAA,OAAO,uCAAwC,CAAC,SAAU,WAAY,SAAUC,EAAGC,GACjF,IAAIC,EAAW,CACbC,UAAW,eACXC,iBAAkB,+BAClBC,gBAAiB,oCACjBC,gBAAiB,wCACjBC,gBAAiB,wCACjBC,gBAAiB,oCACjBC,0BAA2B,+CAgB7B,SAASC,IACP,IAAIC,EAAOC,EAAQC,EAAQC,EAAQC,EAGnC,OAFAf,EAAE,wBAAwBgB,OAAOd,EAASG,gBAAiB,4BAA4BW,OAAOd,EAASI,gBAAiB,4BAA4BU,OAAOd,EAASK,gBAAiB,4BAA4BS,OAAOd,EAASM,gBAAiB,4BAA4BQ,OAAOd,EAASO,0BAA2B,iBAAiBQ,QAAQ,iBAAiBC,SAAS,UAEpWlB,EAAE,UAAUgB,OAAOd,EAASE,iBAAkB,OAAOe,OAC3D,IAAK,QACHnB,EAAE,UAAUgB,OAAOd,EAASG,gBAAiB,OAAOY,QAAQ,iBAAiBG,YAAY,UACzFT,EAAQX,EAAE,UAAUgB,OAAOd,EAASG,gBAAiB,OAAOgB,SAAS,OAAOC,WAC5ErB,EAAMsB,SAASrB,EAASE,iBAAkB,4EAA4EY,OAAOL,EAAO,+CACpI,MAEF,IAAK,WACHX,EAAE,gCAAgCgB,OAAOd,EAASI,gBAAiB,oCAAoCU,OAAOd,EAASK,gBAAiB,yBAAyBU,QAAQ,iBAAiBG,YAAY,UACtMR,EAASZ,EAAE,UAAUgB,OAAOd,EAASI,gBAAiB,OAAOe,SAAS,OAAOC,WAC7ET,EAASb,EAAE,UAAUgB,OAAOd,EAASK,gBAAiB,OAAOc,SAAS,OAAOC,WAC7ErB,EAAMsB,SAASrB,EAASE,iBAAkB,8FAA8FY,OAAOJ,EAAQ,MAAMI,OAAOH,EAAQ,gDAC5K,MAEF,IAAK,QACHb,EAAE,gCAAgCgB,OAAOd,EAASM,gBAAiB,oCAAoCQ,OAAOd,EAASO,0BAA2B,yBAAyBQ,QAAQ,iBAAiBG,YAAY,UAChNN,EAASd,EAAE,UAAUgB,OAAOd,EAASM,gBAAiB,OAAOW,MAC7DJ,EAAaf,EAAE,UAAUgB,OAAOd,EAASO,0BAA2B,OAAOU,MAC3ElB,EAAMuB,WAAWV,GAAQW,KAAK,SAAUC,GACtB,IAAZA,IACFA,EAAWC,EAAEC,IAAIC,QAAU,oCAG7B5B,EAAMsB,SAASrB,EAASE,iBAAkB,mFAAmFY,OAAOU,EAAU,4DAA4DV,OAAOD,EAAY,2GAA2GC,OAAqB,SAAdD,EAAwB,QAAU,OAAQ,0DAUjY,SAASe,IA9CT,IACMnB,EA8CJV,EAAMsB,SAASrB,EAASC,WA9CpBQ,EAAQX,EAAE,UAAUgB,OAAOd,EAASC,UAAW,OAAOkB,SAAS,OAAOC,WACnE,wSAAwSN,OAAOL,EAAO,sQAAsQK,OAAOL,EAAO,8QAAiRK,OAAOL,EAAO,6BA8Ch3BD,IAuBF,MAAO,CACLqB,KAjBF,WAEE/B,EAAE,wBAAwBgB,OAAOd,EAASC,UAAW,iBAAiB6B,KAAK,gBAAiB,WAC1FF,MAEF9B,EAAE,wBAAwBgB,OAAOd,EAASG,gBAAiB,4BAA4BW,OAAOd,EAASI,gBAAiB,4BAA4BU,OAAOd,EAASK,gBAAiB,iBAAiB0B,GAAG,gBAAiB,WACxNvB,MAGFV,EAAE,wBAAwBgB,OAAOd,EAASE,iBAAkB,4BAA4BY,OAAOd,EAASO,0BAA2B,iBAAiBwB,GAAG,QAAS,WAC9JvB,MAGFT,EAAMiC,aAAalC,EAAE,UAAUgB,OAAOd,EAASM,gBAAiB,OAAO2B,SAAS,gBAAgB,GAAIzB,IAKpGoB,MAAOA","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Theme customizer global-colors js\n *\n * @package   theme_remui/customizer\n * @copyright (c) 2021 WisdmLabs (https://wisdmlabs.com/) <support@wisdmlabs.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @author    Yogesh Shirsath\n */\n\ndefine('theme_remui/customizer/global-colors', ['jquery', './utils'], function($, Utils) {\n\n    var SELECTOR = {\n        SITECOLOR: 'sitecolorhex',\n        BACKGROUNDCHOOSE: 'global-colors-pagebackground',\n        BACKGROUNDCOLOR: 'global-colors-pagebackgroundcolor',\n        BACKGROUNDGRAD1: 'global-colors-pagebackgroundgradient1',\n        BACKGROUNDGRAD2: 'global-colors-pagebackgroundgradient2',\n        BACKGROUNDIMAGE: 'global-colors-pagebackgroundimage',\n        BACKGROUNDIMAGEATTACHMENT: 'global-colors-pagebackgroundimageattachment'\n    };\n\n    /**\n     * Get site color content.\n     * @returns {String}\n     */\n    function getSiteColorContent() {\n        let color = $(`[name='${SELECTOR.SITECOLOR}']`).spectrum('get').toString();\n        return `.collection thead th, .generaltable thead th, .navbar-brand, .nav-inverse, #page-footer,\n        .bg-primary, .btn-primary, .td.today, .form-submit, .page-aside-switch, table.dataTable thead th,\n        table.dataTable tfoot th, .page-item.active .page-link {\n            background-color: ${color} !important;\n        }\n        .nav-tabs .nav-link.active, .btn-primary, .checkbox-custom input[type=checkbox]:checked+label::before,\n        .radio-custom input[type=radio]:checked+label::before, .page-item.active .page-link {\n            border-color: ${color} !important;\n        }' +\n        .text-primary, .nav-tabs .nav-link.active, .nav-tabs .nav-link.active .fa, [data-region=\"drawer\"]:not(.dark)\n        .list-group-item.active, [data-region=\"drawer\"]:not(.dark) .list-group-item.active .icon {\n            color: ${color} !important;\n        }`;\n    }\n\n    /**\n     * Handle background color.\n     */\n    function handleBackground() {\n        let color, color1, color2, itemid, attachment;\n        $(`\n            [name='${SELECTOR.BACKGROUNDCOLOR}'],\n            [name='${SELECTOR.BACKGROUNDGRAD1}'],\n            [name='${SELECTOR.BACKGROUNDGRAD2}'],\n            [name='${SELECTOR.BACKGROUNDIMAGE}'],\n            [name='${SELECTOR.BACKGROUNDIMAGEATTACHMENT}']\n        `).closest('.setting-item').addClass('d-none');\n        switch ($(`[name='${SELECTOR.BACKGROUNDCHOOSE}']`).val()) {\n            case 'color':\n                $(`[name='${SELECTOR.BACKGROUNDCOLOR}']`).closest('.setting-item').removeClass('d-none');\n                color = $(`[name='${SELECTOR.BACKGROUNDCOLOR}']`).spectrum('get').toString();\n                Utils.putStyle(SELECTOR.BACKGROUNDCHOOSE, `\n                    #page {\n                        background-color: ${color};\n                    }\n                `);\n                break;\n            case 'gradient':\n                $(`\n                    [name='${SELECTOR.BACKGROUNDGRAD1}'],\n                    [name='${SELECTOR.BACKGROUNDGRAD2}']\n                `).closest('.setting-item').removeClass('d-none');\n                color1 = $(`[name='${SELECTOR.BACKGROUNDGRAD1}']`).spectrum('get').toString();\n                color2 = $(`[name='${SELECTOR.BACKGROUNDGRAD2}']`).spectrum('get').toString();\n                Utils.putStyle(SELECTOR.BACKGROUNDCHOOSE, `\n                    #page {\n                        background: linear-gradient(100deg, ${color1}, ${color2});\n                    }\n                `);\n                break;\n            case 'image':\n                $(`\n                    [name='${SELECTOR.BACKGROUNDIMAGE}'],\n                    [name='${SELECTOR.BACKGROUNDIMAGEATTACHMENT}']\n                `).closest('.setting-item').removeClass('d-none');\n                itemid = $(`[name='${SELECTOR.BACKGROUNDIMAGE}']`).val();\n                attachment = $(`[name='${SELECTOR.BACKGROUNDIMAGEATTACHMENT}']`).val();\n                Utils.getFileURL(itemid).done(function(response) {\n                    if (response == '') {\n                        response = M.cfg.wwwroot + '/theme/remui/pix/placeholder.png';\n                    }\n\n                    Utils.putStyle(SELECTOR.BACKGROUNDCHOOSE, `\n                        #page {\n                            background: url('${response}');\n                            background-attachment: ${attachment};\n                            background-position: top;\n                            background-size: ${attachment == 'fixed' ? 'cover' : 'auto'};\n                        }\n                    `);\n                });\n                break;\n        }\n    }\n\n    /**\n     * Apply settings.\n     */\n    function apply() {\n        Utils.putStyle(SELECTOR.SITECOLOR, getSiteColorContent());\n        handleBackground();\n    }\n\n    /**\n     * Initialize events.\n     */\n    function init() {\n        // Site color.\n        $(`\n            [name='${SELECTOR.SITECOLOR}']\n        `).bind('color.changed', function() {\n            apply();\n        });\n\n        $(`\n            [name='${SELECTOR.BACKGROUNDCOLOR}'],\n            [name='${SELECTOR.BACKGROUNDGRAD1}'],\n            [name='${SELECTOR.BACKGROUNDGRAD2}']\n        `).on('color.changed', function() {\n            handleBackground();\n        });\n\n        // Navbar inverse.\n        $(`\n            [name='${SELECTOR.BACKGROUNDCHOOSE}'],\n            [name='${SELECTOR.BACKGROUNDIMAGEATTACHMENT}']\n        `).on('input', function() {\n            handleBackground();\n        });\n\n        // Background image observer.\n        Utils.fileObserver($(`[name='${SELECTOR.BACKGROUNDIMAGE}']`).siblings('.filemanager')[0], handleBackground);\n    }\n\n    return {\n        init: init,\n        apply: apply\n    };\n});\n"],"file":"global-colors.min.js"}