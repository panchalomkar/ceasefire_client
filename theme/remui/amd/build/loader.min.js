"use strict";define(["jquery","core/ajax","theme_remui/tether","core/event","theme_remui/aria","theme_remui/breakpoints","theme_remui/drawer","theme_remui/notice","core/str","core/pubsub","core/modal_factory","theme_remui/feedback","theme_remui/pending","theme_remui/util","theme_remui/alert","theme_remui/button","theme_remui/carousel","theme_remui/collapse","theme_remui/dropdown","theme_remui/modal","theme_remui/scrollspy","theme_remui/tab","theme_remui/tooltip","theme_remui/popover","theme_remui/skintool"],function(e,t,a,n,r,i,o,s,d,l,c,u){function g(){var t=e("#region-main").offset().left-e("#user-grades").offset().left+parseInt(e("#region-main").css("padding-left"));e("#grade-scrolling-fix").html("\n            .sideonly.floating {\n                left: ".concat(t,"px !important;\n            }\n        "))}function h(t){var a=e(t).find(".toggle-menu"),n=e(a).attr("data-key");e(a).toggleClass("rotate90"),e('#nav-drawer a.list-group-item[data-parent-key="'+n+'"]').toggleClass("show")}function m(){e(window).width()<992&&(e("body").hasClass("drawer-open-left")&&e('button[data-action="toggle-drawer"]').trigger("click"),e("body").hasClass("sidebar-open")&&e(".page-aside-switch .fa-angle-left").trigger("click"),e("body").removeClass("sidebar-pinned")),e(document).trigger("remui-adjust-left-side")}window.jQuery=e,window.Tether=a,o.init(),e("body").popover({trigger:"focus",selector:"[data-toggle=popover][data-trigger!=hover]"}),e("html").popover({container:"body",selector:"[data-toggle=popover][data-trigger=hover]",trigger:"hover",delay:{hide:500}}),n.getLegacyEvents().done(function(t){e(document).on(t.FILTER_CONTENT_UPDATED,function(){e("body").popover({selector:'[data-toggle="popover"]',trigger:"focus"})})}),e("#id_s_theme_remui_frontpagechooser").change(function(){window.onbeforeunload=null,this.form.submit()}),r.init(),e(".page-aside-switch .fa-angle-left").on("click",function(){e("body").toggleClass("sidebar-open"),e("body").hasClass("hasblocks")||(e(".page-aside-switch").removeClass("d-flex"),e(".page-aside-switch").hide())}),e(document).on("remui-adjust-left-side",function(){if(0!=e(".site-menubar-footer").length){var t=e(".site-menubar-footer").height();0!=e("#nav-drawer").length&&e("#nav-drawer").css("bottom",t+"px")}}),e(document).ready(function(){e("body").is("#page-grade-report-grader-index")&&(e("body").append('<style id="grade-scrolling-fix"></style>'),e("#region-main > .card").on("scroll",g),e(window).on("scroll",g)),e('[data-toggle="tooltip"]').tooltip(),e("body").hasClass("editing")&&e("body").hasClass("hasblocks")&&e(".page-aside-switch .fa-angle-left").trigger("click"),e(document).trigger("remui-adjust-left-side"),e('[data-region="drawer-toggle"]').on("click",function(){e(document).trigger("remui-adjust-left-side")}),m();var t,a,n=e("nav.greedy .menu-toggle"),r=e("nav.greedy .links"),i=e("nav.greedy .hidden-links"),o=0,s=0,d=[];function c(){t=r.width()-10,a=r.children().length,d[a-1]>t?(r.children().last().prependTo(i),a-=1,c()):t>d[a]&&(i.children().first().appendTo(r),a+=1),n.attr("count",o-a),a===o?n.addClass("hidden"):n.removeClass("hidden")}r.children().outerWidth(function(e,t){s+=t,o+=1,d.push(s)}),c(),n.on("click",function(){var t=e(this).offset().left-25;i.css({left:t+"px"}),i.toggleClass("hidden")}),e(document.body).on("click",function(t){if(0===t.button&&!e("ul.hidden-links").hasClass("hidden")){var a=t.target;a!==t.currentTarget&&e(a).closest("ul.hidden-links, button.menu-toggle, .modal, .alertify, .-handled-lick").length||e("ul.hidden-links").addClass("hidden")}}),l.subscribe("nav-drawer-toggle-end",function(){c()}),e(window).resize(function(){c()}),0==e('[data-region="right-hand-drawer"]').parents("#sidebar-message").length?e(document.body).on("click",function(t){if(0===t.button&&!e('[data-region="right-hand-drawer"]').hasClass("hidden")){var a='[data-region="right-hand-drawer"], [href="#sidebar-message"]',n=t.target;n!==t.currentTarget&&e(n).closest(a).length||(e('[data-region="right-hand-drawer"]').addClass("hidden"),e(a).removeClass("active"))}}):e('.page-aside .nav-item .nav-link[href="#sidebar-message"]').click(function(){e('[data-region="right-hand-drawer"]').removeClass("hidden")})}),e(".page-aside-switch .fa-thumb-tack").on("click",function(){e("body").removeClass("sidebar-open"),e("body").toggleClass("sidebar-pinned"),e("body").hasClass("sidebar-pinned")?(M.util.set_user_preference("pin_aside","true"),s.info(M.util.get_string("sidebarpinned","theme_remui")),e(this).prop("title",M.util.get_string("unpinsidebar","theme_remui"))):(M.util.set_user_preference("pin_aside",""),s.info(M.util.get_string("sidebarunpinned","theme_remui")),e(this).prop("title",M.util.get_string("pinsidebar","theme_remui")))}),e(".page-aside .site-sidebar-nav .nav-link").on("click",function(){e(".page-aside .site-sidebar-nav .nav-link").attr("aria-selected",!1),e(this).attr("aria-selected",!0)}),e(document.body).on("click",function(t){if(0===t.button&&e("body").hasClass("sidebar-open")){var a=t.target;a!==t.currentTarget&&e(a).closest(".page-aside, .modal, .alertify, .-handled-lick").length||(e("body").removeClass("sidebar-open"),e(".page-aside-switch").addClass("d-flex"),e(".page-aside-switch").show())}}),e("#gotop").click(function(){return e("html, body").animate({scrollTop:0},e(window).scrollTop()/6),!1}),e(window).scroll(function(){e(this).scrollTop()>300?e("#gotop").removeClass("d-none").addClass("d-flex"):e("#gotop").removeClass("d-flex").addClass("d-none")}),e('#nav-drawer .list-group-item:not(.activity):not([data-indent="1"])').hover(function(){if(e("#nav-drawer").hasClass("closed")){var t,a=e(this).position().top+e("nav.fixed-top:not(.fm-navbar)").height(),n=e(window).height();e(this).addClass("hovered"),e(".media-body").css("top",a+"px");var r=e(this).attr("data-target");if(null!=r&&""!=r){var i=e("".concat(r));i.length>0&&(t=a<n/2?a+52:a-e(i).height(),e(i).css("top",t+"px"),e(i).addClass("pop-over"))}var o=e(this).attr("data-key");if(null!=o){var s=e("#nav-drawer .mycoursesubmenu."+o);a<n/2?(t=a+52,e(s).css("top",t+"px"),e(s).addClass("pop-over")):(e(s).addClass("pop-over"),t=a-e(s).height(),e(s).css("top",t+"px"))}}},function(){e(this).removeClass("hovered"),e(".sub-menu").removeClass("pop-over"),e("#nav-drawer .mycoursesubmenu").removeClass("pop-over")}),e(".sub-menu").hover(function(){var t=e(this).attr("id"),a=e('#nav-drawer .list-group-item[data-target="#'+t+'"]');e(a).trigger("mouseenter"),e(a).trigger("hover"),e(a).trigger("mouseover")},function(){var t=e(this).attr("id"),a=e('#nav-drawer .list-group-item[data-target="#'+t+'"]');e(a).trigger("mouseout")}),e("#nav-drawer .mycoursesubmenu").hover(function(){var t=e(this).attr("data-parent-key"),a=e('#nav-drawer .list-group-item[data-key="'+t+'"]');e(a).trigger("mouseenter"),e(a).trigger("hover"),e(a).trigger("mouseover")},function(){var t=e(this).attr("data-parent-key"),a=e('#nav-drawer .list-group-item[data-key="'+t+'"]');e(a).trigger("mouseout")}),e("#nav-drawer .toggle-submenu").on("click",function(t){t.preventDefault();var a="#nav-drawer .toggle-submenu.active, #nav-drawer .mycoursesubmenu.active";e(this).is(e(a))||e(a).each(function(t){e(this).toggleClass("active"),h(this)}),h(this),e(this).toggleClass("active");var n=e(this).next("."+e(this).attr("data-key"));e(n).toggleClass("active")}),e("#nav-drawer .toggle-menu").keypress(function(t){if(32==t.keyCode||13==t.keyCode)try{t.preventDefault();var a=0,n=e(this).attr("data-key");e("#nav-drawer .fa-angle-right").toggleClass("rotate90"),e('#nav-drawer a.list-group-item[data-parent-key="'+n+'"]').toggleClass("show"),e('#nav-drawer a.list-group-item[data-parent-key="'+n+'"]').each(function(t){-1==e('#nav-drawer a.list-group-item[data-parent-key="'+n+'"]')[t].tabIndex?(a=1,e('#nav-drawer a.list-group-item[data-parent-key="'+n+'"]')[t].tabIndex=0):e('#nav-drawer a.list-group-item[data-parent-key="'+n+'"]')[t].tabIndex=-1}),a&&e('#nav-drawer a.list-group-item[data-parent-key="'+n+'"]')[0].focus()}catch(t){console.log(t)}}),e(".sectionname .toggle-section").click(function(){var t=e(this).parent().parent().parent().find("ul.section");t.length&&(e(this).toggleClass("down"),e(t).toggleClass("hidden")),"false"==e(this).attr("aria-expanded")?e(this).attr("aria-expanded","true"):e(this).attr("aria-expanded","false")}),e(".sectionname .toggle-section").keypress(function(t){if(32==t.keyCode||13==t.keyCode)try{var a=e(this).parent().parent().parent().find("ul.section");a.length&&(e(this).toggleClass("down"),e(a).toggleClass("hidden")),"false"==e(this).attr("aria-expanded")?(e(this).attr("aria-expanded","true"),e(a).focus()):e(this).attr("aria-expanded","false")}catch(t){console.log(t)}}),e(".signupform .fcontainer .form-group").each(function(){var t=e.trim(e(".col-form-label",this).text());e(".felement input",this).attr("placeholder",t)}),e("#toggleFullscreen").click(function(){e(this).toggleClass("collapse"),function(){if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{var t=e("html")[0];t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.msRequestFullscreen&&t.msRequestFullscreen()}}()}),e(".page-aside .page-aside-switch").click(function(){e(this).next().find(".nav-item .nav-link.active").trigger("click")}),e(window).resize(function(){m()}),e(".navbar-toggler").click(function(){e(".navbar-nav.right-menu").toggleClass("show")}),e("body").on("click",".showchangelog",function(t){t.preventDefault();var a=e("#create-modal");c.create({title:M.util.get_string("changelog","theme_remui"),body:e(this).data("log")},a).done(function(e){e.show()})}),e('.update-nag [data-dismiss="alert"]').click(function(){t.call([{methodname:"theme_remui_hide_update",args:{}}])}),e(".site-announcement #dismiss_announcement").click(function(){M.util.set_user_preference("remui_dismised_announcement",!0)}),e(".customizer-turn-editing-on").on("click",function(){window.location.href=M.cfg.wwwroot+"/theme/remui/customizer.php?url="+encodeURI(window.location.href)}),e(".site-menubar-footer.sidebar-closed").mouseover(function(){e(".site-menubar-footer.sidebar-closed").css("height","".concat(55*e(this).find("a:not(:hidden)").length,"px"))}).mouseout(function(){e(".site-menubar-footer.sidebar-closed").css("height","55px")})});
//# sourceMappingURL=loader.min.js.map
