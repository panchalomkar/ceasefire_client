"use strict";define(["jquery","core/ajax","core/str","core/templates","theme_remui/jquery-toolbar","core/notification"],function(e,t,a,o,r,n){var i,s,c=e("#categoryfilter .categoryselector"),l=e(".course-cards"),p=e(".cards-pagination"),u=".page-header-actionss",g="theme_remui/course_card_grid",d=e("#categoryfilter .simplesearchform .simplesearchform"),h=(e(".custom-switch"),e(".course-counter span.course-number")),f=e(".course-tags .tag-wrapper");function m(){e(l).empty(),i.pagination&&p.empty(),b()}function y(){t.call([{methodname:"theme_remui_get_tags",args:{data:JSON.stringify(i)}}])[0].done(function(e){f.empty().append(e)}).fail(n.exception)}function b(){i.isFilterModified&&function(){e(".courses-tabs .courses-loader-wrap").show();t.call([{methodname:"theme_remui_get_courses",args:{data:JSON.stringify(i)}}])[0].done(function(t){t=JSON.parse(t),e(u).empty(),1==t.hasmanagebutton&&e(u).append(t.managebuttons),null!=t.dropdown?e("#page-header .page-header-actionss").append(t.dropdown):e('#page-header .page-header-actionss [data-enhance="moodle-core-actionmenu"]').remove();var a=g,r=t.courses;if(t.latest_card&&l.addClass("latest-cards"),e(h).text(t.totalcoursescount),r.length>0)for(var c=0;c<r.length;c++)o.render(a,r[c]).then(function(a,r){o.appendNodeContents(l,a,r),t.latest_card||e(".course-cards .showoptions").each(function(){e(this).toolbar({content:e(this).data("toolbar"),style:"primary"})})}).fail(n.exception);else{var d='<div class="alert alert-warning alert-dismissible  w-full mx-10" role="alert">';d+='<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>'+s[0]+"</div>",o.appendNodeContents(l,d,"")}i.pagination&&(p.empty(),o.appendNodeContents(p,t.pagination,""))}).fail(n.exception)}()}e(document).delegate(".tool-item","click",function(){window.location=e(this).attr("href")}),e(c).on("change",function(e){i.category=e.target.value,i.initPagination(),window.history.replaceState("pagechange",document.title,M.cfg.wwwroot+"/course/index.php?category="+encodeURI(e.target.value)),m(),y()}),e(d).on("submit",function(t){t.preventDefault(),i.initPagination(),i.search=e('#categoryfilter .simplesearchform .input-group input[type="text"]').val(),m()}),e("#switch-label1, #switch-label2").on("change.bootstrapSwitch",function(e,t){i.tab=e.target.checked,m(),y()}),e(document).delegate(".cards-pagination .pagination .page-item .page-link","click",function(e){e.preventDefault();var t=e.target.href;void 0===t&&void 0===(t=e.target.parentElement.href)&&(t=e.target.parentElement.parentElement.href);for(var a,o=t.slice(t.indexOf("?")+1).split("&"),r=[],n=0;n<o.length;n++)a=o[n].split("="),r.push(a[0]),r[a[0]]=a[1];i.tab?i.page.mycourses=r.page:i.page.courses=r.page,m()});return{init:function(t){e("[category-filter-link]").on("click",function(t){return t.preventDefault(),e(c).val(e(this).data("id")).trigger("change"),!1});a.get_strings([{key:"nocoursefound",component:"theme_remui"}]).then(function(a){s=a,i=function(e){var t={courses:0,mycourses:0},a={category:e,sort:"ASC",search:"",tab:!1,page:t,pagination:!0,isFilterModified:!0,initAttributes:function(){a.category=e,a.sort="ASC",a.search="",a.tab=!1,a.page=t,a.pagination=!0,a.isFilterModified=!0},initPagination:function(){a.page={courses:0,mycourses:0}}};return a}(t);for(var o,r,n=[],c=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),l=0;l<c.length;l++)o=c[l].split("="),n.push(o[0]),n[o[0]]=o[1];n.categoryid&&0!=n.categoryid&&(i.category=n.categoryid),null!=n.categorysort&&(i.sort=n.categorysort),null!=n.search&&(i.search=n.search),n.mycourses&&0!=n.mycourses&&(i.tab=!0,e("body").hasClass("notloggedin")&&(i.tab=!1)),""!==(r=i).category&&e("#categoryfilter .categoryselector").val(r.category),1==r.tab?e("#switch-label1, #switch-label2").prop("checked",!0):e("#switch-label1, #switch-label2").prop("checked",!1),""!==r.search&&e("#coursesearchbox").val(r.search),b(),y()})}}});
//# sourceMappingURL=coursecategorylayout1.min.js.map
