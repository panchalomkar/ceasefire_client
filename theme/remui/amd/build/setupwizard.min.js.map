{"version":3,"sources":["setupwizard.js"],"names":["define","$","ModalFactory","ModalEvents","Config","Ajax","notification","str","sw","langstrings","swContainer","swStepContainer","swStep","swActiveStep","swFieldSet","swStepDataContainer","swNextButton","swPrevButton","swContinueButton","swlicenseContainer","swlicenseloader","SetupWizard","stepCount","stepData","this","totalSteps","stepStatus","i","length","isactive","activeStep","status","currentStep","extend","prototype","registerEvents","_this","document","on","saveCurrentStep","alterStep","updateView","swLicenseButton","e","preventDefault","serveLicenseData","step","formData","jQuery","serializeArray","call","methodname","args","settings","JSON","stringify","done","response","fail","ex","message","substring","action","css","onLicensePage","val","sessKey","licenseKey","match","licensekey","sesskey","onlicensepage","parse","showResponse","exception","license","msg","error","responseObj","alert","classes","icon","heading","text","color","buttons","0","type","class","name","value","success","1","onclick","activations_left","updateLicensingView","obj","alertText","replaceWith","prepend","removeClass","addClass","statusText","each","index","html","attr","attrVal","empty","append","prop","show","hide","stepid","hasClass","animate","scrollTop","window","requireLangStrings","get_strings","key","component","then","results","init","replace","skipUpgrade","remuisettings","parent","prev","prompt","create","types","SAVE_CANCEL","title","body","modal","setSaveButtonText","root","getRoot","save","configname","configvalue","location","wwwroot","cancel"],"mappings":"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","sourcesContent":["define([\n\t'jquery', \n\t'core/modal_factory', \n\t'core/modal_events', \n\t'core/config',\n\t'core/ajax',\n\t'core/notification',\n\t'core/str'\n\t], function($, ModalFactory, ModalEvents, Config, Ajax, notification, str) {\n\n\t// component selectors\n\tvar swContainer = \".edw.setupwizard-container\"\n\n\tvar swFormContainer = swContainer + \" #adminsettings\";\n\n\tvar swStepContainer =  swContainer + \" .steps-index\";\n\tvar swStep = swStepContainer + \" .step\";\n\tvar swCurrentStep = swStepContainer + \" .step.current\";\n\tvar swActiveStep = swStepContainer + \" .step.active\";\n\n\tvar swStepDataContainer = swContainer+ \" .step-data\";\n\tvar swFieldSet = swStepDataContainer + \" .adminsettings\";\n\tvar swFieldSetcurrent = swFieldSet + \".current\";\n\tvar swFieldSetActive = swFieldSet + \".active\";\n\t\n\n\tvar swNextButton = swContainer + \" .next-step\";\n\tvar swPrevButton = swContainer + \" .prev-step\";\n\tvar swContinueButton = swContainer + \" .continue\";\n\n\t// Licensing Elements\n\tvar swlicenseContainer = swContainer + \" .license-box\";\n\tvar swLicenseButton = swlicenseContainer + \" .license-btn\";\n\n\tvar swActivateButton = swLicenseButton + '[name=\"edd_remui_license_activate\"]';\n\tvar swDeactivateButton = swLicenseButton + '[name=\"edd_remui_license_deactivate\"]';\n\n\tvar swlSessKey = swlicenseContainer + ' input[name=\"sesskey\"]';\n\tvar swlLicensePage = swlicenseContainer + ' input[name=\"onLicensePage\"]';\n\tvar swlLicenseKey = swlicenseContainer + ' input[name=\"edd_remui_license_key\"]';\n\n\tvar swlicenseloader = swlicenseContainer + ' .licensing-loader';\n\n\tlet sw;\n\n\tvar langstrings;\n\n\tvar SetupWizard = function(stepCount, stepData) {\n\t    this.totalSteps = stepCount;\n\t\tthis.stepStatus = stepData;\n\n\t\tfor (var i = 0; i < stepData.length; i++) {\n\t\t  if (stepData[i].isactive) {\n\t\t  \tthis.activeStep = i + 1;\n\t\t  }\n\t\t  if (stepData[i].status == \"current\") { \n\t\t  \tthis.currentStep = i + 1;\t\n\t\t  }\n\t\t}\n\t}\n\t$.extend(SetupWizard.prototype, {\n\t\tregisterEvents: function() {\n\t\t\tvar _this = this;\n\n\t\t\t$(document).on('click', swNextButton,function(){\n\t\t\t\tif (_this.activeStep < _this.totalSteps) {\n\t\t\t\t\tif (_this.activeStep == _this.currentStep) {\n\t\t\t\t\t\t// Current step is active step - then update the step \n\t\t\t\t\t\t_this.saveCurrentStep(_this.activeStep);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// If the previous button is clicked.\n\t\t\t\t\t\t_this.saveCurrentStep(-1);\n\t\t\t\t\t}\n\t\t\t\t\t_this.activeStep = _this.activeStep + 1; \n\t\t\t\t\t_this.alterStep(_this.activeStep);\n\t\t\t\t\t_this.updateView(_this);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(document).on('click', swPrevButton,function(){\n\t\t\t\tif (_this.activeStep > 1) {\n\t\t\t\t\t_this.activeStep = _this.activeStep - 1; \n\t\t\t\t\t_this.alterStep(_this.activeStep);\n\t\t\t\t\t_this.updateView(_this);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$(document).on('click', swActivateButton,function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\t_this.serveLicenseData('activate');\n\t\t\t});\n\n\t\t\t$(document).on('click', swDeactivateButton,function(e){\n\t\t\t\te.preventDefault();\n\t\t\t\t_this.serveLicenseData('deactivate');\n\t\t\t});\n\t\t},\n\t\tsaveCurrentStep: function(step){\n\t\t\tvar formData = jQuery(swFormContainer).serializeArray();\n\t\t\tvar licenseajax = Ajax.call([{\n\t\t\t    methodname: \"theme_remui_save_current_step\",\n\t\t\t    args: {\n\t\t\t    \t\"step\": step,\n\t\t\t        \"settings\": JSON.stringify(formData),\n\t\t\t    }\n\t\t\t}]);\n\t\t\tlicenseajax[0].done(function(response) {\n\t\t\t\t\t\t\t\t\n\t\t\t}).fail(function(ex) {\n\t\t\t\t// _this.showResponse(ex);\n\t\t\t\tvar exception =  ex.message.substring(12, ex.message.length);\n\t\t\t    // do something with the exception\n\t\t\t});\n\t\t},\n\t\tserveLicenseData: function(action){\n\t\t\tvar _this = this;\n\t\t\t// Activate loader\n\t\t\t$(swlicenseloader).css('display', 'inline-block'); // show method adds display block as css property, we want inline-block.\n\t\t\tvar onLicensePage = $(swlLicensePage).val();\n\t\t\tvar sessKey = $(swlSessKey).val();\n\t\t\tvar licenseKey = $(swlLicenseKey).val();\n\n\t\t\tvar $regexname=/^([a-z0-9]{32})$/;\n\t\t\tif (licenseKey.match($regexname)) {\n\t\t\t\t\n\t\t\t\tvar licenseajax = Ajax.call([{\n\t\t\t\t    methodname: \"theme_remui_serve_license_data\",\n\t\t\t\t    args: {\n\t\t\t\t        \"licensekey\": licenseKey, \n\t\t\t\t        \"sesskey\": sessKey, \n\t\t\t\t        \"action\": action, \n\t\t\t\t        \"onlicensepage\": onLicensePage\n\t\t\t\t    }\n\t\t\t\t}]);\n\t\t\t\tlicenseajax[0].done(function(response) {\n\t\t\t\t\tresponse = JSON.parse(response);\n\t\t\t\t\t$(swlicenseloader).css('display', 'none'); // hide the loader\n\t\t\t\t\t_this.showResponse(response);\n\t\t\t\t}).fail(function(ex) {\n\t\t\t\t\tvar exception =  ex.message.substring(12, ex.message.length);\n\t\t\t\t\texception = JSON.parse(exception);\n\t\t\t\t\t\n\t\t\t\t\t_this.showResponse({\n\t\t\t\t\t\t\"license\": 'failed',\n\t\t\t\t\t\t\"msg\": exception.msg,\n\t\t\t\t\t\t\"error\":true\n\t\t\t\t\t});\n\n\t\t\t\t\t$(swlicenseloader).css('display', 'none');\n\t\t\t\t});\n\t\t\t}\n\t\t\telse{\n\t\t\t\t_this.showResponse({\n\t\t\t\t\t\"license\": 'failed',\n\t\t\t\t\t\"msg\": langstrings[21],\n\t\t\t\t\t\"error\":true\n\t\t\t\t});\n\t\t\t\t$(swlicenseloader).css('display', 'none');\n\t\t\t}\n\t\t},\n\t\tshowResponse: function(response){\n\t\t\tvar _this = this;\n\n\t\t\t// This object will define the License Status On click Event.\n\t\t\tvar responseObj = { \n\t\t\t\t\"alert\": {\n\t\t\t\t\t\"classes\": \"alert alert-danger form-group license-alert\",\n\t\t\t\t\t\"icon\": \"icon fa fa-ban\",\n\t\t\t\t\t\"heading\": langstrings[24], // Alert \n\t\t\t\t\t\"text\": langstrings[14] // License key is deactivated.\n\t\t\t\t},\n\t\t\t\t\"licensekey\": {\n\t\t\t\t\t\"classes\": \"form-control is-invalid\"\n\t\t\t\t}, \n\t\t\t\t\"status\": {\n\t\t\t\t\t\"color\": \"red\",\n\t\t\t\t\t\"text\": langstrings[5]\n\t\t\t\t}, \n\t\t\t\t\"buttons\": {\n\t\t\t\t\t\"0\": {\n\t\t\t\t\t\t\"type\": \"submit\",\n\t\t\t\t\t\t\"class\": \"btn btn-success text-white license-btn\",\n\t\t\t\t\t\t\"name\": \"edd_remui_license_activate\",\n\t\t\t\t\t\t\"value\": langstrings[2],\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (response.success == false && typeof response.error !== \"undefined\" && response.error === \"expired\") {\n\t\t\t\tresponseObj.alert.text = langstrings[19]; // Your license key has Expired. Please, Renew it.\n\t\t\t\tresponseObj.status.text = langstrings[8]; // Expired\n\t\t\t\t\n\t\t\t\tresponseObj.buttons = {\n\t\t\t\t\t\"0\": {\n\t\t\t\t\t\t\"type\": \"submit\",\n\t\t\t\t\t\t\"class\": \"btn btn-success text-white license-btn mr-1\",\n\t\t\t\t\t\t\"name\": \"edd_remui_license_deactivate\",\n\t\t\t\t\t\t\"value\": langstrings[3],\n\t\t\t\t\t},\n\t\t\t\t\t\"1\": {\n\t\t\t\t\t\t\"type\": \"submit\",\n\t\t\t\t\t\t\"class\": \"btn btn-info text-white license-btn\",\n\t\t\t\t\t\t\"name\": \"edd_remui_license_renew\",\n\t\t\t\t\t\t\"value\": langstrings[4],\n\t\t\t\t\t\t'onclick': \"window.open('https://edwiser.org')\"\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// enable the renew license button.\n\t\t\t} else if (response.success == false \n\t\t\t\t&& response.license == \"invalid\" \n\t\t\t\t&& typeof response.error !== \"undefined\" \n\t\t\t\t&& response.error === \"disabled\") {\n\n\t\t\t\tresponseObj.alert.text = langstrings[18]; // Your license key is disabled.\n\t\t\t\tresponseObj.status.text = langstrings[23]; // Disabled\n\t\t\t\tresponseObj.buttons = {\n\t\t\t\t\t\"0\": {\n\t\t\t\t\t\t\"type\": \"submit\",\n\t\t\t\t\t\t\"class\": \"btn btn-success text-white license-btn\",\n\t\t\t\t\t\t\"name\": \"edd_remui_license_activate\",\n\t\t\t\t\t\t\"value\": langstrings[2],\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t} else if (response.success == false \n\t\t\t\t&& response.license == 'invalid' \n\t\t\t\t&& typeof response.error !== \"undefined\" \n\t\t\t\t&&  response.error == \"no_activations_left\") {\n\n\t\t\t    responseObj.alert.text = langstrings[17]; // nolicenselimitleft\n\t\t\t    responseObj.status.text = langstrings[11]; // Limit Exceed\n\t\t\t    responseObj.buttons = {\n\t\t\t    \t\"0\": {\n\t\t\t    \t\t\"type\": \"submit\",\n\t\t\t    \t\t\"class\": \"btn btn-success text-white license-btn\",\n\t\t\t    \t\t\"name\": \"edd_remui_license_activate\",\n\t\t\t    \t\t\"value\": langstrings[2],\n\t\t\t    \t}\n\t\t\t    };\n\t\t\t} else if (response.success == false \n\t\t\t\t&& response.license == 'invalid' \n\t\t\t\t&& typeof response.error !== \"undefined\" \n\t\t\t\t&&  response.error == \"item_name_mismatch\") {\n\n\t\t\t\tresponseObj.alert.text = langstrings[27]; // Invalid key.\n\t\t\t\tresponseObj.status.text = langstrings[26]; // Limit Exceed\n\t\t\t\tresponseObj.buttons = {\n\t\t\t\t\t\"0\": {\n\t\t\t\t\t\t\"type\": \"submit\",\n\t\t\t\t\t\t\"class\": \"btn btn-success text-white license-btn\",\n\t\t\t\t\t\t\"name\": \"edd_remui_license_activate\",\n\t\t\t\t\t\t\"value\": langstrings[2],\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else if (response.license == 'failed' || response.license == \"deactivated\") {\n\t\t\t    responseObj = { \n    \t\t\t\t\"alert\": {\n    \t\t\t\t\t\"classes\": \"alert alert-danger form-group license-alert\",\n    \t\t\t\t\t\"icon\": \"icon fa fa-ban\",\n    \t\t\t\t\t\"heading\": langstrings[24],\n    \t\t\t\t\t\"text\": (typeof response.msg !== \"undefined\")? response.msg: langstrings[14],\n    \t\t\t\t},\n    \t\t\t\t\"licensekey\": {\n    \t\t\t\t\t\"classes\": \"form-control is-invalid\"\n    \t\t\t\t},\n    \t\t\t\t\"status\": {\n    \t\t\t\t\t\"color\": \"red\",\n    \t\t\t\t\t\"text\": langstrings[5]\n    \t\t\t\t}, \n    \t\t\t\t\"buttons\": {\n    \t\t\t\t\t\"0\": {\n    \t\t\t\t\t\t\"type\": \"submit\",\n    \t\t\t\t\t\t\"class\": \"btn btn-success text-white license-btn\",\n    \t\t\t\t\t\t\"name\": \"edd_remui_license_activate\",\n    \t\t\t\t\t\t\"value\": langstrings[2],\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t};\n\t\t\t} else if (response.success == true && response.license == \"valid\" && response.activations_left > 0) {\n\t\t\t    responseObj = { \n    \t\t\t\t\"alert\": {\n    \t\t\t\t\t\"classes\": \"alert alert-success form-group license-alert\",\n    \t\t\t\t\t\"icon\": \"icon fa fa-check\",\n    \t\t\t\t\t\"heading\": langstrings[25],\n    \t\t\t\t\t\"text\": langstrings[20]\n    \t\t\t\t},\n    \t\t\t\t\"licensekey\": {\n    \t\t\t\t\t\"classes\": \"form-control is-valid\"\n    \t\t\t\t},\n    \t\t\t\t\"status\": {\n    \t\t\t\t\t\"color\": \"green\",\n    \t\t\t\t\t\"text\": langstrings[6]\n    \t\t\t\t}, \n    \t\t\t\t\"buttons\": {\n    \t\t\t\t\t\"0\": {\n    \t\t\t\t\t\t\"type\": \"submit\",\n    \t\t\t\t\t\t\"class\": \"btn btn-danger text-white license-btn\",\n    \t\t\t\t\t\t\"name\": \"edd_remui_license_deactivate\",\n    \t\t\t\t\t\t\"value\": langstrings[3],\n    \t\t\t\t\t}\n    \t\t\t\t}\n    \t\t\t};\n\t\t\t}\n\t\t\t_this.updateLicensingView(responseObj);\n\n\t\t},\n\t\tupdateLicensingView: function(obj){\n\t\t\t// Alert Code\n\t\t\tvar alertText = '<div class=\"'+ obj.alert.classes +'\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">×</button><h4><i class=\"'+ obj.alert.icon +'\"></i> <span class=\"subtext\">'+ obj.alert.heading +'</span></h4> <span class=\"subtext\">'+ obj.alert.text +'</span></div>'; \n\n\t\t\tif(jQuery(swlicenseContainer + \" .box-container .license-alert\").length) {\n\t\t\t\t// replace the alert if already present.\n\t\t\t\tjQuery(swlicenseContainer + \" .box-container .license-alert\").replaceWith(alertText);\n\t\t\t} else {\n\t\t\t\t// Add new alert if already not present.\n\t\t\t\tjQuery(swlicenseContainer + \" .box-container\").prepend(alertText);\n\t\t\t}\n\t\t\t// Alert Code\n\n\t\t\t// License Key Code\n\t\t\tjQuery(swlicenseContainer + \" .box-container .licensekey #edd_remui_license_key\").removeClass().addClass(obj.licensekey.classes);\n\t\t\t// License Key Code\n\n\t\t\t// Status Code\n\t\t\tvar statusText = '<div class=\"col-12 text\"><p style=\"color:'+ obj.status.color +'\">'+ obj.status.text +'</p></div>'; \n\t\t\tjQuery(swlicenseContainer + \" .box-container .licensestatus .text\").replaceWith(statusText);\n\t\t\t// Status Code\n\n\t\t\t// Buttons Code\n\t\t\tvar buttons = \"\";\n\n\t\t\tjQuery.each(obj.buttons, function( index, value ) {\n\t\t\t\tvar html = \"<input \";\n\t\t\t    jQuery.each(value, function(attr, attrVal){\n\t\t\t        html += attr + '=\"' + attrVal + '\" ';\n\t\t\t    });\n\n\t\t\t    html += \">\";\n\t\t\t    buttons += html;\n\t\t\t});\n\t\t\t// Adding loader html, as we are going to replace it.\n\t\t\tbuttons += '<div class=\"licensing-loader spinner-border text-muted hidden\"></div>';\n\n\t\t\tjQuery(swlicenseContainer + \" .box-container .licensebuttons .license-form-btn\").empty().append(buttons);\n\t\t\t// Buttons Code\n\n\t\t},\n\t\tupdateView: function(){\n\t\t\t$(swNextButton).prop('disabled', false);\n\t\t\t$(swPrevButton).prop('disabled', false);\n\t\t\t$(swNextButton).show();\n\t\t\t$(swContinueButton).hide();\n\t\t\tif (this.activeStep == this.totalSteps) {\n\t\t\t\t// $(swNextButton).prop('hidden', true);\n\t\t\t\t$(swNextButton).hide();\n\t\t\t\t$(swContinueButton).show();\n\t\t\t}\n\n\t\t\tif (this.activeStep == 1) {\n\t\t\t\t$(swPrevButton).prop('disabled', true);\n\t\t\t\t$(swNextButton).show();\n\t\t\t\t$(swContinueButton).hide();\n\t\t\t}\n\t\t},\n\t\talterStep: function(stepid){\n\t\t\t// Check if current step is Active one, and need to be updated as done\n\t\t\t// and check if previous button is not clicked by comparison with currentstep\n\t\t\tif ($(swActiveStep).hasClass('current') && stepid > this.currentStep) {\n\t\t\t\t$(swActiveStep).removeClass('current').addClass(\"done\");\n\t\t\t\t$(swStep + '[data-stepid=\"' + stepid + '\"]').addClass('current');\n\t\t\t\t$(swFieldSet + '[data-stepid=\"' + stepid + '\"]').addClass('current');\n\t\t\t\tthis.currentStep = this.currentStep + 1; // Update the current id\n\t\t\t}\n\t\t\t$(swActiveStep).removeClass('active');\n\t\t\t$(swFieldSetActive).removeClass('active');\n\t\t\t$(swStep + '[data-stepid=\"' + stepid + '\"]').addClass('active');\n\t\t\t$(swFieldSet + '[data-stepid=\"' + stepid + '\"]').addClass('active');\n\n\t\t\tgotopFunction();\n\t\t},\n\t\trequireLangStrings: function() {\n\t\t\t// We will get array of string without key -- instead we get it as an index.\n\t\t\t// So do not interchange the places of strings in following strings array.\n\t\t\t// Addition of Extra strings can be done at end of array.\n\t\t\tvar strings = [\n\t\t        { key: 'licensenotactive', component: 'theme_remui'}, // 0 \n\t\t        { key: 'licensenotactiveadmin', component: 'theme_remui'}, // 1\n\t\t        { key: 'activatelicense', component: 'theme_remui'}, // 2\n\t\t        { key: 'deactivatelicense', component: 'theme_remui'}, // 3\n\t\t        { key: 'renewlicense', component: 'theme_remui'}, // 4\n\t\t        { key: 'deactivated', component: 'theme_remui'}, // 5\n\t\t        { key: 'active', component: 'theme_remui'}, // 6\n\t\t        { key: 'notactive', component: 'theme_remui'}, // 7\n\t\t        { key: 'expired', component: 'theme_remui'}, // 8\n\t\t        { key: 'licensekey', component: 'theme_remui'}, // 9\n\t\t        { key: 'licensestatus', component: 'theme_remui'}, // 10\n\t\t        { key: 'no_activations_left', component: 'theme_remui'}, // 11\n\t\t        { key: 'activationfailed', component: 'theme_remui'}, // 12\n\t\t        { key: 'noresponsereceived', component: 'theme_remui'}, // 13\n\t\t        { key: 'licensekeydeactivated', component: 'theme_remui'}, // 14\n\t\t        { key: 'siteinactive', component: 'theme_remui'}, // 15\n\t\t        { key: 'entervalidlicensekey', component: 'theme_remui'}, // 16\n\t\t        { key: 'nolicenselimitleft', component: 'theme_remui'}, // 17\n\t\t        { key: 'licensekeyisdisabled', component: 'theme_remui'}, // 18\n\t\t        { key: 'licensekeyhasexpired', component: 'theme_remui'},  // 19\n\t\t        { key: 'licensekeyactivated', component: 'theme_remui'}, // 20\n\t\t        { key: 'entervalidlicensekey', component: 'theme_remui'}, // 21\n\t\t        { key: 'edwiserremuilicenseactivation', component: 'theme_remui'}, // 22\n\t\t        { key: 'disabled', component: 'theme_remui'}, // 23\n\t\t        { key: 'alert', component: 'theme_remui'}, // 24\n\t\t        { key: 'success', component: 'theme_remui'}, // 25\n\t\t        { key: 'invalid', component: 'theme_remui'}, // 26\n\t\t        { key: 'purchasecodeinvalid', component: 'theme_remui'}, // 27\n\t\t    ];\n\t\t    str.get_strings(strings).then(function (results) {\n\t\t        langstrings = results;\n\t\t    });\n\t\t}\n\t});\n\tvar skipUpgrade = function() {\n\t\t// Add the button to redirect to setup wizard page from upgradation page.\n\t\t// Consider few things before doing it...\n\t\t// 1. What if other plugins are also being updated.\n\t\t//    It should not skip other plugins config setup.\n\t\t// 2. Should not stop the upgrade.php file execution.\n\t\t// 3. Do not hide other plugin's settings.\n\t\tvar remuisettings = '#page-admin-upgradesettings #admin-enableannouncement';\n\t\tjQuery(remuisettings).parent().prev().hide();\n\t\tjQuery(remuisettings).parent().hide();\n\t};\n\n\t// When the user clicks Next button, scroll to the top of the document\n\tfunction gotopFunction() {\n\t\t$('html, body').animate({scrollTop: 0}, $(window).scrollTop() / 6);\n\t}\n\n\tvar promptsetupwizard = function(){\n\t\tvar strings = [\n\t        { key: 'setupwizard', component: 'theme_remui'}, // 0 \n\t        { key: 'setupwizardmodalmsg', component: 'theme_remui'}, // 1\n\t    ];\n\t    str.get_strings(strings).then(function (results) {\n    \t\tModalFactory.create({\n    \t\t\ttype: ModalFactory.types.SAVE_CANCEL,\n                title: results[0],\n                body: results[1]\n            })\n            .then(function(modal) {\n    \t        modal.setSaveButtonText(results[0]);\n    \t        var root = modal.getRoot();\n    \t        root.on(ModalEvents.save, function() {\n    \t            // Do something on Setup Wizard button click\n    \t            Ajax.call([{\n                        methodname: 'theme_remui_set_setting',\n                        args: {configname: \"flagsetupwizard\", configvalue: true},\n                        done: function(){\n                        \t$(location).attr('href', Config.wwwroot + '/theme/remui/setupwizard.php');\n                        },\n                        fail: notification.exception\n                    }]);\n    \t            \n    \t        });\n    \t        root.on(ModalEvents.cancel, function() {\n    \t            // Do something on Setup Wizard button click\n    \t            Ajax.call([{\n                        methodname: 'theme_remui_set_setting',\n                        args: {configname: \"flagsetupwizard\", configvalue: true},\n                        done: function(){},\n                        fail: notification.exception\n                    }]);\n    \t        });\n            \tmodal.show();\n    \t    });\n\t    });\n\n\t\t\n\t};\n\n\treturn {\n\t    init: function(stepData){\n\n\t    \t// This is a hack, as quotes were being converted to &quot --\n\t    \tstepData = JSON.parse(stepData.replace(/&quot;/g, '\"'));\n\t    \t \t\n\t    \t// Initialize the object\n\t    \tsw = new SetupWizard($('.stepscount').val(), stepData);\n\t    \t// Register all the click and document load events required on SetupWizard\n\t    \tsw.registerEvents();\n\t    \t\n\t    \tsw.updateView();\n\t    \tsw.requireLangStrings();\n\t    },\n\t    skipUpgrade: skipUpgrade,\n\t    prompt: promptsetupwizard\n\t};\n});\n"],"file":"setupwizard.min.js"}